<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [tlug] Compile/load problem with graphics library -->
<!--X-From-R13: Pevna Qunaqyre <oevnaNvzntvangbevhz.bet> -->
<!--X-Date: Wed, 08 Aug 2018 04:49:08 +0900 -->
<!--X-Message-Id: a3dd8cfb&#45;f6bd&#45;f433&#45;c5db&#45;4b7bb8cab604@imaginatorium.org -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: fe5a3e36&#45;1068&#45;ab9b&#45;e233&#45;66f92f81b522@imaginatorium.org -->
<!--X-Reference: 32f9378d&#45;874e&#45;b475&#45;e35f&#45;fe10719cede8@gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00005.html">Date Prev</a>][<a href="msg00007.html">Date Next</a>][<a href="msg00003.html">Thread Prev</a>][<a href="msg00007.html">Thread Next</a>][<a href="maillist.html#00006">Date Index</a>][<a href="threads.html#00006">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] Compile/load problem with graphics library</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Wed, 8 Aug 2018 04:49:02 +0900</li>
<li><strong>From</strong>: <strong>Brian Chandler &lt;<a href="mailto:brian@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Compile%2Fload%20problem%20with%20graphics%20library">brian@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] Compile/load problem with graphics library</strong></li>
<li>References: &lt;<a href="msg00001.html">fe5a3e36-1068-ab9b-e233-66f92f81b522@imaginatorium.org</a>&gt;	&lt;<a href="msg00003.html">32f9378d-874e-b475-e35f-fe10719cede8@gmail.com</a>&gt;</li>
<li>User-agent: Mozilla/5.0 (X11; Linux x86_64; rv:45.0) Gecko/20100101	Thunderbird/45.2.0</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
Many thanks for responses.

</pre><tt>I may not have mentioned: this program has been compiled several times, 
</tt><tt>and was running for more than 3 years. So it seems unlikely that I made 
</tt><tt>a fundamental mistake. I got the response about object order on the 
</tt><tt>magick forum too; I have tried putting the configure script which 
</tt><tt>generates the library references after the .o files, but it makes no 
</tt><tt>difference.
</tt><pre style="margin: 0em;">

</pre><tt>One big problem is that I simply cannot understand the mass of subtly 
</tt><tt>different library names involved. The configure script generates the 
</tt><tt>following for the libraries to be searched:
</tt><pre style="margin: 0em;">

-L/usr/local/lib -lMagick++-6.Q16 -lMagickWand-6.Q16 -lMagickCore-6.Q16

</pre><tt>The -L parameter adds /usr/local/lib to the directories to be searched; 
</tt><tt>I do not understand the relation to the three libraries. Should there be 
</tt><tt>files with this name in /usr/local/lib? There are not; the following are 
</tt><tt>the files including &quot;Magic&quot; in their names...
</tt><pre style="margin: 0em;">

------------------------------------------------------------------
libGraphicsMagick++.a           libGraphicsMagickWand.so.2.7.3
libGraphicsMagick++.so          libGraphicsMagickWand.so.2.7.4
libGraphicsMagick++.so.12       libGraphicsMagickWand.so.2.8.0
libGraphicsMagick++.so.12.1.0   libGraphicsMagickWand.so.2.8.1
libGraphicsMagick++.so.12.1.1   libGraphicsMagickWand.so.2.8.2
libGraphicsMagick++.so.12.2.0   libGraphicsMagickWand.so.2.9.0
libGraphicsMagick++.so.12.3.0   libMagick++-6.Q16.a
libGraphicsMagick++.so.12.3.1   libMagick++-6.Q16.la
libGraphicsMagick++.so.12.3.2   libMagick++-6.Q16.so
libGraphicsMagick.a             libMagick++-6.Q16.so.6
libGraphicsMagick.so            libMagick++-6.Q16.so.6.0.0
libGraphicsMagick.so.3          libMagickCore-6.Q16.a
libGraphicsMagick.so.3.15.0     libMagickCore-6.Q16.la
libGraphicsMagick.so.3.15.1     libMagickCore-6.Q16.so
libGraphicsMagick.so.3.16.0     libMagickCore-6.Q16.so.2
libGraphicsMagick.so.3.17.0     libMagickCore-6.Q16.so.2.0.0
libGraphicsMagick.so.3.17.2     libMagickWand-6.Q16.a
libGraphicsMagick.so.3.18.0     libMagickWand-6.Q16.la
libGraphicsMagickWand.a         libMagickWand-6.Q16.so
libGraphicsMagickWand.so        libMagickWand-6.Q16.so.2
libGraphicsMagickWand.so.2      libMagickWand-6.Q16.so.2.0.0

GraphicsMagick:
config

ImageMagick-6.9.1:
config-Q16

ImageMagick-6.9.4:
config-Q16
------------------------------------------------------------------

---- Latest error: with the library files after the .o files ----
horigome@kulle% make imagetrim
</pre><tt>g++ imagetrim.o boundingbox.o `Magick++-config --ldflags --libs` -o 
</tt><tt>imagetrim
</tt><pre style="margin: 0em;">
imagetrim.o: In function `main':
</pre><tt>imagetrim.cpp:(.text+0x3c1): undefined reference to 
</tt><tt>`Magick::Image::read(std::__cxx11::basic_string&lt;char, 
</tt><tt>std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)'
</tt><tt>imagetrim.cpp:(.text+0x783): undefined reference to 
</tt><tt>`Magick::Image::write(std::__cxx11::basic_string&lt;char, 
</tt><tt>std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)'
</tt><tt>imagetrim.cpp:(.text+0xd55): undefined reference to 
</tt><tt>`Magick::Image::write(std::__cxx11::basic_string&lt;char, 
</tt><tt>std::char_traits&lt;char&gt;, std::allocator&lt;char&gt; &gt; const&amp;)'
</tt><pre style="margin: 0em;">
collect2: error: ld returned 1 exit status
*** Error code 1

Stop.
make: stopped in /usr/home/horigome/c

</pre><tt>.... so far no progress. I have to get this sorted out. Where would I 
</tt><tt>find an ld expert (paid or otherwise)? Grateful for any suggestions.
</tt><pre style="margin: 0em;">

Brian Chandler

On 2018-08-05 09:49, Joe Foran wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hi Brian,

The linker is giving this error because it cannot find the functions in
question.
The order in which the object files are provided to the linker is very
important.
They should be specified in order of most specific (application object
files)
to most general (library object files).
In the makefile you provide on the forum thread, you have lines like|
$(CC) $(LDFLAGS) test.o cutoutbg.o boundingbox.o -o $@|
||||

|The LDFLAGS variable contains the necessary information about the
ImageMagick library files and should come after the application object
files. i.e. ||$(CC) test.o cutoutbg.o boundingbox.o |||$(LDFLAGS) -o $@||
||

You will need to do this everywhere LDFLAGS is referenced.
Does this help?

Joe


On 2018/08/05 3:55, Brian Chandler wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Hello! I'm looking for help with a software problem. I have a small C++
program to do some basic image manipulation (basic, but very specific),
using the Imagemagick++ library; it ran on my webserver (at pair.com
hosting) for years, but stopped because of an &quot;upgrade&quot;. I cannot now
recompile, cannot really understand the problem, and can't seem to get
any help either from pair.com or the Imagemagick forum. Here's my
question in full:

<a  rel="nofollow" href="https://www.imagemagick.org/discourse-server/viewtopic.php?f=23&amp;t=34332&amp;sid=364f3a5fa340bcbb3d0057542983ff5f">https://www.imagemagick.org/discourse-server/viewtopic.php?f=23&amp;t=34332&amp;sid=364f3a5fa340bcbb3d0057542983ff5f</a>


It looks as though the loader has some problem. Unfortunately the forum
responses I've received don't suggest to me that the helpers know any
more than I do. Obviously the best answer is a change to the makefile,
or similar, that makes the library work again. But failing that, I would
try to install the library in my own server space, giving up on the one
provided by Pair.com. The worst option I suppose is to rewrite the
program to use something else, but I hope it doesn't come to that.

Can anyone suggest where to start? If I need to provide other
information, then sorry, but just say. Thanks!

Brian Chandler

</pre></blockquote><pre style="margin: 0em;">




</pre></blockquote><pre style="margin: 0em;">


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00007" href="msg00007.html">Re: [tlug] Compile/load problem with graphics library</a></strong>
<ul><li><em>From:</em> Jim Tittsler</li></ul></li>
<li><strong><a name="00008" href="msg00008.html">Re: [tlug] Compile/load problem with graphics library</a></strong>
<ul><li><em>From:</em> Darren Cook</li></ul></li>
<li><strong><a name="00009" href="msg00009.html">Re: [tlug] Compile/load problem with graphics library</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
<li><strong><a name="00010" href="msg00010.html">Re: [tlug] Compile/load problem with graphics library</a></strong>
<ul><li><em>From:</em> Raymond Wan</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00001" href="msg00001.html">[tlug]  Compile/load problem with graphics library</a></strong>
<ul><li><em>From:</em> Brian Chandler</li></ul></li>
<li><strong><a name="00003" href="msg00003.html">Re: [tlug] Compile/load problem with graphics library</a></strong>
<ul><li><em>From:</em> Joe Foran</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00005.html">Re: [tlug] Free: 1080p Project With Bad Colour</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00007.html">Re: [tlug] Compile/load problem with graphics library</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00003.html">Re: [tlug] Compile/load problem with graphics library</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00007.html">Re: [tlug] Compile/load problem with graphics library</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00006"><strong>Date</strong></a></li>
<li><a href="threads.html#00006"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
