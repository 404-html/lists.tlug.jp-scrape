<!-- MHonArc v2.5.2 -->
<!--X-Subject: [tlug] Apache: Logging: how&#45;to pipe logs or log to another machine (was Disk I/O bottle -->
<!--X-From-R13: "Xrna&#45;Quevfgvna Wzornhyg" <wrna_puevfgvnaNubgznvy.pbz> -->
<!--X-Date: Wed, 4 Sep 2002 21:31:59 +0900 (JST) -->
<!--X-Message-Id: F49MWuLn5U9T3TGJ2TU0000048b@example.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00099.html">Date Prev</a>][<a href="msg00101.html">Date Next</a>][<a href="msg00131.html">Thread Prev</a>][<a href="msg00101.html">Thread Next</a>][<a href="maillist.html#00100">Date Index</a>][<a href="threads.html#00100">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[tlug] Apache: Logging: how-to pipe logs or log to another machine (was Disk I/O bottle</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Wed, 04 Sep 2002 21:31:49 +0900</li>
<li><strong>From</strong>: <strong>&quot;Jean-Christian Imbeault&quot; &lt;<A HREF="mailto:jean_christian@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Apache%3A%20Logging%3A%20how-to%20pipe%20logs%20or%20log%20to%20another%20machine%20%28was%20Disk%20I%2FO%20bottle">jean_christian@example.com</A>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>[tlug] Apache: Logging: how-to pipe logs or log to another machine (was Disk I/O bottle</strong></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
&gt;From: &quot;Jonathan Q&quot; &lt;jq@example.com&gt;
&gt;
&gt;OK, in that case, it's possible that you just aren't keeping enough spare
&gt;Apache processes in reserve.

I thought of that and tried but it didn't do anything. My settings now are 
Min 32 and Max 64. Th load on the server never goes above 700 server 
processes.

I can't see how not having enough spare servers would cause a disk I/O 
bottleneck though. Creating a new process doesn't cause any disk writes or 
reads does it?

&gt;If you have another machine in that location and
&gt;it has adequate disk space, you can use it as your log host.

Really? How!? I've been looking ever since mentionned that but can't find 
any apache directives that will let me log to another host. The best I can 
find are piped logs (I guess I could pipe to rcp?).

On that note I did find this reference in the apache docs:

# compressed logs
CustomLog &quot;|/usr/bin/gzip -c &gt;&gt; /var/log/access_log.gz&quot; common

I though this might be worthwhile as it would shrink the number of bytes 
actually being written to disk.

But I tried this on my test machine and all I got was a file called 
access_log.gz being created but it it always empty.

Can anyone tell me how to used piped logs in apache to gzip on the fly 
*before* the log is written out? (And if possible to then pipe it to 
cronolog? ;)

&gt;Another thing that may help in addition to the above is to remove the 
&gt;CD-ROM
&gt;drive and put a second disk on other ATA header and run them as RAID 1
&gt;(mirrored)

I would except that this is a 1U rack server and the CD-ROM has, I think, 
it's own controller. And the CD-ROM is probably a lot slower than the 
ATA-100 controller. So the speed gains I would get from mirroring would be 
eaten up by the slow CD-ROM bus.

But if I can figure out how to write the apache logs to another machine on 
the network that would be just fine :)

Jc

_________________________________________________________________
Chat with friends online, try MSN Messenger: <A  HREF="http://messenger.msn.com">http://messenger.msn.com</A>

</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00101" href="msg00101.html">Re: [tlug] Apache: Logging: how-to pipe logs or log to anothermachine (was Disk I/O bottle</a></strong>
<ul><li><em>From:</em> Bruno Raoult</li></ul></li>
<li><strong><a name="00109" href="msg00109.html">Re: [tlug] Apache: Logging: how-to pipe logs or log to anothermachine (was Disk I/O bottle</a></strong>
<ul><li><em>From:</em> Marc Christensen</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00099.html">Re: [tlug] Disk I/O bottleneck: how to solve?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00101.html">Re: [tlug] Apache: Logging: how-to pipe logs or log to anothermachine (was Disk I/O bottle</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00131.html">Re: [tlug] More on GPG signing</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00101.html">Re: [tlug] Apache: Logging: how-to pipe logs or log to anothermachine (was Disk I/O bottle</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00100"><strong>Date</strong></a></li>
<li><a href="threads.html#00100"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
