<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [tlug] DDB/CJKV&#45;E Web Host under DDOS attack -->
<!--X-From-R13: Xvz Perra <wvzoerraNtznvy.pbz> -->
<!--X-Date: Thu, 10 Mar 2016 08:24:48 +0900 -->
<!--X-Message-Id: CABHGxq4eM8fLQ&#45;9sNke00D=H_kowrVhbbL6q061S210Fyq4+nQ@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 55E425B2.3010309@l.u&#45;tokyo.ac.jp -->
<!--X-Reference: 5684F956.6080103@l.u&#45;tokyo.ac.jp -->
<!--X-Reference: 56875688.2030409@l.u&#45;tokyo.ac.jp -->
<!--X-Reference: 8F8F0284&#45;13E6&#45;49E1&#45;992F&#45;B5EDD148BAED@tsukaeru.net -->
<!--X-Reference: 20160104041200.GC3188@monotonic.cynic.net -->
<!--X-Reference: CABHGxq5sz5RakSxtO=XW&#45;obittzdKwnvMd7ZBwp=rNhE09V0jA@mail.gmail.com -->
<!--X-Reference: 20160106042312.GA24871@monotonic.cynic.net -->
<!--X-Reference: CABHGxq5xa_ck+rPtuV&#45;fN2Ho4qeZ3muaGbmsCmJRsr&#45;bZkccSg@mail.gmail.com -->
<!--X-Reference: 20160308083313.GI5597@telephonic.cynic.net -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00007.html">Date Prev</a>][<a href="msg00009.html">Date Next</a>][<a href="msg00005.html">Thread Prev</a>][<a href="msg00009.html">Thread Next</a>][<a href="maillist.html#00008">Date Index</a>][<a href="threads.html#00008">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] DDB/CJKV-E Web Host under DDOS attack</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Thu, 10 Mar 2016 10:24:26 +1100</li>
<li><strong>From</strong>: <strong>Jim Breen &lt;<a href="mailto:jimbreen@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20DDB%2FCJKV-E%20Web%20Host%20under%20DDOS%20attack">jimbreen@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] DDB/CJKV-E Web Host under DDOS attack</strong></li>
<li>References: &lt;55E425B2.3010309@l.u-tokyo.ac.jp&gt;	&lt;5684F956.6080103@l.u-tokyo.ac.jp&gt;	&lt;56875688.2030409@l.u-tokyo.ac.jp&gt;	&lt;8F8F0284-13E6-49E1-992F-B5EDD148BAED@tsukaeru.net&gt;	&lt;20160104041200.GC3188@monotonic.cynic.net&gt;	&lt;CABHGxq5sz5RakSxtO=XW-obittzdKwnvMd7ZBwp=rNhE09V0jA@mail.gmail.com&gt;	&lt;20160106042312.GA24871@monotonic.cynic.net&gt;	&lt;CABHGxq5xa_ck+rPtuV-fN2Ho4qeZ3muaGbmsCmJRsr-bZkccSg@mail.gmail.com&gt;	&lt;<a href="msg00005.html">20160308083313.GI5597@telephonic.cynic.net</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On 8 March 2016 at 19:33, Curt Sampson &lt;cjs@example.com&gt; wrote:
&gt; On 2016-01-07 07:41 +1100 (Thu), Jim Breen wrote:
&gt;
&gt;&gt; On looking at it more closely I realise that wwwjdic is probably
&gt;&gt; not a good CDN candidate after all. It doesn't have static content;
&gt;&gt; everything is coming out of dictionary files with a humungous number
&gt;&gt; of potential query terms. I don't think there really are identifiable
&gt;&gt; common queries, or at least not enough to pre-compose.
&gt;
&gt; I thought you were right, for a bit, but then I had an idea. The
&gt; individual dictionary entries are all fairly constant, most of them
&gt; rarely changing, right? One could set up a query system that returns
&gt; only the set of entry IDs of interest (as some small JSON object, no
&gt; doubt) and then have the page itself (i.e., JavaScript running in the
&gt; browser) pull these entries from the CDN servers (that would store them
&gt; as static files) and arrange them nicely on the page.
&gt;
&gt; This would minimize data served by the servers that actually do
&gt; searches. How useful this would be, I'm still not sure.

I'm not sure either. The server that fields the lookup requests would
get much the same incoming traffic; just the outgoing would be cut.
Whether this improves its position in a DDOS is questionable.

&gt; Certainly it makes DOS attacks more difficult. You could effectively
&gt; limit the bandwidth of every IP of a potential attacker to something
&gt; negligible, meaning that he's going to have to have a lot of IP
&gt; addresses available to run up your CPU and/or IO load to a problematic
&gt; level. (You can safely limit an individual IP to something like 10
&gt; requests/minute, so a single query server should be able to handle
&gt; O(100,000) clients without difficulty.)

Hmmm. I can't see that change has any impact on the application level
traffic coming *from* requesting IP addresses.  At the IP level it would,
but trying to limit that at the IP address level would mean very messy
stuff right down where web applications don't or can't go.

We've been having some problems in recent months which have looked
rather like DOS attacks, but in fact have just been cases of innocent
events leading to a lot of traffic which has damaged the rather
lightly-provisioned
server. They've mainly been to do with the database maintenance system,
which unlike wwwjdic(*) use python and postgresql. A rush of requests has
lead to a heap of processes (httpd, etc.) being spawned, a sudden runout
of RAM and swap, and the system eventually thrashes itself to death.
We've stopped the problem by limiting the number of httpd processes
allowed and by having the python routines block requests if the available
swap is below a threshold. Fingers crossed. Seems to have worked.

JIm

(*) wwwjdic is in C and has all its data in read-only static files which are
usually cached, so it can breeze through a lot of requests with very
little load on the server.

-- 
Jim Breen
Adjunct Snr Research Fellow, Japanese Studies Centre, Monash University

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00009" href="msg00009.html">Re: [tlug] DDB/CJKV-E Web Host under DDOS attack</a></strong>
<ul><li><em>From:</em> Curt Sampson</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00005" href="msg00005.html">Re: [tlug] DDB/CJKV-E Web Host under DDOS attack</a></strong>
<ul><li><em>From:</em> Curt Sampson</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00007.html">Re: [tlug] [CFP] Call for presenters - April 19 Technical Meeting</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00009.html">Re: [tlug] DDB/CJKV-E Web Host under DDOS attack</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00005.html">Re: [tlug] DDB/CJKV-E Web Host under DDOS attack</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00009.html">Re: [tlug] DDB/CJKV-E Web Host under DDOS attack</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00008"><strong>Date</strong></a></li>
<li><a href="threads.html#00008"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
