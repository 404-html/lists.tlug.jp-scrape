<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [tlug] DDB/CJKV&#45;E Web Host under DDOS attack -->
<!--X-From-R13: Qheg Enzcfba <pwfNplavp.arg> -->
<!--X-Date: Tue, 08 Mar 2016 17:33:15 +0900 -->
<!--X-Message-Id: 20160308083313.GI5597@telephonic.cynic.net -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 55E425B2.3010309@l.u&#45;tokyo.ac.jp -->
<!--X-Reference: 5684F956.6080103@l.u&#45;tokyo.ac.jp -->
<!--X-Reference: 56875688.2030409@l.u&#45;tokyo.ac.jp -->
<!--X-Reference: 8F8F0284&#45;13E6&#45;49E1&#45;992F&#45;B5EDD148BAED@tsukaeru.net -->
<!--X-Reference: 20160104041200.GC3188@monotonic.cynic.net -->
<!--X-Reference: CABHGxq5sz5RakSxtO=XW&#45;obittzdKwnvMd7ZBwp=rNhE09V0jA@mail.gmail.com -->
<!--X-Reference: 20160106042312.GA24871@monotonic.cynic.net -->
<!--X-Reference: CABHGxq5xa_ck+rPtuV&#45;fN2Ho4qeZ3muaGbmsCmJRsr&#45;bZkccSg@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00004.html">Date Prev</a>][<a href="msg00006.html">Date Next</a>][<a href="msg00004.html">Thread Prev</a>][<a href="msg00008.html">Thread Next</a>][<a href="maillist.html#00005">Date Index</a>][<a href="threads.html#00005">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] DDB/CJKV-E Web Host under DDOS attack</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Tue, 8 Mar 2016 17:33:13 +0900</li>
<li><strong>From</strong>: <strong>Curt Sampson &lt;<a href="mailto:cjs@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20DDB%2FCJKV-E%20Web%20Host%20under%20DDOS%20attack">cjs@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] DDB/CJKV-E Web Host under DDOS attack</strong></li>
<li>References: &lt;55E425B2.3010309@l.u-tokyo.ac.jp&gt;	&lt;5684F956.6080103@l.u-tokyo.ac.jp&gt;	&lt;56875688.2030409@l.u-tokyo.ac.jp&gt;	&lt;8F8F0284-13E6-49E1-992F-B5EDD148BAED@tsukaeru.net&gt;	&lt;20160104041200.GC3188@monotonic.cynic.net&gt;	&lt;CABHGxq5sz5RakSxtO=XW-obittzdKwnvMd7ZBwp=rNhE09V0jA@mail.gmail.com&gt;	&lt;20160106042312.GA24871@monotonic.cynic.net&gt;	&lt;CABHGxq5xa_ck+rPtuV-fN2Ho4qeZ3muaGbmsCmJRsr-bZkccSg@mail.gmail.com&gt;</li>
<li>User-agent: Mutt/1.5.21 (2010-09-15)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On 2016-01-07 07:41 +1100 (Thu), Jim Breen wrote:

&gt; On looking at it more closely I realise that wwwjdic is probably
&gt; not a good CDN candidate after all. It doesn't have static content;
&gt; everything is coming out of dictionary files with a humungous number
&gt; of potential query terms. I don't think there really are identifiable
&gt; common queries, or at least not enough to pre-compose.

I thought you were right, for a bit, but then I had an idea. The
individual dictionary entries are all fairly constant, most of them
rarely changing, right? One could set up a query system that returns
only the set of entry IDs of interest (as some small JSON object, no
doubt) and then have the page itself (i.e., JavaScript running in the
browser) pull these entries from the CDN servers (that would store them
as static files) and arrange them nicely on the page.

This would minimize data served by the servers that actually do
searches. How useful this would be, I'm still not sure.

Certainly it makes DOS attacks more difficult. You could effectively
limit the bandwidth of every IP of a potential attacker to something
negligible, meaning that he's going to have to have a lot of IP
addresses available to run up your CPU and/or IO load to a problematic
level. (You can safely limit an individual IP to something like 10
requests/minute, so a single query server should be able to handle
O(100,000) clients without difficulty.)

And the client-side JS code could not only randomize the query server
used, but also remember which ones have been slow recently, so an
attacker would have to take down all query servers to seriously affect
real clients.

Plus there are a few minor tricks you could pull that might force the
attacker to do actual analysis and coding work to do the DOS. For
example, the query request does nothing but return a token that has to
be given to a different URL to actually run the query, meaning that the
attacker can't effectively DOS the query servers with a static URL. (But
I dunno, maybe attackers just use the actual web browser on whatever
machine they took over, anyway.)

However, there are other issues. I don't know how many folks out there
are still using browsers on non-smartphones that might not be able to
run the client-side JS. I can see how to split that on to different
servers, but not how to mitigate DOS attacks on those servers, taking
down the non-JS browser site. There's probably other stuff, too.

Thoughts, anyone? I think this is actually a pretty interesting problem.

cjs
-- 
Curt Sampson         &lt;cjs@example.com&gt;         +81 90 7737 2974

To iterate is human, to recurse divine.
    - L Peter Deutsch

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00008" href="msg00008.html">Re: [tlug] DDB/CJKV-E Web Host under DDOS attack</a></strong>
<ul><li><em>From:</em> Jim Breen</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00004.html">[tlug] [announcement] nomikai March 18 (Friday)</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00006.html">[tlug] [CFP] Call for presenters - April 19 Technical Meeting</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00004.html">[tlug] [announcement] nomikai March 18 (Friday)</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00008.html">Re: [tlug] DDB/CJKV-E Web Host under DDOS attack</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00005"><strong>Date</strong></a></li>
<li><a href="threads.html#00005"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
