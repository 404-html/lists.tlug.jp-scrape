<!-- MHonArc v2.2.0 -->
<!--X-Subject: Re: GNU&#45;Linux vs Linux naming [was RE: LAM/MPI Parallel processing] -->
<!--X-From: "Stephen J. Turnbull" <turnbull@example.com> -->
<!--X-Date: Fri, 8 Sep 2000 11:42:24 +0900 (JST) -->
<!--X-Message-Id: 14776.21008.299993.165471@example.com -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: FOEBIKDLMFBGOKGGBGDEAENPCEAA.jshore@example.com&#45;shuppan.com -->
<!--X-Reference-Id: m2u2bu84tz.fsf@example.com -->
<!--X-Reference-Id: 20000906100813.A15622@example.com&#45;dark&#45;truthful&#45;mirror.perlhacker.org -->
<!--X-Reference-Id: m2n1hk6hfx.fsf@example.com -->
<!--X-Reference-Id: 14775.4589.886336.421908@example.com -->
<!--X-Reference-Id: 20000907105314.A27774@example.com&#45;dark&#45;truthful&#45;mirror.perlhacker.org -->
<!--X-Reference-Id: 14775.29695.536967.913439@example.com -->
<!--X-Reference-Id: 20000907131838.A2791@example.com&#45;dark&#45;truthful&#45;mirror.perlhacker.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Schweizer - webmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<!--X-Body-Begin-->
<!--X-User-Header-->
<P>
<font color="blue">
Support open source code!
</font>
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00129.html">Date Prev</A>][<A HREF="msg00131.html">Date Next</A>][<A HREF="msg00126.html">Thread Prev</A>][<A HREF="msg00096.html">Thread Next</A>][<A HREF="maillist.html#00130">Date Index</A>][<A HREF="threads.html#00130">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: GNU-Linux vs Linux naming [was RE: LAM/MPI Parallel processing]</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong><A HREF="mailto:tlug@example.com">tlug@example.com</A></strong></LI>
<LI><strong>Subject</strong>: <strong>Re: GNU-Linux vs Linux naming [was RE: LAM/MPI Parallel processing]</strong></LI>
<LI><strong>From</strong>: <strong>"Stephen J. Turnbull" &lt;<A HREF="mailto:turnbull@example.com">turnbull@example.com</A>&gt;</strong></LI>
<LI>Date: Fri, 8 Sep 2000 11:42:24 +0900 (JST)</LI>
<LI>Content-Transfer-Encoding: 7bit</LI>
<LI>Content-Type: text/plain; charset=us-ascii</LI>
<LI>In-Reply-To: &lt;<A HREF="msg00126.html">20000907131838.A2791@example.com</A>&gt;</LI>
<LI>References: &lt;<A HREF="msg00048.html">FOEBIKDLMFBGOKGGBGDEAENPCEAA.jshore@example.com</A>&gt;&lt;<A HREF="msg00050.html">m2u2bu84tz.fsf@example.com</A>&gt;&lt;<A HREF="msg00072.html">20000906100813.A15622@example.com</A>&gt;&lt;<A HREF="msg00102.html">m2n1hk6hfx.fsf@example.com</A>&gt;&lt;<A HREF="msg00104.html">14775.4589.886336.421908@example.com</A>&gt;&lt;<A HREF="msg00124.html">20000907105314.A27774@example.com</A>&gt;&lt;<A HREF="msg00125.html">14775.29695.536967.913439@example.com</A>&gt;&lt;<A HREF="msg00126.html">20000907131838.A2791@example.com</A>&gt;</LI>
<LI>Reply-To: <A HREF="mailto:tlug@example.com">tlug@example.com</A></LI>
<LI>Resent-From: tlug@example.com</LI>
<LI>Resent-Message-ID: &lt;OcdVhB.A.GeF.pSFu5@example.com&gt;</LI>
<LI>Resent-Sender: tlug-request@example.com</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
&gt;&gt;&gt;&gt;&gt; "Simon" == Simon Cozens &lt;simon@example.com&gt; writes:

    Simon&gt; So what's this:

Implicit in --version being present, which is implicit in the fact
that I knew what the version string said?

    &gt;&gt; but the "author" managed to put his name into the version
    &gt;&gt; string.

    Simon&gt; To be honest, I did omit 46 lines of copyright info and
    Simon&gt; version strings.

Huh?  That doesn't show up on my box!  Oh, you mean in the _BSD
sources_, not in the output of GNU `sync --help'!  :-P

    Simon&gt; But on average, BSD binaries appear to be half the size of
    Simon&gt; GNU equivalents.

You mean I could get my XEmacs down from 10MB to 5?  :-)

On my Linux/glibc/gcc 2.95.2 system, your version of sync is 4803
bytes, 3040 stripped.  How big is it on a BSD?  The Debian/GNU version
is 9340 stripped, of which 660 is string data.  GNU sync also includes
a reference to "write error", which confuses me since I thought
sync(2) always succeeds (or hangs).

One thing that evidently takes up a lot of space in that binary is
localization code (setlocale, gettext, and friends).  You sure aren't
going to catch me admitting that is wasted space!!  (In syscall
wrappers that can't error, OK.  How many of those are there?)

Here's what I think sync.c should look like.

/* GNU sync - flush buffered filesystem info to disk

... short copyright notice goes here; if you must have a long one,
    put it at the end ...[1]

*/

#define __GNU_POLITICALLY_CORRECT__
#include &lt;gnu_policy.h&gt;

#ifdef __GNU_POLITICALLY_CORRECT__ /* [2] */
static struct gnu_required_options sync_options =
{
  /* Copyright */
  "Copyright (C) 2000 Free Software Foundation, Inc.",
  /* Version [3] */
  "$Id$",
  /* Usage [4] */
  "Usage: %s %s",
  /* Help [5] */
  "Usage: %s [GNU documentation option]\n\
System call wrapper: forces changed blocks to disk, updates the super block.\n\
\n\
Version: %s\n\
\n\
For GNU documentation options, see the manual for gnu_process_options.\n\
\n\
Report bugs to &lt;bug-fileutils@example.com&gt;.\n"
};
#else
/* Minimal version described in [2] goes here */
#endif

#include &lt;unistd.h&gt;

int main (int argc, char *argv[])
{
    /* [6] */
    gnu_policy_initialize_locale ();
    gnu_policy_process_required (&amp;argc, argv, sync_options);

    sync ();
    exit (0);
}

/* ------------------------------------------------------------------ */

... Long copyright, if any, goes here.  AFAICT _moving_ the copyright
    material does NOT violate the GPL.

/* ------------------------------------------------------------------ */


[1] *No* description, theory of operation, etc. goes here.  Nor in the
    end material.  Toplevel description in help string, lower level
    algorithms etc in comments to functions implementing them.
[2] There's gotta be a better way than a preprocessor conditional to
    prevent inclusion of (possibly very long) help strings.
    Distribution of binaries created with __GNU_POLITICALLY_CORRECT__
    undefined would violate GPL; there should be a minimal version to
    satisfy GPL.
    Actually, this struct should be in some standard format (there's an
    options processing library) for autogenerating usage and help.
[3] Use RCS key to tweak RMS.
[4] The usage string is cryptic because libgnuoptions will fill in name
    (from argv[0]) and the list of required documentation options.
    But see [2].
[5] Actually this is a fallback.  Should be autogenerated (see [2]).
[6] gnu_policy_process_required is a macro defined in gnu_policy.h,
    defined to nothing if __GNU_POLITICALLY_CORRECT__ is not defined.
    When it produces output, it automatically prefixes the copyright
    string.
    Requires linking to libgnupoliticallycorrect.a.
    gnu_policy_initialize_locale is similar, with the obvious
    function.

In order for this to make sense as generic policy, there would have to
be helper functions to accomplish locale setup and options processing
more flexibly.  But for most small utilities, the above should be
enough.  Binaries would be a lot smaller since a lot of I18N
boilerplate would end up in the libraries.

Other options might be included; eg, --man might try to exec man,
--info to exec info, etc.  But instead I think that there ought to be
a GNU_DOC_PRIORITY environment variable, naming different kinds of
documentation browsers, and the library would try to invoke info, man,
a web browser, whatever, trying different help browsers in order of
the env variable.  If that didn't exist or was empty or didn't make
parse, the default would probably be info, man, fallback string.

The library would have to check whether stdout was a tty, and if not
use the fallback string for help, of course.  (So as not to screw up
zsh, eg.)

Two other options that might be appropriate would be --about and
--license.  Both of these would look for appropriate files installed
in a standard place.  But all of this would be handled in
libgnupoliticallycorrect.a.

    &gt;&gt; Still, sync is an extreme case.  Programs should be
    &gt;&gt; self-documenting.  (And not by reading source, either.)

    Simon&gt; Self-documenting without reading the source? Hmm, are you
    Simon&gt; advocating literate programming, or something like POD or
    Simon&gt; Javadoc?

What I meant by "self-documenting" was to the _user_.  So I guess I'm
talking about POD.  Self-documenting to programmers without reading
the source is an oxymoron.

I think literate programming is a good idea, yes.  Damn shame there's
only one programmer in the world who can _write_, and he's too busy
fingering his organ to finish ACP.  :-)

    Simon&gt; Look. I connect to Cable and Wireless. It doesn't get
    Simon&gt; *much* worse.

No, it doesn't.  I shouldn't tease you.

-- 
University of Tsukuba                Tennodai 1-1-1 Tsukuba 305-8573 JAPAN
Institute of Policy and Planning Sciences       Tel/fax: +81 (298) 53-5091
_________________  _________________  _________________  _________________
What are those straight lines for?  "XEmacs rules."

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00048" HREF="msg00048.html">RE: GNU-Linux vs Linux naming [was RE: LAM/MPI Parallel processing]</A></STRONG>
<UL><LI><EM>From:</EM> "Jonathan Shore" &lt;jshore@example.com&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00050" HREF="msg00050.html">Re: GNU-Linux vs Linux naming [was RE: LAM/MPI Parallel processing]</A></STRONG>
<UL><LI><EM>From:</EM> SL Baur &lt;steve@example.com&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00072" HREF="msg00072.html">Re: GNU-Linux vs Linux naming [was RE: LAM/MPI Parallel processing]</A></STRONG>
<UL><LI><EM>From:</EM> Simon Cozens &lt;simon@example.com&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00102" HREF="msg00102.html">Re: GNU-Linux vs Linux naming [was RE: LAM/MPI Parallel processing]</A></STRONG>
<UL><LI><EM>From:</EM> SL Baur &lt;steve@example.com&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00104" HREF="msg00104.html">Re: GNU-Linux vs Linux naming [was RE: LAM/MPI Parallel processing]</A></STRONG>
<UL><LI><EM>From:</EM> "Stephen J. Turnbull" &lt;turnbull@example.com&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00124" HREF="msg00124.html">Re: GNU-Linux vs Linux naming [was RE: LAM/MPI Parallel processing]</A></STRONG>
<UL><LI><EM>From:</EM> Simon Cozens &lt;simon@example.com&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00125" HREF="msg00125.html">Re: GNU-Linux vs Linux naming [was RE: LAM/MPI Parallel processing]</A></STRONG>
<UL><LI><EM>From:</EM> "Stephen J. Turnbull" &lt;turnbull@example.com&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00126" HREF="msg00126.html">Re: GNU-Linux vs Linux naming [was RE: LAM/MPI Parallel processing]</A></STRONG>
<UL><LI><EM>From:</EM> Simon Cozens &lt;simon@example.com&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00129.html">Re: [shimpei@example.com: web maintenance tool for Linux]</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00131.html">Re: help needed with emacs. mule, euc-japan</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00126.html">Re: GNU-Linux vs Linux naming [was RE: LAM/MPI Parallel processing]</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00096.html">Re: GNU-Linux vs Linux naming [was RE: LAM/MPI Parallel processing]</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="maillist.html#00130"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00130"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
