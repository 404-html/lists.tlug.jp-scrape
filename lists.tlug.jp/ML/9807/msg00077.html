<!-- MHonArc v2.2.0 -->
<!--X-Subject: Re: tlug: bt848 -->
<!--X-From: "J. David Beutel" <jdb@example.com> -->
<!--X-Date:  Tue, 7 Jul 1998 01:13:15 +0900 -->
<!--X-Message-Id: Pine.LNX.3.95.980707042518.154A&#45;200000@example.com -->
<!--X-ContentType: multipart/mixed -->
<!--X-Reference-Id: 19980706115259C.atomita@example.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Schweizer - webmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<!--X-Body-Begin-->
<!--X-User-Header-->
<P>
<font color="blue">
Support open source code!
</font>
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00076.html">Date Prev</A>][<A HREF="msg00078.html">Date Next</A>][<A HREF="msg00072.html">Thread Prev</A>][<A HREF="msg00078.html">Thread Next</A>][<A HREF="maillist.html#00077">Date Index</A>][<A HREF="threads.html#00077">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: tlug: bt848</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong><A HREF="mailto:tlug@example.com">tlug@example.com</A></strong></LI>
<LI><strong>Subject</strong>: <strong>Re: tlug: bt848</strong></LI>
<LI><strong>From</strong>: <strong>"J. David Beutel" &lt;<A HREF="mailto:jdb@example.com">jdb@example.com</A>&gt;</strong></LI>
<LI>Date: Tue, 7 Jul 1998 05:12:29 +0000 (GMT)</LI>
<LI>Content-Type: MULTIPART/MIXED; BOUNDARY="8323328-1592060460-899788349=:283"</LI>
<LI>In-Reply-To: &lt;<A HREF="msg00071.html">19980706115259C.atomita@example.com</A>&gt;</LI>
<LI>Reply-To: <A HREF="mailto:tlug@example.com">tlug@example.com</A></LI>
<LI>Sender: <A HREF="mailto:owner-tlug@example.com">owner-tlug@example.com</A></LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
On Mon, 6 Jul 1998, A.Tomita wrote:

&gt; By any chance, does anybody know where I can find this
&gt; Hauppauge bt848 board here in Japan (Akihabara?), and its
&gt; price?

I saw one with a Japanese tuner in a big T-Zone in Akihabara
Saturday (4th floor?).  I think it was around JPY 23,000.
I don't know what chip it had.

I bought an IO Data board, the GV-VCP/PCI.  It has no tuner,
just 2 composite and 1 S-video in, and 2 chips:  a Bt848KPF,
and a little Epson 28.6363C (the clock).  Really, that's all;
a few resistors and capacitors, and two chips.  It's pretty.
JPY 13,000.  Less to go wrong.

Warning:  problems and details follow...

It works in Japanese Win95, but the standard size seems to be 320x240.
The drivers and manual are in Japanese, so it's difficult for me.
I can't find any rating, but I think that most of the similar cards
could do 320x240 at 30fps.  On the other hand, NTSC is 700x525
at 30fps?  (262 lines interlaced at 60fps and 4:3 aspect ratio?
Or, does the vertical and horizontal blanks cut it down to 640x480?)
I hope to get about that performance writing directly to my display
board, but with a "double-size" overlay of 640x480 it looks like 15fps
and there are bad motion effects with the interlace.  I don't want
to watch TV at 320x240.

Soooo, hoping it's just a software limitation, I turn to Linux,
which is all I really want to use anyway.  But, I haven't quite
gotten it working yet.  The xtvscreen program displays grey lines
across the whole width of my monitor, in the vertical area where
the TV screen is, when I start capture (overlay).  It clears up
when I stop capture.

The xawtv program does a little better, keeping inside its own window,
but it's not getting the right source, and the source is *very* slow.
I'm inputting composite from a Japanese VCR.  If it's in video-1, I can
see it on "tuner" (but there is no tuner).  If it's in video-2, I can
see it on "video-1".  And, the screen (just 320x240) is split up into
about 8 rows that draw in parallel, like I'm getting 0.1fps.  (Is this
the temporal decimation feature?)  In xawtv, it's the same whether I
choose "ntsc-bcast-jp", "ntsc-cable-jp", or the other "ntsc"s.
Sometimes, after using xawtv for a few seconds, my keyboard and mouse
lock up, altho the TV screen keeps going (so I have to reset).

Does anyone have any hints or ideas about where the problems are?
Decoding the video?  Transferring to the display board?  No DMA?  I
noticed that BTTV uses PCI definitions for 2 ATI display boards, but
mine (PCI_DEVICE_ID_ATI_215CT222) is not one of them.  Is BTTV using the
XFree86 direct draw stuff instead?  Or, is that up to the TV
application?  /proc/pci reports an IRQ 255 for my display board--that's
bogus, right?  What area should I troubleshoot?

Or, has anyone used any of my same setup before?  Japanese NTSC
composite video?  ATI Mach64 215CT222?  IO Data GV-VCP/PCI?

I got the latest BTTV (0.5.13), the latest regular kernel (2.0.34),
the latest regular Lesstif (0.80), and the latest xawtv (2.15).
I'm using XFree86 3.2 (not 3.2A unfortunately) in 24 bit mode 800x600
and an ATI Mach64 PCI board with 2MB.  I've tried xawtv with the BTTV
version that came with it (modified 0.5.8) and the latest (0.5.13).
I've also tried compiling BTTV with and without -DUSE_PLL.  I added
the Mach64 address to the bttv module install at xawtv's suggestion,
since bttv didn't seem to find it automatically.  I'm running the apps
as root.  I've tried it with and without the tuner and msp3400 modules.

Please see the attached configuration note for more details.

Thanks in advance.

--
David Beutel    Unmon said: "I do not ask you about fifteen days ago.  But
jdb@example.com   what about fifteen days hence?  Come, say a word about this!"
11011011         Since none of the monks answered, he answered for them:
                                "Every day is a good day."
</PRE>
<PRE>
My configuration:

insmod videodev
insmod i2c verbose=1 scan=1 i2c_debug=0
insmod tuner debug=0 type=4
insmod msp3400
insmod bttv radio=1 vidmem=0xe00

bttv               7		0
msp3400            2		0
tuner              1		0
i2c                1	[bttv msp3400 tuner]	3
videodev           1	[bttv]	3
slip               2		0

eserved, 1300k data)
Swansea University Computer Society NET3.035 for Linux 2.0
NET3: Unix domain sockets 0.13 for Linux NET3.035.
Swansea University Computer Society TCP/IP for NET3.034
IP Protocols: IGMP, ICMP, UDP, TCP, IPIP
Checking 386/387 coupling... Ok, fpu using exception 16 error reporting.
Checking 'hlt' instruction... Ok.
Intel Pentium with F0 0F bug - workaround enabled.
alias mapping IDT readonly ...  ... done
Linux version 2.0.34 (root@example.com) (gcc version 2.7.2) #1 Mon Jul 6 06:03:23 GMT 1998
Starting kswapd v 1.4.2.2 
Serial driver version 4.13 with no serial options enabled
tty00 at 0x03f8 (irq = 4) is a 16550A
tty01 at 0x02f8 (irq = 3) is a 16550A
tty02 at 0x03e8 (irq = 4) is a 16550A
tty03 at 0x02e8 (irq = 3) is a 16550A
lp1 at 0x0378, (polling)
APM BIOS version 1.2 Flags 0x07 (Driver version 1.2)
    Entry f000:803e cseg16 f000 dseg fdfc cseg len eff5, dseg len 0
    Connection version 1.1
    AC on line, battery status unknown, battery life unknown
    battery flag 0x80, battery life 0 seconds
Real Time Clock Driver v1.09
loop: registered device at major 7
ide: i82371 PIIX (Triton) on PCI bus 0 function 57
    ide0: BM-DMA at 0x9000-0x9007
    ide1: BM-DMA at 0x9008-0x900f
hda: Maxtor 71084 A, 1036MB w/64kB Cache, CHS=2105/16/63, DMA
hdb: NEC Corporation DSE2010A, 1919MB w/66kB Cache, CHS=3900/16/63
hdc: FX400E, ATAPI CDROM drive
ide2: ports already in use, skipping probe
ide0 at 0x1f0-0x1f7,0x3f6 on irq 14
ide1 at 0x170-0x177,0x376 on irq 15
Floppy drive(s): fd0 is 1.44M
FDC 0 is an 8272A
aha152x: BIOS test: passed, auto configuration: ok, detected 1 controller(s)
aha152x0: vital data: PORTBASE=0x340, IRQ=11, SCSI ID=7, reconnect=enabled, parity=enabled, synchronous=disabled, delay=100, extended translation=disabled
aha152x: trying software interrupt, ok.
scsi0 : Adaptec 152x SCSI driver; $Revision: 1.18 $
scsi : 1 host.
scsi : detected total.
tunnel: version v0.2b2
PPP: version 2.2.0 (dynamic channel allocation)
TCP compression code copyright 1989 Regents of the University of California
PPP Dynamic channel allocation code copyright 1995 Caldera, Inc.
PPP line discipline registered.
Partition check:
 hda: hda1 hda2 hda3 hda4
 hdb: hdb1 hdb2 hdb3 hdb4 &lt; hdb5 hdb6 &gt;
VFS: Mounted root (ext2 filesystem) readonly.
Adding Swap: 102780k swap-space (priority 2120)
Adding Swap: 66020k swap-space (priority 2120)
hdc: media changed
hdc : tray open or drive not ready
hdc : tray open or drive not ready
hdc : tray open or drive not ready
VFS: Disk change detected on device 16:00
hdc : tray open or drive not ready
hdc : tray open
end_request: I/O error, dev 16:00, sector 64
isofs_read_super: bread failed, dev 16:00 iso_blknum 16 block 32
SLIP: version 0.8.4-NET3.019-NEWTTY-MODULAR (dynamic channels, max=256).
hdc : tray open or drive not ready
hdc : tray open or drive not ready
hdc : tray open or drive not ready
VFS: Disk change detected on device 16:00
hdc : tray open or drive not ready
hdc : tray open
end_request: I/O error, dev 16:00, sector 64
isofs_read_super: bread failed, dev 16:00 iso_blknum 16 block 32
hdc : tray open or drive not ready
hdc : tray open or drive not ready
hdc : tray open or drive not ready
VFS: Disk change detected on device 16:00
hdc : tray open or drive not ready
hdc : tray open
end_request: I/O error, dev 16:00, sector 64
isofs_read_super: bread failed, dev 16:00 iso_blknum 16 block 32
Unable to identify CD-ROM format.
Unable to identify CD-ROM format.
registered device ppp0
Linux video capture interface: v0.01 ALPHA
i2c: initialized (i2c bus scan enabled)
i2c: driver registered: tuner
i2c: driver registered: msp3400
bttv0: Brooktree Bt848 (rev 18) bus: 0, devfn: 72, irq: 10, memory: 0xe1000000.
bttv0: internal PLL, single crystal operation enabled
bttv: 1 Bt848 card(s) found.
bttv0: model: MIRO
i2c: bus registered: bt848-0

PCI devices found:
  Bus  0, device  11, function  0:
    VGA compatible controller: ATI 215CT222 (rev 10).
      Medium devsel.  Fast back-to-back capable.  IRQ 255.  
      Non-prefetchable 32 bit memory at 0xe0000000.
      I/O at 0x6100.
  Bus  0, device   9, function  0:
    Multimedia video controller: Brooktree Bt848 (rev 18).
      Medium devsel.  Fast back-to-back capable.  IRQ 10.  Master Capable.  Latency=32.  Min Gnt=16.Max Lat=40.
      Prefetchable 32 bit memory at 0xe1000000.
  Bus  0, device   7, function  1:
    IDE interface: Intel 82371SB PIIX3 IDE (rev 0).
      Medium devsel.  Fast back-to-back capable.  Master Capable.  Latency=32.  
      I/O at 0x9000.
  Bus  0, device   7, function  0:
    ISA bridge: Intel 82371SB PIIX3 ISA (rev 1).
      Medium devsel.  Fast back-to-back capable.  Master Capable.  No bursts.  
  Bus  0, device   0, function  0:
    Host bridge: Intel 82437VX Triton II (rev 2).
      Medium devsel.  Master Capable.  Latency=32.  

 0:     175812   timer
 1:       4783   keyboard
 2:          0   cascade
 3:       5978 + serial
 4:       4289 + serial
 8:          0 + rtc
10:       5366 + bttv
11:         15 + aha152x
13:          1   math error
14:      80660 + ide0
15:         92 + ide1


XFree86 Version 3.2 / X Window System
(protocol Version 11, revision 0, vendor release 6100)
Release Date: Oct 26 1996
	If the server is older than 6-12 months, or if your card is newer
	than the above date, look for a newer version before reporting
	problems.  (see <A TARGET="_top" HREF="http://www.XFree86.Org/FAQ">http://www.XFree86.Org/FAQ</A>)
Operating System: Linux [ELF] 
Configured drivers:
  Mach64: accelerated server for ATI Mach64 graphics adaptors (Patchlevel 0)
(using VT number 7)

XF86Config: /usr/X11R6/lib/X11/XF86Config
(**) stands for supplied, (--) stands for probed/default values
(**) Mouse: type: MouseSystems, device: /dev/gpmdata, baudrate: 1200,
       3 button emulation (timeout: 50ms)
(**) Mach64: Graphics device ID: "ATI 215CT222"
(**) Mach64: Monitor ID: "Generic Monitor"
(**) FontPath set to "tcp/localhost:7100"
(--) Mach64: PCI: Mach64 CT rev 10, Aperture @ 0xe0000000, Block I/O @ 0x6100
(--) Mach64: card type: PCI
(--) Mach64: Memory type: 1
(--) Mach64: Clock type: Internal
(--) Mach64: Maximum allowed dot-clock: 80.000 MHz
(--) Mach64: Clock for mode "1024x768" is too high for the configured hardware.
	Limit is  80.000 MHz
(--) Mach64: Removing mode "1024x768" from list of valid modes.
(**) Mach64: Mode "800x600": mode clock =  50.000
(**) Mach64: Mode "640x480": mode clock =  31.500
(--) Mach64: Virtual resolution: 800x600
(**) Mach64: videoram: 2048k
(--) Mach64: Using hardware cursor
(--) Mach64: Using 8 MB aperture @ 0xe0000000
(--) Mach64: Ramdac is Internal
(--) Mach64: Pixmap cache: 0 256x256 slots, 0 128x128 slots, 0 64x64 slots
(--) Mach64: Font cache: 0 fonts
PEX extension module not loaded
XIE extension module not loaded
Warning: /dev/gpmdata unable to get status of mouse fd (Invalid argument)
</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00078" HREF="msg00078.html">Re: tlug: bt848</A></STRONG>
<UL><LI><EM>From:</EM> Marcus Metzler &lt;mocm@example.com&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00071" HREF="msg00071.html">tlug: bt848</A></STRONG>
<UL><LI><EM>From:</EM> "A.Tomita" &lt;atomita@example.com&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00076.html">Re: tlug: RH Sparc 5.1 Trials</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00078.html">Re: tlug: bt848</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00072.html">tlug: bt848</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00078.html">Re: tlug: bt848</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="maillist.html#00077"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00077"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
