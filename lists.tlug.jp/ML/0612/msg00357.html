<!-- MHonArc v2.6.10 -->
<!--X-Subject: [tlug] DNS [was: dhcp.conf] -->
<!--X-From-R13: "Egrcura X. Fheaohyy" <fgrcuraNkrznpf.bet> -->
<!--X-Date: Wed, 20 Dec 2006 23:32:54 +0900 -->
<!--X-Message-Id: 87tzzqpr2s.fsf@example.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 1166604193.4594.59.camel@example.com&#45;224.rosenet.ne.jp -->
<!--X-Reference: 20061220100306.GB8775@example.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00356.html">Date Prev</a>][<a href="msg00358.html">Date Next</a>][<a href="msg00360.html">Thread Prev</a>][<a href="msg00377.html">Thread Next</a>][<a href="maillist.html#00357">Date Index</a>][<a href="threads.html#00357">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[tlug] DNS [was: dhcp.conf]</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Wed, 20 Dec 2006 23:41:47 +0900</li>
<li><strong>From</strong>: <strong>&quot;Stephen J. Turnbull&quot; &lt;<a href="mailto:stephen@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20DNS%20%5Bwas:%20dhcp.conf%5D">stephen@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>[tlug] DNS [was: dhcp.conf]</strong></li>
<li>References: &lt;<a href="msg00343.html">1166604193.4594.59.camel@example.com</a>&gt;	&lt;<a href="msg00348.html">20061220100306.GB8775@example.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>*sigh*  As long as we're opening up worm cans ....  More archival spew.

Scott Robbins writes:

 &gt; &gt; # Sample dhcpd.conf
 &gt; &gt; 
 &gt; &gt; # option definitions common to all supported networks...
 &gt; &gt; #option domain-name &quot;linuxhelp.ca&quot;;
 &gt; &gt; ??I don't have a domain on this box so no need I think
 &gt; 
 &gt; In general, those who set up a DHCP server would probably use one, even
 &gt; if it's just used locally, that is, on your internal LAN (Local Area
 &gt; Network.)

I don't know if it's actually required, but if you've got as few as
three or four hosts it's definitely convenient to be able to run a
nameserver just for the mnemonic of using host names rather than IP
addresses.  There are some services that require a nameserver, as
well.  In that case you'll want to be able to distinguish inside from
outside, and that means you need a domain name.

 &gt; &gt; 
 &gt; &gt; # Your name servers. You can normally find these in 
 &gt; &gt; # your /etc/resolv.conf file. These will be distributed to all DHCP 
 &gt; &gt; # clients.
 &gt; &gt; option domain-name-servers 10.1.1.1, 65.39.196.215, 65.39.192.130;
 &gt; &gt; 
 &gt; &gt; ?? what is 10.1.1.1????  I have two entries 210.230.70.2
 &gt; &gt; 210.230.70.3 plus a name &quot;rosenet.ne.jp&quot;

Be precise.  Presumably you're talking about resolv.conf, but that's
not obvious.  And for something that short you should give the whole
file, like:

/etc/resolve.conf:
domain sk.tsukuba.ac.jp
# Generated by dhcpcd for interface eth0
nameserver 130.158.97.253
nameserver 130.158.68.21

&lt;ahem&gt; There's a third keyword, &quot;search&quot;, which takes a list of
domains (whitespace-separated).  Presumably you have a &quot;domain&quot; entry,
not a &quot;search&quot; entry.  They behave differently (see below).

Now, there are several different types of Internet addresses.  First,
there are the usual public addresses such as 130.158.97.253, nominally
divided into three size classes (the size is the number of addresses
in the network block) according to the leading bits.  There are
network addresses ending in &quot;0&quot;, such as 130.158.97.0 which have no
meaning as host addresses, but are used to &quot;name&quot; networks.  There are
broadcast addresses ending in all 1 bits, such as 130.158.98.255,
which are used to send a single message to all hosts on the
corresponding network.  There are &quot;multicast&quot; addresses starting with
224 IIRC, which are used to send a single message to a defined group
of hosts on the Internet.

Finally, there are private networks (which overlap with the functional
definitions above).  There is the localhost set of addresses beginning
with 127 (I'm not sure what anything except 127.0.0.1 is used for, but
all 16 million of those addresses are reserved).  Then there are the
nontrivial private networks: 256 networks of the form 168.192.x.0, 16
networks of the form 172.x.0.0, and one network of the form 10.0.0.0.
The corresponding broadcast address is 10.255.255.255, ie, you can put
up to 16 million hosts on that network.

What does it mean to have a &quot;private&quot; network?  Simply that these
addresses will never be assigned to a host visible on the public
Internet.  You will never (if everybody follows the rules) type &quot;host
www.yaseppochi-gumi.net&quot; and get an address of the form 10.1.1.1
(unless you're connected to Skinny Boy Associates' internal net).  A
properly configured Internet router will never forward a packet to an
address of the form 10.1.1.1.  By the same token, you can discard all
packets from 10.1.1.1 that come from the Internet at the firewall,
since there's no legitimate way to reply to one.  From the point of
view of the Internet, the address 10.1.1.1 doesn't exist!  (These
rules are defined in RFC 1918.)

What this means is that if you have a LAN with several hosts on it,
but you do not have permanently allocated addresses for all of them,
you can still use Internet technology such as routers, gateways, and
DNS as long as you use the private network space.  Of course you have
to keep track of which numbers you use (nontrivial for large private
networks!), but you don't have to worry about collisions (unless you
get merged with another entity with a private network, and need to
merge the networks, too).  You can also use these for VPNs spread
across the Internet.

So it is very common to see people with a single public address
supporting a network of a couple of dozen machines.  The gateway
machine gets the public address on one interface (eg ppp0 in the bad
old days) and a private address on others (often 168.192.0.1 on eth0);
the other machines on the LAN also get 168.192.0.x addresses with x in
the range 2-254.

Evidently the example dhcpd.conf (which has assigned Internet
addresses; you can look them up with host) is for such a network, but
it uses the 10.0.0.0 network internally.  Then 10.1.1.1 is the
internal nameserver; the 65.x.y.z addresses are external nameservers.

 &gt; This would have been a sample to show syntax.

I think probably the example is real. ;-)

 &gt; &gt; ??does rosenet.ne.jp translate into a number somehow using a
 &gt; &gt; command like host or um forgot the other reverse lookup

Go ahead, try &quot;host rosenet.ne.jp&quot;.  You won't hurt anything. :-)
Even if you don't understand the reply, you may discover a useful
question.  (The other command you're thinking of may be &quot;whois&quot;.)

However, in general the answer is &quot;No&quot;.  It might translate to a host,
or to a network, but it need not, since a large domain is likely to be
spread across several networks.  So what is &quot;rosenet.ne.jp&quot;?  Consider
the telephone system.  If you want to call me, you might start by
calling 104 (the &quot;root server&quot;; you just have to know that number, and
the same is true on the Internet).  They'll tell you the number of
Tsukuba U., which you call.  The university operator tells you my
number, which in my case will be the same city code/prefix
(029-853-xxxx) as the operator, but need not be (Tsukuba U. has a
branch campus in Tokyo, which obviously will be an 03 city code).

Similarly, to find the name server for .jp, you contact the well-known
root server.  Then you ask .jp for a nameserver for .ne.jp, that
nameserver for .rosenet.ne.jp's nameserver, and finally rosenet's NS
for the address of www.rosenet.ne.jp.

The use in resolv.conf is somewhat different, however.  The process of
resolving a fully-qualified domain name (ie, one corresponding to a
host) is transparent to user software.  In fact, you ask a local
nameserver for help, and it does the legwork of climbing the tree to
the root [sic] and back down to the branch you want to go to.  You
just say &quot;host www.rosenet.ne.jp&quot;, and the DNS answers
&quot;www.rosenet.ne.jp has address 61.213.205.54&quot;.  So what is the domain
in resolv.conf for?

It allows abbreviation, that's all.  If you say &quot;host www&quot; and your
resolv.conf has &quot;rosenet.ne.jp&quot; in it, then the DNS will first try to
find a host named &quot;just plain&quot; &quot;www&quot; on the Internet, and fail.  If
that fails, it will try &quot;www.rosenet.ne.jp&quot;, then &quot;www.ne.jp&quot;, and
finally &quot;www.jp&quot; before giving up.  (You can short-circuit the search
process by ending the domain name with a period, eg, &quot;host www.&quot;.)
The &quot;search&quot; keyword specifies a path exactly; the members of the path
are not decomposed and searched piecewise.  Ie if resolv.conf contains

search rosenet.ne.jp

then &quot;host www&quot; tries &quot;www.&quot; and &quot;www.rosenet.ne.jp.&quot; then gives up.
To get the effect of the domain keyword, you need

search rosenet.ne.jp ne.jp jp

(NB, I was lazy and the description above is not quite correct; see
the man page for resolv.conf for details.)


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00377" href="msg00377.html">RE: [tlug] DNS [was: dhcp.conf]</a></strong>
<ul><li><em>From:</em> Jim BLACKSON</li></ul></li>
<li><strong><a name="00378" href="msg00378.html">Re: [tlug] DNS [was: dhcp.conf]</a></strong>
<ul><li><em>From:</em> Godwin Stewart</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00343" href="msg00343.html">[tlug] dhcp.conf</a></strong>
<ul><li><em>From:</em> Shawn</li></ul></li>
<li><strong><a name="00348" href="msg00348.html">Re: [tlug] dhcp.conf</a></strong>
<ul><li><em>From:</em> Scott Robbins</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00356.html">Re: [tlug] dhcp.conf</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00358.html">Re: [tlug] dhcp.conf</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00360.html">Re: [tlug] dhcp.conf</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00377.html">RE: [tlug] DNS [was: dhcp.conf]</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00357"><strong>Date</strong></a></li>
<li><a href="threads.html#00357"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
