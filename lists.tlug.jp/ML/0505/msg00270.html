<!-- MHonArc v2.5.2 -->
<!--X-Subject: Re: [tlug] OT&#45;Japanese in PHP -->
<!--X-From-R13: [nex Enetrag <cbjqrexrtNfabj.rznvy.ar.wc> -->
<!--X-Date: Thu, 26 May 2005 14:13:23 +0900 -->
<!--X-Message-Id: 42955AF3.8080508@example.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 42940FBF.1070207@example.com -->
<!--X-Reference: 42942AF7.60101@example.com -->
<!--X-Reference: 429437F5.7080300@example.com -->
<!--X-Reference: 20050525.175305.243293414.dave@?om -->
<!--X-Reference: 42943EC5.8010203@example.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00269.html">Date Prev</a>][<a href="msg00271.html">Date Next</a>][<a href="msg00259.html">Thread Prev</a>][<a href="msg00271.html">Thread Next</a>][<a href="maillist.html#00270">Date Index</a>][<a href="threads.html#00270">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] OT-Japanese in PHP</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Thu, 26 May 2005 14:13:23 +0900</li>
<li><strong>From</strong>: <strong>Mark Sargent &lt;<A HREF="mailto:powderkeg@DOMAIN.HIDDEN?SUBJECT=Re%3A%20%5Btlug%5D%20OT-Japanese%20in%20PHP">powderkeg@example.com</A>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] OT-Japanese in PHP</strong></li>
<li>References: &lt;<a href="msg00248.html">42940FBF.1070207@example.com</a>&gt;	&lt;<a href="msg00252.html">42942AF7.60101@example.com</a>&gt;	&lt;<a href="msg00254.html">429437F5.7080300@example.com</a>&gt; &lt;<a href="msg00258.html">20050525.175305.243293414.dave@?om</a>&gt; &lt;<a href="msg00259.html">42943EC5.8010203@example.com</a>&gt;</li>
<li>Organization: Home</li>
<li>User-agent: Mozilla Thunderbird 0.9 (X11/20041127)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Erin D. Hughes via info@example.com wrote:

&gt; David E wrote:
&gt;
&gt;&gt; From: Mark Sargent &lt;powderkeg@example.com&gt; on Date: Wed, 25 May 
&gt;&gt; 2005 17:31:49 +0900
&gt;&gt;
&gt;&gt;
&gt;&gt;&gt; Erin D. Hughes via info@example.com wrote:
&gt;&gt;&gt;
&gt;&gt;&gt;
&gt;&gt;&gt;&gt; Mark Sargent wrote:
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Hi All,
&gt;&gt;&gt;&gt;&gt; output_handler = mb_output_handler
&gt;&gt;&gt;&gt;&gt; mbstring.language = Japanese
&gt;&gt;&gt;&gt;&gt; mbstring.internal_encoding = UTF-8
&gt;&gt;&gt;&gt;&gt; mbstring.http_input = auto
&gt;&gt;&gt;&gt;&gt; mbstring.http_output = SJIS
&gt;&gt;&gt;&gt;&gt; mbstring.encoding_translation = On
&gt;&gt;&gt;&gt;&gt; mbstring.detect_order = auto
&gt;&gt;&gt;&gt;&gt; mbstring.substitute_character = none
&gt;&gt;&gt;&gt;&gt; mbstring.internal_encoding = EUC-JP
&gt;&gt;&gt;&gt;&gt;
&gt;&gt;&gt;&gt;&gt; Now, I think I still haven't got the page that requires J, 
&gt;&gt;&gt;&gt;&gt; displayed right, yet. Full code is below. Can anyone see any 
&gt;&gt;&gt;&gt;&gt; mistakes..? Cheers.
&gt;&gt;&gt;&gt;
&gt;&gt;
&gt;&gt;
&gt;&gt; You haven't given any details on what seems wrong with the output.
&gt;&gt; This is kind of obvious, but have you made sure the text in the
&gt;&gt; database is in the sme encoding as you have mbstring.internal_encoding
&gt;&gt; set to? (You have it set twice, to different values in your config
&gt;&gt; above - I assume the last one set gets used, but safer to just make up
&gt;&gt; your mind, don't you think?)
&gt;&gt;
&gt;&gt; Dave
&gt;&gt;
&gt; Dave I agree that is another valid point.
&gt;
&gt; I think he should first rule out the other problems though
&gt;
&gt; A. Make a test page with some Japanese text in HTML and test. IS that 
&gt; OK? If yes go to B
&gt;
&gt; B. Make a test page in PHP with the same text and test. IS that OK? If 
&gt; yes go to C.
&gt;
&gt; C. Make a test PHP page that pulls data from the DB. And in 3 separate 
&gt; lines with each line (data in the db encoded differently IE UTF-8, 
&gt; Shift-jis and EUC) and see what comes out right.
&gt;
&gt; Also it is important to check the co-location in your DB if your using 
&gt; MYSQL 4.XXXXXXXXXX there are very specific settings that I have had a 
&gt; lot of trouble with my self in the past..... But that is another issue 
&gt; I am sure.
&gt;
&gt; E./
&gt;
&gt;
Test A:
Hondaは、スポーティで安心感のある走りに加え、上質な内外装、高い安全性能 
により好評を得ているアコードシリーズ（アコード／アコードワゴン）を改良 
し、本日より全国のホンダクリオ店から発売する。

　アコードでは、充実した装備の24TLにエアロパーツや17インチアルミホイー 
ル、スポーツサスペンションを装備した「スポーツパッケージ」を、アコードワ 
ゴンでは、2.0Lエンジンを搭載したベーシックなタイプ「20A」を、それぞれ新 
たに設定。お客様の幅広い要望に応えられるタイプ設定とした。
　また今回、アコード20A、20ELのFF車と、アコードワゴン20A、24EのFF車は 
「平成17年排出ガス基準75％低減レベル（★★★★低排出ガス車）」認定を新たに取 
得し、高い環境性能を実現するとともにグリーン税制の適用対象を拡大した。


Result Test A(Comes out as coded in UTF-8)
Honda縺ｯ縲√せ繝昴・繝・ぅ縺ｧ螳牙ｿ・─縺ｮ縺ゅｋ襍ｰ繧翫↓蜉 縺医∽ｸ願ｳｪ縺ｪ 
蜀・､冶｣・・ｫ倥＞螳牙・諤ｧ閭ｽ縺ｫ繧医ｊ螂ｽ隧輔ｒ蠕励※縺・ｋ繧｢繧ｳ繝ｼ繝峨 
す繝ｪ繝ｼ繧ｺ・医い繧ｳ繝ｼ繝会ｼ上い繧ｳ繝ｼ繝峨Ρ繧ｴ繝ｳ・峨ｒ謾ｹ濶ｯ縺励∵悽譌･ 
繧医ｊ蜈ｨ蝗ｽ縺ｮ繝帙Φ繝繧ｯ繝ｪ繧ｪ蠎励°繧臥匱螢ｲ縺吶ｋ縲・縲繧｢繧ｳ繝ｼ繝峨〒 
縺ｯ縲∝・螳溘＠縺溯｣・ｙ縺ｮ24TL縺ｫ繧ｨ繧｢繝ｭ繝代・繝・ｄ17繧､繝ｳ繝√い繝ｫ繝 
溘・繧､繝ｼ繝ｫ縲√せ繝昴・繝・し繧ｹ繝壹Φ繧ｷ繝ｧ繝ｳ繧定｣・ｙ縺励◆縲後せ繝 
昴・繝・ヱ繝・こ繝ｼ繧ｸ縲阪ｒ縲√い繧ｳ繝ｼ繝峨Ρ繧ｴ繝ｳ縺ｧ縺ｯ縲・.0L繧ｨ繝ｳ繧ｸ 
繝ｳ繧呈政霈峨＠縺溘・繝ｼ繧ｷ繝・け縺ｪ繧ｿ繧､繝励・0A縲阪ｒ縲√◎繧後◇繧梧眠 
縺溘↓險ｭ螳壹ゅ♀螳｢讒倥・蟷・ｺ・＞隕∵悍縺ｫ蠢懊∴繧峨ｌ繧九ち繧､繝苓ｨｭ螳壹→ 
縺励◆縲・縲縺ｾ縺滉ｻ雁屓縲√い繧ｳ繝ｼ繝・0A縲・0EL縺ｮFF霆翫→縲√い繧ｳ繝ｼ繝峨 
Ρ繧ｴ繝ｳ20A縲・4E縺ｮFF霆翫・縲悟ｹｳ謌・7蟷ｴ謗貞・繧ｬ繧ｹ蝓ｺ貅・5・・ｽ取ｸ帙Ξ 
繝吶Ν・遺・笘・・笘・ｽ取賜蜃ｺ繧ｬ繧ｹ霆奇ｼ峨崎ｪ榊ｮ壹ｒ譁ｰ縺溘↓蜿門ｾ励＠ 
縲・ｫ倥＞迺ｰ蠅・ｧ閭ｽ繧貞ｮ溽樟縺吶ｋ縺ｨ縺ｨ繧ゅ↓繧ｰ繝ｪ繝ｼ繝ｳ遞主宛縺ｮ驕ｩ 
逕ｨ蟇ｾ雎｡繧呈僑螟ｧ縺励◆縲・

Now, I realized, after an email from Dave E that I had 
internal.encoding as UTF-8 although the database encoding is SJIS. I 
just wasn't fully understanding what all the settings were doing. I've 
now changed the internal to SJIS, double checked that the page is set 
for SJIS also, but, the page only displays if I either change it in the 
browser to UTF-8 or set the page to that(Test A page, that is). I've 
added below my settings. The original page, that displays the database 
content, which is set to Shift_JIS also still doesn't display, at all. 
Thoughts..? Cheers.

EDIT: I went and copied the data from the database into the Test A page 
and it also would only display correctly if I set it to UTF-8 in the 
browser. So, this narrows it down to, that the code is being coded to 
UTF-8. I don't understand this, as I've set all settings to SJIS. 
Obviously I'm missing something very fundamental, which I'm sure will 
pointed out to me, real quick. Cheers, again.

Mark Sargent.


mbstring.detect_order auto

mbstring.encoding_translation On

mbstring.func_overload 0

mbstring.http_input Auto

mbstring.http_output SJIS

mbstring.internal_encoding SJIS

mbstring.language Japanese

mbstring.substitute_character no value

</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00271" href="msg00271.html">Re: [tlug] OT-Japanese in PHP</a></strong>
<ul><li><em>From:</em> Erin D. Hughes via info@example.com</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00248" href="msg00248.html">Re: [tlug] OT-Japanese in PHP</a></strong>
<ul><li><em>From:</em> Mark Sargent</li></ul></li>
<li><strong><a name="00252" href="msg00252.html">Re: [tlug] OT-Japanese in PHP</a></strong>
<ul><li><em>From:</em> Erin D. Hughes via info@example.com</li></ul></li>
<li><strong><a name="00254" href="msg00254.html">Re: [tlug] OT-Japanese in PHP</a></strong>
<ul><li><em>From:</em> Mark Sargent</li></ul></li>
<li><strong><a name="00258" href="msg00258.html">Re: [tlug] OT-Japanese in PHP</a></strong>
<ul><li><em>From:</em> David E</li></ul></li>
<li><strong><a name="00259" href="msg00259.html">Re: [tlug] OT-Japanese in PHP</a></strong>
<ul><li><em>From:</em> Erin D. Hughes via info@example.com</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00269.html">Re: [tlug] SuSE 9.1 - 9.3 Upgrade Saga</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00271.html">Re: [tlug] OT-Japanese in PHP</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00259.html">Re: [tlug] OT-Japanese in PHP</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00271.html">Re: [tlug] OT-Japanese in PHP</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00270"><strong>Date</strong></a></li>
<li><a href="threads.html#00270"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
