<!-- MHonArc v2.6.16 -->
<!--X-Subject: [tlug] Handling Raw Hard Drive Images (was Re: Mac OS X: bad super block has become Unsupported sector size (0)) -->
<!--X-From-R13: wrc200404Npbyhzohf.ee.pbz -->
<!--X-Date: Sun, 22 May 2011 04:26:12 +0900 -->
<!--X-Message-Id: 20110521152407.29237fe7.jep200404@columbus.rr.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: BANLkTi=TkqhnrjOvQmepK_RfLHRO2s60HA@mail.gmail.com -->
<!--X-Reference: 4DD7305B.4050005@simon&#45;cozens.org -->
<!--X-Reference: BANLkTingTY+ZxaJLj8Q8Xm9GGkA2NyYhXQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00071.html">Date Prev</a>][<a href="msg00073.html">Date Next</a>][<a href="msg00071.html">Thread Prev</a>][<a href="msg00076.html">Thread Next</a>][<a href="maillist.html#00072">Date Index</a>][<a href="threads.html#00072">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[tlug] Handling Raw Hard Drive Images (was Re: Mac OS X: bad super block has become Unsupported sector size (0))</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Sat, 21 May 2011 15:24:07 -0400</li>
<li><strong>From</strong>: <strong><a href="mailto:jep200404@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Handling%20Raw%20Hard%20Drive%20Images%20%28was%20Re:%20Mac%20OS%20X:%20bad%20super%20block%20has%20become%20Unsupported%20sector%20size%20%280%29%29">jep200404@example.com</a></strong></li>
<li><strong>Subject</strong>: <strong>[tlug] Handling Raw Hard Drive Images (was Re: Mac OS X: bad super block has become Unsupported sector size (0))</strong></li>
<li>References: &lt;<a href="mailto:BANLkTi%3DTkqhnrjOvQmepK_RfLHRO2s60HA@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Handling%20Raw%20Hard%20Drive%20Images%20%28was%20Re:%20Mac%20OS%20X:%20bad%20super%20block%20has%20become%20Unsupported%20sector%20size%20%280%29%29">BANLkTi=TkqhnrjOvQmepK_RfLHRO2s60HA@example.com</a>&gt;	&lt;<a href="mailto:4DD7305B.4050005@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Handling%20Raw%20Hard%20Drive%20Images%20%28was%20Re:%20Mac%20OS%20X:%20bad%20super%20block%20has%20become%20Unsupported%20sector%20size%20%280%29%29">4DD7305B.4050005@example.com</a>&gt;	&lt;<a href="mailto:BANLkTingTY%2BZxaJLj8Q8Xm9GGkA2NyYhXQ@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Handling%20Raw%20Hard%20Drive%20Images%20%28was%20Re:%20Mac%20OS%20X:%20bad%20super%20block%20has%20become%20Unsupported%20sector%20size%20%280%29%29">BANLkTingTY+ZxaJLj8Q8Xm9GGkA2NyYhXQ@example.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Sat, 21 May 2011 13:12:35 +0900, Jean-Christian Imbeault &lt;jc.imbeault@example.com&gt; wrote:

&gt; Unfortunate I can't make an image as the disk is 1TB and I don't have
&gt; anything that could accept an image that size (not that I even know
&gt; how to make an image).

Once one has acquired a bigger drive on which to store the image, 
one would use a command like: 

   dd if=/dev/sdb of=/home/jci/backup/sdb

to make a backup of the whole drive /dev/sdb. That's simple 
enough and works. Make sure that no partitions of /dev/sdb are 
mounted when you're doing the backup. 














































The following might scare you. There's much below. You might want 
to skip around and chew on one little piece at a time. 

Here are some commands I find handy related to backing up or 
working with hard drives as images. Often I use Knoppix to work 
around hard drives that have problems. If you use Knoppix, be 
very sure to boot with noswap option. I.e.: 

   boot: knoppix no3d noswap

--------------------------------------------------------------------------------

# Knoppix 5.3.1 DVD accesses IDE drives as /dev/hd[abcd]

echo 'set -o vi' &gt;&gt;.bashrc
chmod 755 /var/run/screen
screen

--------------------------------------------------------------------------------

drive=hda
drive=sdb
date
fdisk -l /dev/$drive
echo 'scale=10;('`cat /sys/block/$drive/size`'*512)' | bc
echo 'scale=10;('`cat /sys/block/$drive/size`'*512)/(1024^3)' | bc
for f in /sys/block/${drive}/${drive}*; do echo -n &quot;e2label for $f is &quot;; e2label /dev/`basename $f` ;done
for f in /sys/block/${drive}/${drive}*; do echo -n &quot;offset for $f is &quot;;echo '512*'`cat $f/start` | bc ;done
cat /sys/block/$drive/capability
cat /sys/block/$drive/dev
cat /sys/block/$drive/range
cat /sys/block/$drive/removable
cat /sys/block/$drive/size
cat /sys/block/$drive/stat
find /sys/block/$drive -name size | xargs head
for f in /sys/block/${drive}/${drive}*; do head $f/dev $f/size $f/start $f/stat;done

# $f/start is offset for mounting loopback devices
# Learn how to master the losetup command. 
# For real fun, combine LVM with losetup. 

# for IDE drives only
ls /proc/ide/$drive
cat /proc/ide/$drive/cache
cat /proc/ide/$drive/capacity
cat /proc/ide/$drive/driver
cat /proc/ide/$drive/geometry
cat /proc/ide/$drive/identify
cat /proc/ide/$drive/media
cat /proc/ide/$drive/model
cat /proc/ide/$drive/settings
cat /proc/ide/$drive/smart_thresholds
cat /proc/ide/$drive/smart_values

# for SCSI (or USB) drives
cat /proc/scsi/scsi
cat /proc/scsi/usb-storage/0

# for all
smartctl -a /dev/$drive

# in dd, big blocks copy faster. I try to find a block size close to 1MB 
# that divides evenly into the total size of the drive. 
cat /sys/block/$drive/size
factor `cat /sys/block/$drive/size`
bc
scale=11
# the bs and count numbers below are for a particular drive I worked with
dd if=/dev/$drive bs=922624 count=14112 of=/home/jci/backup/$drive

# sometimes I will squirt the image over to another computer with netcat. 
# keep in mind that this is completely insecure (but can be very fast). 

dd if=/dev/$drive bs=922624 count=14112 | nc -l -p 8000
# on other machine, run: 
nc 192.168.1.123 8000 &gt;/home/jci/backup/$drive

# to test hardware, repeatedly read the whole hard drive and calculate its md5sum
# I often combine that with other stuff, like smartctl, 
# and watching the temperature over time. Cool drives are happy drives. 
# You should scrutinize which value awk prints below

date
while true; do (date | tr '\n' ' ';smartctl -a /dev/$drive | tee -a smartctl.log | awk '/^194 Temperature_Celsius/ {print $4}' ) | tee -a temperatures;time dd if=/dev/$drive bs=924672 count=22080 | md5sum | tee -a MD5SUM;date;done

# on another &quot;screen&quot;, run watch
watch -n 60 'uniq -c MD5SUM;awk '\''{ print $7 }'\'' &lt;temperatures | uniq -c'
uniq -c MD5SUM;awk '{ print $7 }' &lt;temperatures | uniq -c


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00066" href="msg00066.html">[tlug] Mac OS X: bad super block has become Unsupported sector size	(0)</a></strong>
<ul><li><em>From:</em> Jean-Christian Imbeault</li></ul></li>
<li><strong><a name="00067" href="msg00067.html">Re: [tlug] Mac OS X: bad super block has become Unsupported sector size (0)</a></strong>
<ul><li><em>From:</em> Simon Cozens</li></ul></li>
<li><strong><a name="00068" href="msg00068.html">Re: [tlug] Mac OS X: bad super block has become Unsupported sector	size (0)</a></strong>
<ul><li><em>From:</em> Jean-Christian Imbeault</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00071.html">Re: [tlug] Mac OS X: bad super block has become Unsupported sector size (0)</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00073.html">Re: [tlug] [announcement] nomikai May 27 (Friday)</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00071.html">Re: [tlug] Mac OS X: bad super block has become Unsupported sector size (0)</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00076.html">Re: [tlug] Computer to give away or sell [SOLVED]</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00072"><strong>Date</strong></a></li>
<li><a href="threads.html#00072"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
