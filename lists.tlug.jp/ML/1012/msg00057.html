<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [tlug] The wrong kanji -->
<!--X-From-R13: Fenivf Qneqjryy <genivf.pneqjryyNrkgryyvflf.arg> -->
<!--X-Date: Thu, 09 Dec 2010 21:47:00 +0900 -->
<!--X-Message-Id: AANLkTikyEJLqhD4_oQtMgBrnM1yXNwU3pDK_CwYswEQG@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 4CFD161A.9090503@articlass.org -->
<!--X-Reference: AANLkTimLd+UHpNe3TPMb0cv48R+564DS3mZHfqDfY2Vx@mail.gmail.com -->
<!--X-Reference: 4CFEFC4E.8070505@dcook.org -->
<!--X-Reference: AANLkTi=9poUGXphtR9NuMok7hzYRfJThX0ia0UFrGbGU@mail.gmail.com -->
<!--X-Reference: 4D007503.70309@dcook.org -->
<!--X-Reference: AANLkTi=s=_HKDWNsEwHKOyW4cbE=AQMRQR9CuH313&#45;YO@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00056.html">Date Prev</a>][<a href="msg00058.html">Date Next</a>][<a href="msg00055.html">Thread Prev</a>][<a href="msg00058.html">Thread Next</a>][<a href="maillist.html#00057">Date Index</a>][<a href="threads.html#00057">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] The wrong kanji</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Thu, 9 Dec 2010 21:46:57 +0900</li>
<li><strong>From</strong>: <strong>Travis Cardwell &lt;<a href="mailto:travis.cardwell@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">travis.cardwell@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] The wrong kanji</strong></li>
<li>References: &lt;<a href="mailto:4CFD161A.9090503@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">4CFD161A.9090503@example.com</a>&gt;	&lt;<a href="mailto:AANLkTimLd%2BUHpNe3TPMb0cv48R%2B564DS3mZHfqDfY2Vx@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">AANLkTimLd+UHpNe3TPMb0cv48R+564DS3mZHfqDfY2Vx@example.com</a>&gt;	&lt;<a href="mailto:4CFEFC4E.8070505@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">4CFEFC4E.8070505@example.com</a>&gt;	&lt;<a href="mailto:AANLkTi%3D9poUGXphtR9NuMok7hzYRfJThX0ia0UFrGbGU@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">AANLkTi=9poUGXphtR9NuMok7hzYRfJThX0ia0UFrGbGU@example.com</a>&gt;	&lt;<a href="mailto:4D007503.70309@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">4D007503.70309@example.com</a>&gt;	&lt;<a href="mailto:AANLkTi%3Ds%3D_HKDWNsEwHKOyW4cbE%3DAQMRQR9CuH313-YO@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">AANLkTi=s=_HKDWNsEwHKOyW4cbE=AQMRQR9CuH313-YO@example.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Thu, Dec 9, 2010 at 5:10 PM, Travis Cardwell
&lt;travis.cardwell@example.com&gt; wrote:
&gt; I currently cannot afford to get (too) distracted, but at some point I
&gt; will prepare a clean VM, test some settings, and report back.

My wife ended up working late tonight, so I had time sooner than I expected! ;)

I confirmed that all `fontconfig-voodoo -s ja_JP` does is make a single symlink:
/etc/fonts/conf.avail/69-langauge-selector-ja-jp.conf -&gt;
/etc/fonts/conf.d/69-langauge-selector-ja-jp.conf

This file creates strong associations to Japanese fonts for generic
font families, making them take priority over the Chinese fonts.  The
associations, however, have a test that makes sure that your locale is
a Japanese one.  If you remove these conditions (see the diff at the
bottom of this message), then it makes the Japanese fonts take
priority regardless of the locale.  This means, of course, that though
Japanese text will be fixed, Chinese text will have some Japanese
glyphs.  I do not know how to fix this issue in a generic way; I do
not think fontconfig was designed with this problem in mind,
unfortunately.

For anybody who wants to keep Chinese fonts installed yet make the
Japanese fonts the default, I suggest one of the following instead of
editing /etc/fonts/conf.d/69-langauge-selector-ja-jp.conf:

1. If you would like the changes to affect the whole system, put the
contents of /etc/fonts/conf.d/69-langauge-selector-ja-jp.conf (minus
the conditions) into local.conf.

2. If you would like the changes to affect just specific users, put
the contents of /etc/fonts/conf.d/69-langauge-selector-ja-jp.conf
(minus the conditions) into ~/.fonts.conf for each such user.

In both cases, run `sudo fontconfig-voodoo -r` to remove any existing
fontconfig-voodoo config, as you are overriding it anyway.

Travis

----

$ git --no-pager diff
--- a/etc/fonts/conf.avail/69-language-selector-ja-jp.conf
+++ b/etc/fonts/conf.avail/69-language-selector-ja-jp.conf
@@ -3,9 +3,6 @@
 &lt;fontconfig&gt;
     &lt;!-- Japanese (ja) --&gt;
     &lt;match target=&quot;pattern&quot;&gt;
-        &lt;test name=&quot;lang&quot; compare=&quot;contains&quot;&gt;
-            &lt;string&gt;ja&lt;/string&gt;
-        &lt;/test&gt;
         &lt;test qual=&quot;any&quot; name=&quot;family&quot;&gt;
             &lt;string&gt;serif&lt;/string&gt;
         &lt;/test&gt;
@@ -21,9 +18,6 @@
     &lt;/match&gt;

     &lt;match target=&quot;pattern&quot;&gt;
-        &lt;test name=&quot;lang&quot; compare=&quot;contains&quot;&gt;
-            &lt;string&gt;ja&lt;/string&gt;
-        &lt;/test&gt;
         &lt;test qual=&quot;any&quot; name=&quot;family&quot;&gt;
             &lt;string&gt;sans-serif&lt;/string&gt;
         &lt;/test&gt;
@@ -41,9 +35,6 @@
     &lt;/match&gt;

     &lt;match target=&quot;pattern&quot;&gt;
-        &lt;test name=&quot;lang&quot; compare=&quot;contains&quot;&gt;
-            &lt;string&gt;ja&lt;/string&gt;
-        &lt;/test&gt;
         &lt;test qual=&quot;any&quot; name=&quot;family&quot;&gt;
             &lt;string&gt;monospace&lt;/string&gt;
         &lt;/test&gt;

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00058" href="msg00058.html">Re: [tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00041" href="msg00041.html">[tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Dave M G</li></ul></li>
<li><strong><a name="00043" href="msg00043.html">Re: [tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Travis Cardwell</li></ul></li>
<li><strong><a name="00051" href="msg00051.html">Re: [tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Darren Cook</li></ul></li>
<li><strong><a name="00052" href="msg00052.html">Re: [tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Travis Cardwell</li></ul></li>
<li><strong><a name="00054" href="msg00054.html">Re: [tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Darren Cook</li></ul></li>
<li><strong><a name="00055" href="msg00055.html">Re: [tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Travis Cardwell</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00056.html">Re: [tlug] The wrong kanji</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00058.html">Re: [tlug] The wrong kanji</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00055.html">Re: [tlug] The wrong kanji</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00058.html">Re: [tlug] The wrong kanji</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00057"><strong>Date</strong></a></li>
<li><a href="threads.html#00057"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
