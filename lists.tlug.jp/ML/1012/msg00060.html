<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [tlug] The wrong kanji -->
<!--X-From-R13: "Egrcura X. Fheaohyy" <fgrcuraNkrznpf.bet> -->
<!--X-Date: Sat, 11 Dec 2010 00:07:55 +0900 -->
<!--X-Message-Id: 87sjy5sm59.fsf@uwakimon.sk.tsukuba.ac.jp -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 4CFD161A.9090503@articlass.org -->
<!--X-Reference: AANLkTimLd+UHpNe3TPMb0cv48R+564DS3mZHfqDfY2Vx@mail.gmail.com -->
<!--X-Reference: 4CFEFC4E.8070505@dcook.org -->
<!--X-Reference: AANLkTi=9poUGXphtR9NuMok7hzYRfJThX0ia0UFrGbGU@mail.gmail.com -->
<!--X-Reference: 4D007503.70309@dcook.org -->
<!--X-Reference: AANLkTi=s=_HKDWNsEwHKOyW4cbE=AQMRQR9CuH313&#45;YO@mail.gmail.com -->
<!--X-Reference: AANLkTikyEJLqhD4_oQtMgBrnM1yXNwU3pDK_CwYswEQG@mail.gmail.com -->
<!--X-Reference: 871v5qtivg.fsf@uwakimon.sk.tsukuba.ac.jp -->
<!--X-Reference: AANLkTi=HmznQsHOD0ugoU=Oh3_nt0EZnyxi4hvE3s_fC@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00059.html">Date Prev</a>][<a href="msg00061.html">Date Next</a>][<a href="msg00059.html">Thread Prev</a>][<a href="msg00056.html">Thread Next</a>][<a href="maillist.html#00060">Date Index</a>][<a href="threads.html#00060">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] The wrong kanji</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Sat, 11 Dec 2010 00:06:10 +0900</li>
<li><strong>From</strong>: <strong>&quot;Stephen J. Turnbull&quot; &lt;<a href="mailto:stephen@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">stephen@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] The wrong kanji</strong></li>
<li>References: &lt;<a href="mailto:4CFD161A.9090503@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">4CFD161A.9090503@example.com</a>&gt;	&lt;<a href="mailto:AANLkTimLd%2BUHpNe3TPMb0cv48R%2B564DS3mZHfqDfY2Vx@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">AANLkTimLd+UHpNe3TPMb0cv48R+564DS3mZHfqDfY2Vx@example.com</a>&gt;	&lt;<a href="mailto:4CFEFC4E.8070505@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">4CFEFC4E.8070505@example.com</a>&gt;	&lt;<a href="mailto:AANLkTi%3D9poUGXphtR9NuMok7hzYRfJThX0ia0UFrGbGU@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">AANLkTi=9poUGXphtR9NuMok7hzYRfJThX0ia0UFrGbGU@example.com</a>&gt;	&lt;<a href="mailto:4D007503.70309@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">4D007503.70309@example.com</a>&gt;	&lt;<a href="mailto:AANLkTi%3Ds%3D_HKDWNsEwHKOyW4cbE%3DAQMRQR9CuH313-YO@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">AANLkTi=s=_HKDWNsEwHKOyW4cbE=AQMRQR9CuH313-YO@example.com</a>&gt;	&lt;<a href="mailto:AANLkTikyEJLqhD4_oQtMgBrnM1yXNwU3pDK_CwYswEQG@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">AANLkTikyEJLqhD4_oQtMgBrnM1yXNwU3pDK_CwYswEQG@example.com</a>&gt;	&lt;<a href="mailto:871v5qtivg.fsf@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">871v5qtivg.fsf@example.com</a>&gt;	&lt;<a href="mailto:AANLkTi%3DHmznQsHOD0ugoU%3DOh3_nt0EZnyxi4hvE3s_fC@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20The%20wrong%20kanji">AANLkTi=HmznQsHOD0ugoU=Oh3_nt0EZnyxi4hvE3s_fC@example.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Travis Cardwell writes:

 &gt; While it is not possible to identify (with certainty) the language of
 &gt; plain text, applications that are designed to be multilingual may have
 &gt; more knowledge.

&quot;Don't teach Grandma XEmacs to suck eggs.&quot; :-)  Yes, I know something
about designing multilingual apps.

 &gt; What I meant above is that fontconfig is not designed with this
 &gt; level of control: there is no way to tell it the language of the
 &gt; text it is rendering.

No, but you don't really want to (although it is a plausible idea on
the face of it).  Fonts don't easily fit into the category of language
(for example essentially all fonts tag themselves as &quot;designed to
support English&quot; because they provide all ASCII characters, the pound
currency symbol, and the Euro currency symbol).  OTOH language has a
habit of slopping over the edge of fonts' repertoires, so it's hard to
design an API for fonts that &quot;just works&quot;.

On the other hand, language as a category *does* fit into the idea of
giving priority to some fonts over others.  Which is what fontconfig
does.  If you have (as Ubuntu apparently does) standard definitions
that give priority to fonts designed to support Japanese scripts, as
well as Chinese, it is reasonably easy to use those in a program:

    /* default_cfg not checked, but if this fails, we're doomed anyway */
    FcConfig default_cfg = FcInitAndLoadConfig ();
    FcConfig ja_cfg = FcCreateConfig ();
    FcConfig zh_cfg = FcCreateConfig ();

    typedef enum { japanese, chinese, dontknow } language;

    language lang = dontknow;

    /* Depending on how the system presents the language-specific
       configuration information, there are alternative ways of doing
       this, but this will do for our purposes. */
    if (! FcConfigParseAndLoad (ja_cfg, &quot;JapaneseFontConfig&quot;, 0)) {
        bitch_loudly (&quot;Japanese config less useful than Japanese Diet!&quot;);
        ja_cfg = default_cfg;
    }
    if (! FcConfigParseAndLoad (zh_cfg, &quot;ChineseFontConfig&quot;, 0))
        bitch_loudly (&quot;Chinese config as obstructive as Chinese government!&quot;);
        zh_cfg = default_cfg;
    }

    lang = get_language_of_text_to_display ();
    if (lang == japanese)
        if (! FcConfigSetCurrent (ja_cfg)) {
            bitch_loudly (&quot;Could not build Japanese font set!&quot;);
            FcConfigSetCurrent (default_cfg);
        }
    else if (lang == chinese)
        if (! FcConfigSetCurrent (zh_cfg)) {
            bitch_loudly (&quot;Could not build Chinese font set!&quot;);
            FcConfigSetCurrent (default_cfg);
        }
    else
        FcConfigSetCurrent (default_cfg);

    /* Make your usual calls to fontconfig and Xft functions to
       configure specific faces and draw text, without need to
       reference language unless you really want to. */

Agreed, that's tedious.  In a real system, the code above should be
encapsulated in a module providing better abstractions and user
configuration, but it would be a pretty thin layer.  There's nothing
at all interesting about that program, it's a mere script.

 &gt; POSIX locale is designed to take care of the common case, and this
 &gt; happens to be at the expense of the special case.

Well, yes, but there's nobody with a good word to say for POSIX
locales.  They just don't win on any grounds, except that they're
universally available on *nix systems.  (OTOH, I was privileged to
read the CDIS version of ISO 10646 a few days ago.  It used to be a
reasonable standalone standard, not as detailed as Unicode but good
enough for the purpose of providing a registry for the universal
character set's repertoire.  Now they've turned it into a partial copy
of the Unicode standard written in really bad English with an emoticon
block (character sources: NTT Docomo, Softbank, and KDDI/Au -- how
friggin' embarrassing!) *sigh*  When will they ever learn?  POSIX is
at least better than that.)

 &gt; I do not know of any applications that change locale settings like
 &gt; this.

I do.  Any application that wants to use XIM in a multilingual fashion
needs to reset locale every time it sets a new language.  There's a
reason why XIM (a) was primarily used for localization rather than
multilingual apps and (b) today is best known as a colleague of the
dodo bird.

 &gt; Applications that make use of multiple languages tend to
 &gt; control the fonts themselves.

Unlike conforming to the XIM protocol, changing fonts is easy to do
any way you like, and fontconfig even makes it reasonably easy to make
language-specific configurations for abstract fonts (like &quot;serif&quot;).


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00041" href="msg00041.html">[tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Dave M G</li></ul></li>
<li><strong><a name="00043" href="msg00043.html">Re: [tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Travis Cardwell</li></ul></li>
<li><strong><a name="00051" href="msg00051.html">Re: [tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Darren Cook</li></ul></li>
<li><strong><a name="00052" href="msg00052.html">Re: [tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Travis Cardwell</li></ul></li>
<li><strong><a name="00054" href="msg00054.html">Re: [tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Darren Cook</li></ul></li>
<li><strong><a name="00055" href="msg00055.html">Re: [tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Travis Cardwell</li></ul></li>
<li><strong><a name="00057" href="msg00057.html">Re: [tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Travis Cardwell</li></ul></li>
<li><strong><a name="00058" href="msg00058.html">Re: [tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
<li><strong><a name="00059" href="msg00059.html">Re: [tlug] The wrong kanji</a></strong>
<ul><li><em>From:</em> Travis Cardwell</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00059.html">Re: [tlug] The wrong kanji</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00061.html">[tlug] ADSL or Hikari Fiber</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00059.html">Re: [tlug] The wrong kanji</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00056.html">Re: [tlug] The wrong kanji</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00060"><strong>Date</strong></a></li>
<li><a href="threads.html#00060"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
