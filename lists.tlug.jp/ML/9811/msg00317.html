<!-- MHonArc v2.2.0 -->
<!--X-Subject: Re: tlug: Quest for e&#45;mail -->
<!--X-From: "Stephen J. Turnbull" <turnbull@example.com> -->
<!--X-Date:  Tue, 10 Nov 1998 17:27:35 +0900 -->
<!--X-Message-Id: 13895.63702.863292.281893@example.com -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: 3.0.6.32.19981110150444.00588aa0@example.com -->
<!--X-Reference-Id: Pine.LNX.3.96LJ1.1b7.981110161616.19145C&#45;100000@example.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Schweizer - webmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<!--X-Body-Begin-->
<!--X-User-Header-->
<P>
<font color="blue">
Support open source code!
</font>
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00316.html">Date Prev</A>][<A HREF="msg00318.html">Date Next</A>][<A HREF="msg00315.html">Thread Prev</A>][<A HREF="msg00320.html">Thread Next</A>][<A HREF="maillist.html#00317">Date Index</A>][<A HREF="threads.html#00317">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: tlug: Quest for e-mail</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong><A HREF="mailto:tlug@example.com">tlug@example.com</A></strong></LI>
<LI><strong>Subject</strong>: <strong>Re: tlug: Quest for e-mail</strong></LI>
<LI><strong>From</strong>: <strong>"Stephen J. Turnbull" &lt;<A HREF="mailto:turnbull@example.com">turnbull@example.com</A>&gt;</strong></LI>
<LI>Date: Tue, 10 Nov 1998 17:27:02 +0900 (JST)</LI>
<LI>Content-Transfer-Encoding: 7bit</LI>
<LI>Content-Type: text/plain; charset=us-ascii</LI>
<LI>In-Reply-To: &lt;<A HREF="msg00315.html">Pine.LNX.3.96LJ1.1b7.981110161616.19145C-100000@example.com</A>&gt;</LI>
<LI>References: &lt;<A HREF="msg00313.html">3.0.6.32.19981110150444.00588aa0@example.com</A>&gt;&lt;<A HREF="msg00315.html">Pine.LNX.3.96LJ1.1b7.981110161616.19145C-100000@example.com</A>&gt;</LI>
<LI>Reply-To: <A HREF="mailto:tlug@example.com">tlug@example.com</A></LI>
<LI>Sender: <A HREF="mailto:owner-tlug@example.com">owner-tlug@example.com</A></LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
&gt;&gt;&gt;&gt;&gt; "Jonathan" == Jonathan Byrne &lt;- 3Web &lt;jq@example.com&gt;&gt; writes:

    Jonathan&gt; On Tue, 10 Nov 1998, Dave Gutteridge wrote:
    &gt;&gt; Jim gave me a pointer or two, so i tried what he said:

    &gt;&gt;&gt; running on your machine.  (Read the NAG.)

    Jonathan&gt; This easily-overlooked last sentence is a very important
    Jonathan&gt; one.  If you don't have the NAG (Linux Network
    Jonathan&gt; Administrator's Guide), get it now.  The NAG will be one
    Jonathan&gt; of your best friends and most often used reference
    Jonathan&gt; works.

Hmm.  Somehow I seem to have neglected that one.  Oh well.  :-)

&gt;&gt;&gt;&gt;&gt; "Dave" == Dave Gutteridge &lt;dave@example.com&gt; writes:

    Dave&gt; Okay, the deal is that I have two web sites on this Linux
    Dave&gt; machine all set up and ready to go. One of them is
    Dave&gt; [...]. The other site is [...].

OK, I gather that you have a single box with multiple domain
registrations?  It only has one Internet connection, right?

    Dave&gt; concerns. Now, what I'm trying to accomplish is have it so
    Dave&gt; that I can use the ".com" addresses as an e-mail
    Dave&gt; address. So, for example, i could have "me@example.com". This
    Dave&gt; is where i thought the mail server came in.

OK, you are on the same wavelength with that.  From the point of view
of the Internet it is much like an FTP server or HTTP (web) server; it
speaks a different language and allows different operations, but the
underlying communications scheme is the same.

Where your statement and reality part company is that the mail server
cannot control the name(s) that the Internet uses for your box.  This
is done by a nameserver which could be on your box, but only with the
cooperation of your ISP.  Much more likely, the relevant nameserver is 
controlled by your ISP.
 
    Dave&gt; I thought mail would come to this machine, be stored there,
    Dave&gt; and then give it to me when i asked for it from, say, my PC
    Dave&gt; at home.

No reason why it cannot.  However, there are several different kinds
of addresses in the Internet naming system (technically, record types
in the DNS database).  An "A" record gives a domain as an "alias" for
a particular (numerical) internet address.  It turns out that using
"A" records for mail service was not sufficiently flexible, because
the machine might be down and the mail does not go through.  So there
are also "MX" records which allow several different machines to accept 
mail for the same address.  These are tried in order of priority.

Here's what ns.rainbow.co.jp has to say about the matter:

  bash-2.01$ host -t any d-rave.com
  d-rave.com              NS      WWW2.RAINBOW.CO.JP
  d-rave.com              NS      NS.RAINBOW.CO.JP
  d-rave.com              NS      ns1.RAINBOW.CO.JP
  d-rave.com              SOA     www.d-rave.com postmaster.d-rave.com (
                          98081201        ;serial (version)
                          10800   ;refresh period (3 hours)
                          1800    ;retry interval (30 minutes)
                          4320000 ;expire time (7 weeks, 1 day)
                          86400   ;default ttl (1 day)
                          )
  d-rave.com              MX      10 mail.d-rave.com
   !!! d-rave.com MX host mail.d-rave.com is not canonical

OK, this could be a problem, although I doubt it.

  bash-2.01$ host -t any mail.d-rave.com
  mail.d-rave.com         CNAME   www.d-rave.com
  www.d-rave.com          A       202.238.0.248

What this says is that mail.d-rave.com is not an alias for the
numerical address, but rather for the domain name www.d-rave.com.
This can be a problem when other mailers do a reverse lookup on your
IP address; they may decide that you're spoofing them and issue a
warning or even refuse to connect.

  bash-2.01$ host -t any 202.238.0.248
  202.238.0.248 does not exist (Authoritative answer)

Oops.

  bash-2.01$ host -l d-rave.com  www.d-rave.com
  d-rave.com AXFR record currently not present at www.d-rave.com

Bad.  The "start of authority" host doesn't know what's in its own
domain.  Worse.  Zone transfers (the whole AXFR record, -l option to
host) shouldn't be permitted, they give too much info in one go to
crackers.  It looks like your name server (on www.d-rave.com) is
configured to give that info if it were to be available.  I'm not a
BIND guru, you'll have to ask somebody else if this is a real problem.

  bash-2.01$ host -t any d-rave.com  www.d-rave.com
  d-rave.com              A       202.238.0.248
  d-rave.com              NS      ns1.rainbow.co.jp
   !!! d-rave.com NS host ns1.rainbow.co.jp is not canonical

www.d-rave.com is definitely running a name server.  However, note
that although it is listed as SOA (see above), there is no way for
anyone to use it without asking directly because it doesn't have an NS
record at your ISP.

  bash-2.01$ host -l d-rave.com  ns1.RAINBOW.CO.JP
  d-rave.com AXFR record query refused by ns1.RAINBOW.CO.JP

Good.

I don't see any reason why mail to an existing account or alias
@example.com should fail.  Despite the inconsistencies in the rainbow
DNS flagged above.

There are two (easy) ways to create an address at a mail server.  One
is to create a user account.  The other is to put an alias in
/etc/aliases.  (You may need to run a program to convert that into a
form that sendmail can use.)

To read mail using telnet, use pine or mailx.  At least one will be
installed on a standard Red Hat system, probably both.

    Dave&gt; I typed in telnet localhost 25 at my prompt (for those of
    Dave&gt; you just tuning in, these days i interface with my Red Hat
    Dave&gt; 5.1 machine by telnet), and here's the response i got:

    Dave&gt; Trying 127.0.0.1...
    Dave&gt; Connected to localhost.
    Dave&gt; Escape character is '^]'.
    Dave&gt; 220 linuxserver.rainbow.co.jp DSMTP ESMTP Server v2.2i

BTW: bash-2.01$ host -t any linuxserver.rainbow.co.jp
linuxserver.rainbow.co.jp does not exist (Authoritative answer)

Trying to send mail from this machine may occasionally get you
nowhere, if the other host is paranoid.

    Dave&gt; Is there a reference on the web which will give me a bit of
    Dave&gt; a "how to" on mail servers?

bash-2.01$ ls /usr/doc/HOWTO   # just the interesting ones
META-FAQ.gz                    # about finding information you need
Access-HOWTO.gz                # possibly firewall-related, more
                               # likely file permissions
Mail-HOWTO.gz		       # short n sweet
PPP-HOWTO.gz		       # if you want to dial up your box
DNS-HOWTO.gz                   # may have some useful information
                               # about MX records etc
Security-HOWTO.gz              # you asked about firewalls
Firewall-HOWTO.gz
HOWTO-INDEX.gz                 # more meta information
INDEX.gz
INDEX.html.gz
Virtual-Services-HOWTO.gz      # probably about how to use multiple
			       # names for one box
WWW-HOWTO.gz
index.html		       # point lynx or netscape at this
mini/			       # directory with more HOWTOs in it

    Dave&gt; Is my understanding of mail servers still off base? I'm
    Dave&gt; wondering if i should be asking different questions.

No, I think you're probably fine.  Your main issues are going to be
with the ISP though, making sure all your A and MX records are
straight.

    Dave&gt; help NOOP
    Dave&gt; 214-NOOP
    Dave&gt; 214-No operation. Does nothing at all.
    Dave&gt; 214 OK   

    Dave&gt; Why would there be a command that does nothing at all?

Not quite nothing; it resets the remote host's timer so that the
connection doesn't get cut for being idle to long.  You also get a
reply, so you can use it find out if the connection is still open:

  bash-2.01$ telnet localhost 25
  Trying 127.0.0.1...
Connected to localhost.
  Escape character is '^]'.
  220-tanko.sk.tsukuba.ac.jp Smail-3.2.0.101 (#2 1998-Jul-16) ready at Tue, 10 Nov 1998 17:24:53 +0900 (JST)
  220 ESMTP supported
  NOOP
  250 Okay
  QUIT
  221 tanko.sk.tsukuba.ac.jp closing connection
  Connection closed by foreign host.

Most protocols provide a NOOP, explicitly for these reasons.

-- 
University of Tsukuba                Tennodai 1-1-1 Tsukuba 305-8573 JAPAN
Institute of Policy and Planning Sciences       Tel/fax: +81 (298) 53-5091
__________________________________________________________________________
__________________________________________________________________________
What are those two straight lines for?  "Free software rules."
----------------------------------------------------------------
Next Nomikai: 20 November, 19:30   Tengu TokyoEkiMae 03-3275-3691
Next Technical Meeting: 12 December, 12:30 HSBC Securities Office
----------------------------------------------------------------
more info: <A TARGET="_top" HREF="http://tlug.linux.or.jp">http://tlug.linux.or.jp</A> Sponsors: PHT, HSBC Securities

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00320" HREF="msg00320.html">Re: tlug: Quest for e-mail</A></STRONG>
<UL><LI><EM>From:</EM> Dave Gutteridge &lt;dave@example.com&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00313" HREF="msg00313.html">tlug: Quest for e-mail</A></STRONG>
<UL><LI><EM>From:</EM> Dave Gutteridge &lt;dave@example.com&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00315" HREF="msg00315.html">Re: tlug: Quest for e-mail</A></STRONG>
<UL><LI><EM>From:</EM> Jonathan Byrne - 3Web &lt;jq@example.com&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00316.html">Re: tlug: Quest for e-mail</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00318.html">Re: tlug: Re: Need info. about Japanese and Linux (OFF TOPIC!)</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00315.html">Re: tlug: Quest for e-mail</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00320.html">Re: tlug: Quest for e-mail</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="maillist.html#00317"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00317"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
