<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [tlug] Authenticating to Samba with AD account -->
<!--X-From-R13: @example.com Syraxbi <tbvoavhNjq6.fb&#45;arg.ar.wc> -->
<!--X-Date: Mon, 23 Oct 2006 21:40:18 +0900 -->
<!--X-Message-Id: 453CB813.4050403@example.com&#45;net.ne.jp -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20061017004300.GA14839@example.com&#45;net.ne.jp -->
<!--X-Reference: 2d4c9c600610182259g1b4c9f03r61346bf799b5852b@example.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00197.html">Date Prev</a>][<a href="msg00199.html">Date Next</a>][<a href="msg00157.html">Thread Prev</a>][<a href="msg00137.html">Thread Next</a>][<a href="maillist.html#00198">Date Index</a>][<a href="threads.html#00198">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] Authenticating to Samba with AD account</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Mon, 23 Oct 2006 21:39:47 +0900</li>
<li><strong>From</strong>: <strong>Nikolay Elenkov &lt;<a href="mailto:goibniu@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Authenticating%20to%20Samba%20with%20AD%20account">goibniu@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] Authenticating to Samba with AD account</strong></li>
<li>References: &lt;<a href="msg00136.html">20061017004300.GA14839@example.com</a>&gt;	&lt;<a href="msg00157.html">2d4c9c600610182259g1b4c9f03r61346bf799b5852b@example.com</a>&gt;</li>
<li>User-agent: Thunderbird 1.5.0.7 (X11/20060913)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Hi,

Patrick Niessen wrote:

&gt; First of all, ensure your samba machine is properly registered in the
&gt; domain.  If necessary delete from Windows, and then add it again,
&gt; following correct procedure as specified by Samba manual.  Ensure your
&gt; time is synced!  You may need to use NTP using AD controller as a
&gt; timesource.  Kerberos is very time sensitive!

Thanks for your reply. The machine is properly registered and time
synced. It also (kind of...) works now (see below).

&gt; 
&gt; I don't use this, so not sure whether it affects the system.  If you
&gt; only need to provide Samba access there is no need to involve PAM !
&gt; Authent will be handled only by samba.  Use Pam if you need to access
&gt; other services like ssh or ftp with AD username &amp; password. 

Ssh and some other services are needed, so we do need PAM.

&gt;To have
&gt; unified login from other services, it may be an option to use ldap
&gt; instead of PAM (I use ldap from php to check passowrd and username are
&gt; correct).

It is not exactly my machine and using LDAP requires installing stuff on
the domain controller. So LDAP is not an option, stuck with winbind, for
better or worse.

&gt; 
&gt; Check logfiles, also system logfiles to narrow down problem.
&gt; 

It's been running with -d10 for a while and that did give some hints,
but I still haven't quite got to the bottom of it.

Anyway, as I said, kind of works now. Commenting out the 'default_realm'
in /etc/krb5.conf did the trick. Apparently newer versions of the
Kerberos library can find the realm automagically. Accessing shares when
you are logged on the domain works as expected. But logging in via ssh
takes quite some time. And it doesn't seem to be DNS related. When/if I
get the time, I'll try to track it down.



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00136" href="msg00136.html">[tlug] Authenticating to Samba with AD account</a></strong>
<ul><li><em>From:</em> Nikolay Elkov</li></ul></li>
<li><strong><a name="00157" href="msg00157.html">Re: [tlug] Authenticating to Samba with AD account</a></strong>
<ul><li><em>From:</em> Patrick Niessen</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00197.html">Re: [TLUG] speakers for next TLUG meeting?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00199.html">Re: [tlug] PHP in Japan.</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00157.html">Re: [tlug] Authenticating to Samba with AD account</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00137.html">[tlug] tlug server maintenance 10/18</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00198"><strong>Date</strong></a></li>
<li><a href="threads.html#00198"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
