<!-- MHonArc v2.2.0 -->
<!--X-Subject: tlug: SMTP and junk email [was: How are they doing this? ] -->
<!--X-From: "Stephen J. Turnbull" <turnbull@example.com> -->
<!--X-Date:  Tue, 12 Aug 1997 05:25:11 GMT -->
<!--X-Message-Id: m0wy9BT&#45;00006qC@example.com -->
<!--X-ContentType: text/plain -->
<!--X-Reference-Id: XFMail.970811155626.schweiz@example.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Schweizer - webmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<!--X-Body-Begin-->
<!--X-User-Header-->
<P>
<font color="blue">
Support open source code!
</font>
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00071.html">Date Prev</A>][<A HREF="msg00073.html">Date Next</A>][<A HREF="msg00058.html">Thread Prev</A>][<A HREF="msg00075.html">Thread Next</A>][<A HREF="maillist.html#00072">Date Index</A>][<A HREF="threads.html#00072">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>tlug: SMTP and junk email [was: How are they doing this? ]</H1>
<HR>
<!--X-Subject-Header-End-->
<UL>
<LI><strong>To</strong>: <strong><A HREF="mailto:tlug@example.com">tlug@example.com</A></strong></LI>
<LI><strong>Subject</strong>: <strong>tlug: SMTP and junk email [was: How are they doing this? ]</strong></LI>
<LI><strong>From</strong>: <strong>"Stephen J. Turnbull" &lt;<A HREF="mailto:turnbull@example.com">turnbull@example.com</A>&gt;</strong></LI>
<LI>Date: Tue, 12 Aug 1997 14:07:54 +0900</LI>
<LI>In-reply-to: Your message of "Mon, 11 Aug 1997 15:48:38 +0900."            &lt;<A HREF="msg00055.html">XFMail.970811155626.schweiz@example.com</A>&gt; </LI>
<LI>Reply-To: <A HREF="mailto:tlug@example.com">tlug@example.com</A></LI>
<LI>Sender: owner-tlug</LI>
</UL>
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
--------------------------------------------------------
tlug note from "Stephen J. Turnbull" &lt;turnbull@example.com&gt;
--------------------------------------------------------
***** Why is it so easy to spoof addresses in mail?  The main reason
is that the SMTP doesn't care what's in the message at all.  Not the
headers, nor the body.

A simple SMTP session ("protocol replies" are generated by the remote
host, and you should eliminate the # comments and any surrounding
whitespace):

bash% telnet 127.0.0.1 25         # 25 is the SMTP TCP port
HELO your.own.domain              # some hosts gethostbyaddress, not all
... some protocol reply ...
MAIL FROM: any.old.address@example.com  # this may have been
                                             # forwarded, eg from UUCP,
                                             # so nobody checks 
... another protocol reply ...
RCPT TO: real-addr@example.com             # this does not have to
                                             # be any.host.where!!!
                                             # it does have to exist,
                                             #   or nobody will care :-)
... one more protocol reply ...
DATA
any lines you want here, including more fake headers if you want
or you can put real headers if you want!

What a novel idea!
.                     # just like Unix mail(1)
                      # a dot by itself ends message
... message accepted protocol reply ...
QUIT
bash%

Try it yourself on 127.0.0.1!  For more info, check out RFC 821.
(<A TARGET="_top" HREF="ftp://ftp.lab.kdd.co.jp/RFC/rfc821.txt">ftp://ftp.lab.kdd.co.jp/RFC/rfc821.txt</A> or something like that).

***** Filtering junk mail using procmail

I keep old junk mail around mostly because I've been too lazy to
delete it.  And it's useful for research.  And it might have gotten
auto-shit-canned by procmail but be a real person.

Anyway, the most important thing to do is to trash any mail with an
"X-UIDL" header.  In my "archive" 298 of 500 junk messages had that
header:

bash-2.00$ scan +abuse | wc
    500    4984   40400
bash-2.00$ fgrep UIDL ~/Mail/abuse/* | wc
    298     595   20680

It is apparently added by some kind of bulk-mail software; I've never
seen it in a real message.  The following lines from my .procmailrc is
the filter:

:0:
* X-UIDL|friend@example.com|cyberpromo|relay\.iemmc\.org|rensaw\.com
  |sallynet\.com|vol\.it|mkt-(usa|america)\.com|RESELL\.COM|THEHITMAN\.COM
  |powertips\.com|24hrplaymates\.com|qlink2info\.com|vaprnet\.com
  |cyberbytes\.com|for name removal|adultpatrol\.com|skyinet\.net
  |corpsite\.com|mlmail\.com|cyberbundle\.net
$HOME/Mail/abuse/newmail

(Lines folded and space added for readability.)
Except for vol.it, all of the domains mentioned seem to exist only for 
the purpose of bulk mail.  Quite of few of them are aliases for
Cyberpromo.  vol.it ended up on the shit-list when I saw it for 5
separate bulk mailings in one week.

At present, on average 3 of 42 messages make it through this filter
per week.

The procmail list usually has lots of discussion on this, but it also
gets spammed all the time so I don't read it any more.

Any other suggestions would be welcome....

Steve

-- 
                            Stephen J. Turnbull
Institute of Policy and Planning Sciences                    Yaseppochi-Gumi
University of Tsukuba                      <A TARGET="_top" HREF="http://turnbull.sk.tsukuba.ac.jp/">http://turnbull.sk.tsukuba.ac.jp/</A>
Tel: +81 (298) 53-5091;  Fax: 55-3849              turnbull@example.com
-----------------------------------------------------------------
a word from the sponsor will appear below
-----------------------------------------------------------------
The TLUG mailing list is proudly sponsored by TWICS - Japan's First
Public-Access Internet System.  Now offering 20,000 yen/year flat
rate Internet access with no time charges.  Full line of corporate
Internet and intranet products are available.   info@example.com
Tel: 03-3351-5977   Fax: 03-3353-6096

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00075" HREF="msg00075.html">tlug: PCMCIA modem cards</A></STRONG>
<UL><LI><EM>From:</EM> "Alan B. Stone" &lt;stoneab@example.com&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00077" HREF="msg00077.html">Re: tlug: SMTP and junk email [was: How are they doing this? ]</A></STRONG>
<UL><LI><EM>From:</EM> "Stephen J. Turnbull" &lt;turnbull@example.com&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00084" HREF="msg00084.html">Re: tlug: SMTP and junk email [was: How are they doing this? ]</A></STRONG>
<UL><LI><EM>From:</EM> Jim Tittsler &lt;jwt@example.com&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00055" HREF="msg00055.html">tlug: How are they doing this?</A></STRONG>
<UL><LI><EM>From:</EM> Jim Schweizer &lt;schweiz@example.com&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00071.html">Re: tlug: tkman</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00073.html">tlug: peripheral question</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00058.html">Re: tlug: How are they doing this?</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00075.html">tlug: PCMCIA modem cards</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="maillist.html#00072"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00072"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
