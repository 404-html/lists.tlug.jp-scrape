<!-- MHonArc v2.6.16 -->
<!--X-Subject: [tlug] CPU speed: reported vs. actual -->
<!--X-From-R13: Rneera Qbbx <qneeraNqpbbx.bet> -->
<!--X-Date: Thu, 14 Jul 2011 11:44:41 +0900 -->
<!--X-Message-Id: 4E1E5496.3010309@dcook.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00032.html">Date Prev</a>][<a href="msg00034.html">Date Next</a>][<a href="msg00030.html">Thread Prev</a>][<a href="msg00035.html">Thread Next</a>][<a href="maillist.html#00033">Date Index</a>][<a href="threads.html#00033">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[tlug] CPU speed: reported vs. actual</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Thu, 14 Jul 2011 11:29:42 +0900</li>
<li><strong>From</strong>: <strong>Darren Cook &lt;<a href="mailto:darren@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20CPU%20speed:%20reported%20vs.%20actual">darren@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>[tlug] CPU speed: reported vs. actual</strong></li>
<li>User-agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US;	rv:1.9.2.17) Gecko/20110424 Thunderbird/3.1.10</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>I was benchmarking some code, and had switched [5] my CPU to 1.73Ghz
(the fastest choice). I then switched to 933Mhz and benchmarked again,
and was surprised to see it ran at the same speed (actually it ran
slightly quicker, but close enough to assume the difference is noise).

This CPU has 4 cores but appears to the OS as 8 threads. When I cat
/proc/cpuinfo there are 8 processors, numbered from 0 to 7. They all
show practically the same info, e.g. [1] shows processor 0 and 1 when I
have set the system to 933Mhz.
What is weird is when I change the system to 1.7Ghz, only a single line
in the whole of the /proc/cpuinfo changes: the &quot;cpu MHz&quot; for processor 0:
cpu MHz		: 1733.000

I.e. processor 0 says it is running at 1.7Ghz, but processors 1 to 7 say
they are running at 933Mhz still.

I downloaded the linpack benchmark [2]; it takes ages to run, so I
edited the defaults and ran a cut-back version that takes about 10
minutes to complete. [3] is the 1.7Ghz run, [4] is the 933MHZ run. I.e.
this also reports a difference in CPU speed, but identical performance.

Well, I've answered my first question: is there something wrong with my
own benchmark. No. But now I suspect my computer has been lying to me as
it flicks between CPU speeds (I usually run with the &quot;OnDemand&quot; setting,
which keeps the computer at 933Mhz most of the time). I'm also concerned
that my computer has been running at half-speed [6] all along?

Any thoughts as to how I confirm this, and get it running at full-speed?
(Ubuntu 10.04, 64 bit, linux 2.6.32)

Darren


[1]:
processor	: 0
vendor_id	: GenuineIntel
cpu family	: 6
model		: 30
model name	: Intel(R) Core(TM) i7 CPU       Q 740  @ 1.73GHz
stepping	: 5
cpu MHz		: 933.000
cache size	: 6144 KB
physical id	: 0
siblings	: 8
core id		: 0
cpu cores	: 4
apicid		: 0
initial apicid	: 0
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov
pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx
rdtscp lm constant_tsc arch_perfmon pebs bts rep_good xtopology
nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3
cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida tpr_shadow vnmi
flexpriority ept vpid
bogomips	: 3458.43
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:

processor	: 1
vendor_id	: GenuineIntel
cpu family	: 6
model		: 30
model name	: Intel(R) Core(TM) i7 CPU       Q 740  @ 1.73GHz
stepping	: 5
cpu MHz		: 933.000
cache size	: 6144 KB
physical id	: 0
siblings	: 8
core id		: 1
cpu cores	: 4
apicid		: 2
initial apicid	: 2
fpu		: yes
fpu_exception	: yes
cpuid level	: 11
wp		: yes
flags		: fpu vme de pse tsc msr pae mce cx8 apic sep mtrr pge mca cmov
pat pse36 clflush dts acpi mmx fxsr sse sse2 ss ht tm pbe syscall nx
rdtscp lm constant_tsc arch_perfmon pebs bts rep_good xtopology
nonstop_tsc aperfmperf pni dtes64 monitor ds_cpl vmx smx est tm2 ssse3
cx16 xtpr pdcm sse4_1 sse4_2 popcnt lahf_lm ida tpr_shadow vnmi
flexpriority ept vpid
bogomips	: 3458.43
clflush size	: 64
cache_alignment	: 64
address sizes	: 36 bits physical, 48 bits virtual
power management:



[2]:
<a  rel="nofollow" href="http://software.intel.com/en-us/articles/intel-math-kernel-library-linpack-download/">http://software.intel.com/en-us/articles/intel-math-kernel-library-linpack-download/</a>


[3]:
....
CPU frequency:    2.925 GHz
Number of CPUs: 1
Number of cores: 4
Number of threads: 8
...
Size   LDA    Align. Time(s)    GFlops
...
20000  20016  4      457.982    11.6470



[4]:
...
CPU frequency:    1.728 GHz
Number of CPUs: 1
Number of cores: 4
Number of threads: 8
...
Size   LDA    Align. Time(s)    GFlops
...
20000  20016  4      456.891    11.6748


[5]: I'm using the &quot;CPU Frequency Scaling Monitor&quot; which lives in the
gnome-panel.


[6]:
<a  rel="nofollow" href="http://www.intel.com/support/processors/sb/CS-023143.htm#1">http://www.intel.com/support/processors/sb/CS-023143.htm#1</a>
The i7-720QM entry says I should be getting 27 GFLOPS.

-- 
Darren Cook, Software Researcher/Developer

<a  rel="nofollow" href="http://dcook.org/work/">http://dcook.org/work/</a> (About me and my work)
<a  rel="nofollow" href="http://dcook.org/blogs.html">http://dcook.org/blogs.html</a> (My blogs and articles)

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00035" href="msg00035.html">Re: [tlug] CPU speed: reported vs. actual</a></strong>
<ul><li><em>From:</em> Josh Glover</li></ul></li>
<li><strong><a name="00041" href="msg00041.html">Re: [tlug] CPU speed: reported vs. actual</a></strong>
<ul><li><em>From:</em> Attila Kinali</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00032.html">Re: [tlug] How to proceed with RAID drive failure</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00034.html">Re: [tlug] How to proceed with RAID drive failure</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00030.html">Re: [tlug] How to proceed with RAID drive failure [SOLVED]</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00035.html">Re: [tlug] CPU speed: reported vs. actual</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00033"><strong>Date</strong></a></li>
<li><a href="threads.html#00033"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
