<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [tlug] bash and grep and diff -->
<!--X-From-R13: Oggvyn Yvanyv <nggvynNxvanyv.pu> -->
<!--X-Date: Tue, 10 Aug 2010 21:09:11 +0900 -->
<!--X-Message-Id: 20100810135841.05409294.attila@kinali.ch -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 4C6137CE.2080100@dcook.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00075.html">Date Prev</a>][<a href="msg00077.html">Date Next</a>][<a href="msg00075.html">Thread Prev</a>][<a href="msg00078.html">Thread Next</a>][<a href="maillist.html#00076">Date Index</a>][<a href="threads.html#00076">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] bash and grep and diff</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Tue, 10 Aug 2010 13:58:41 +0200</li>
<li><strong>From</strong>: <strong>Attila Kinali &lt;<a href="mailto:attila@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20bash%20and%20grep%20and%20diff">attila@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] bash and grep and diff</strong></li>
<li>References: &lt;<a href="mailto:4C6137CE.2080100@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20bash%20and%20grep%20and%20diff">4C6137CE.2080100@example.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Tue, 10 Aug 2010 20:28:14 +0900
Darren Cook &lt;darren@example.com&gt; wrote:

&gt; I often want to run diff on just a subset of two files. I.e.
&gt;   grep &quot;ABC&quot; a.txt &gt;tmp1.txt
&gt;   grep &quot;ABC&quot; b.txt &gt;tmp2.txt
&gt;   diff tmp1.txt tmp2.txt
&gt; 
&gt; Is there a way to do that in a single line, without having to create
&gt; temp files?  (From a bash commandline, if at all possible.)  (There is
&gt; only one stdin pipe, so I'm guessing not, but thought it wouldn't hurt
&gt; to ask...)

You can do it by using the sub-shell feature of bash:

diff &lt;(grep blah a.txt) &lt;(grep blah b.txt)

the &lt;() runs a sub-shell and uses /dev/fdX as input file for the
diff command. This needs some kernel feature, which is safe to 
assume as present and pipe compatible input file handling
(ie no seeking done on the files).

You can use even complex sub-shell comands with pipes and everything.
What i often do is something of the kind:

diff &lt;( grep blah a.txt | sed -e /blub// | sort)  &lt;( grep blah b.txt | sed -e /blub// | sort)

Please note that &lt;() is a bashism and doesnt necessarily work on
other shells.

			Attila Kinali
-- 
If you want to walk fast, walk alone.
If you want to walk far, walk together.
		-- African proverb

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00078" href="msg00078.html">Re: [tlug] bash and grep and diff</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
<li><strong><a name="00080" href="msg00080.html">Re: [tlug] bash and grep and diff</a></strong>
<ul><li><em>From:</em> Darren Cook</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00073" href="msg00073.html">[tlug] bash and grep and diff</a></strong>
<ul><li><em>From:</em> Darren Cook</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00075.html">Re: [tlug] bash and grep and diff</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00077.html">Re: [tlug] bash and grep and diff</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00075.html">Re: [tlug] bash and grep and diff</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00078.html">Re: [tlug] bash and grep and diff</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00076"><strong>Date</strong></a></li>
<li><a href="threads.html#00076"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
