<!-- MHonArc v2.5.2 -->
<!--X-Subject: Re: [tlug] General procmail question -->
<!--X-From-R13: Ubqjva Egrjneg <tfgrjnegNtfgrjneg.ubzrhavk.arg> -->
<!--X-Date: Tue, 7 Jan 2003 01:02:37 +0100 -->
<!--X-Message-Id: 20030107010237.7c1aad70.gstewart@example.com -->
<!--X-Content-Type: multipart/signed -->
<!--X-Reference: 20030104132529.48d70e23.gstewart@example.com -->
<!--X-Derived: pgp00013.pgp -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00037.html">Date Prev</a>][<a href="msg00039.html">Date Next</a>][<a href="msg00027.html">Thread Prev</a>][<a href="msg00040.html">Thread Next</a>][<a href="maillist.html#00038">Date Index</a>][<a href="threads.html#00038">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] General procmail question</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Tue, 7 Jan 2003 01:02:37 +0100</li>
<li><strong>From</strong>: <strong>Godwin Stewart &lt;<A HREF="mailto:gstewart@DOMAIN.HIDDEN?SUBJECT=Re%3A%20%5Btlug%5D%20General%20procmail%20question">gstewart@example.com</A>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] General procmail question</strong></li>
<li>References: &lt;<a href="msg00027.html">20030104132529.48d70e23.gstewart@example.com</a>&gt;</li>
<li>Organization: Nope, none here, it's a mess ;o)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
On Sat, 4 Jan 2003 13:25:29 +0100, Godwin Stewart
&lt;gstewart@example.com&gt; wrote to Tokyo LUG &lt;tlug@example.com&gt;:

&gt; What I therefore need to do is get procmail to use mfilter.pl somehow.

For those who are interested, I cracked it with a small program in C I
called &quot;chkmail&quot;.

I've edited my sendmail.cf so that local delivery no longer happens through
procmail but through chkmail instead. chkmail is invoked with exactly the
same command line parameters as procmail. What it does is:

1) Make a note of the command line parameters with which it was invoked.

2) Read the incoming mail from stdin and separate headers from body.

3) Add an &quot;X-PassedThrough:&quot; header so I know it's been processed by
chkmail.

4) Pass the headers through my super-duper spam-stomping Perl script and add
my (in)famous &quot;X-SpamTagged-By:&quot; header if it is spam.

5) Invoke procmail with the command line parameters noted in 1) and pipe the
new headers, then the body through it.

If procmail sees the &quot;X-SpamTagged-By:&quot; header it'll divert the mail to a
&quot;spam&quot; mbox.

Since this filtering now takes place upon local delivery, all three ways a
mail can get into my box are now protected.

Time for bed :)

-- 
G. Stewart   --   gstewart@example.com
                  gstewart@example.com
Registered Linux user #284683

GnuPG key  : BA3D01C6 (pgp.mit.edu)
Fingerprint: C3DF C686 6572 6E59 E3E4  0F40 2B9A 2218 BA3D 01C6
---------------------------------------------------------------
There is a theory which states that if ever anybody discovers exactly
what the Universe is for and why it is here, it will instantly disappear
and be replaced by something even more bizarre and inexplicable. There
is another theory which states that this has already happened.
</pre>
<p><strong>Attachment:
<a href="pgp00013.pgp" ><tt>pgp00013.pgp</tt></a></strong><br>
<em>Description:</em> PGP signature</p>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00040" href="msg00040.html">Re: [tlug] General procmail question</a></strong>
<ul><li><em>From:</em> simon colston</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00027" href="msg00027.html">[tlug] General procmail question</a></strong>
<ul><li><em>From:</em> Godwin Stewart</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00037.html">Re: [tlug] Folding</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00039.html">[tlug] Folding</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00027.html">[tlug] General procmail question</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00040.html">Re: [tlug] General procmail question</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00038"><strong>Date</strong></a></li>
<li><a href="threads.html#00038"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
