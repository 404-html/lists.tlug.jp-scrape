<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [tlug] Alternatives to sed + awk -->
<!--X-From-R13: "Egrcura X. Fheaohyy" <fgrcuraNkrznpf.bet> -->
<!--X-Date: Thu, 10 Mar 2011 14:14:51 +0900 -->
<!--X-Message-Id: 87vczro8pk.fsf@uwakimon.sk.tsukuba.ac.jp -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: AANLkTim_&#45;D9CFYC8TNp33ni85zB+QBA7jV=BpLN=4SbZ@mail.gmail.com -->
<!--X-Reference: 4D6F8D94.9040109@gmail.com -->
<!--X-Reference: 87ei6nl906.fsf@uwakimon.sk.tsukuba.ac.jp -->
<!--X-Reference: AANLkTimk1z41fSvQQmU+7fE&#45;1Krd_kuo3_z&#45;1SYD5rW6@mail.gmail.com -->
<!--X-Reference: 87ipvskik1.fsf@uwakimon.sk.tsukuba.ac.jp -->
<!--X-Reference: AANLkTi=_6DoBt+xfQVOwM6KyKrxxgA_Ec9bhp751f15y@mail.gmail.com -->
<!--X-Reference: 8762rsjkdx.fsf@uwakimon.sk.tsukuba.ac.jp -->
<!--X-Reference: AANLkTik=tHOgTRvcvNd0qsx9&#45;o9MuqBnWUjkWVn+0U_7@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00113.html">Date Prev</a>][<a href="msg00115.html">Date Next</a>][<a href="msg00109.html">Thread Prev</a>][<a href="msg00118.html">Thread Next</a>][<a href="maillist.html#00114">Date Index</a>][<a href="threads.html#00114">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] Alternatives to sed + awk</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Thu, 10 Mar 2011 14:17:27 +0900</li>
<li><strong>From</strong>: <strong>&quot;Stephen J. Turnbull&quot; &lt;<a href="mailto:stephen@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Alternatives%20to%20sed%20%2B%20awk">stephen@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] Alternatives to sed + awk</strong></li>
<li>References: &lt;<a href="mailto:AANLkTim_-D9CFYC8TNp33ni85zB%2BQBA7jV%3DBpLN%3D4SbZ@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Alternatives%20to%20sed%20%2B%20awk">AANLkTim_-D9CFYC8TNp33ni85zB+QBA7jV=BpLN=4SbZ@example.com</a>&gt;	&lt;<a href="mailto:4D6F8D94.9040109@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Alternatives%20to%20sed%20%2B%20awk">4D6F8D94.9040109@example.com</a>&gt;	&lt;<a href="mailto:87ei6nl906.fsf@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Alternatives%20to%20sed%20%2B%20awk">87ei6nl906.fsf@example.com</a>&gt;	&lt;<a href="mailto:AANLkTimk1z41fSvQQmU%2B7fE-1Krd_kuo3_z-1SYD5rW6@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Alternatives%20to%20sed%20%2B%20awk">AANLkTimk1z41fSvQQmU+7fE-1Krd_kuo3_z-1SYD5rW6@example.com</a>&gt;	&lt;<a href="mailto:87ipvskik1.fsf@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Alternatives%20to%20sed%20%2B%20awk">87ipvskik1.fsf@example.com</a>&gt;	&lt;<a href="mailto:AANLkTi%3D_6DoBt%2BxfQVOwM6KyKrxxgA_Ec9bhp751f15y@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Alternatives%20to%20sed%20%2B%20awk">AANLkTi=_6DoBt+xfQVOwM6KyKrxxgA_Ec9bhp751f15y@example.com</a>&gt;	&lt;<a href="mailto:8762rsjkdx.fsf@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Alternatives%20to%20sed%20%2B%20awk">8762rsjkdx.fsf@example.com</a>&gt;	&lt;<a href="mailto:AANLkTik%3DtHOgTRvcvNd0qsx9-o9MuqBnWUjkWVn%2B0U_7@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Alternatives%20to%20sed%20%2B%20awk">AANLkTik=tHOgTRvcvNd0qsx9-o9MuqBnWUjkWVn+0U_7@example.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Josh Glover writes:

 &gt; &gt; So *that* kind of &quot;power&quot; *subtracts* from expressiveness.
 &gt; 
 &gt; One use of Ruby's power tools that certainly adds to expressiveness is
 &gt; defining a domain-specific language without needing a parser.

It is admittedly relatively hard to add syntax in Python.  However,
again it seems to me to be easy to abuse.  &quot;Use in haste, repent at
leisure&quot; seems to be the watchword of programmers.  And experience
shows that successful systems have decades of leisure for repentence;
experienced COBOL programers demand high salaries even today.

 &gt; Lisp is also good for that, in fact most non-trivial Lisp systems
 &gt; are built of one or more DSLs woven together (at least according to
 &gt; Paul Graham and &quot;The Scheme Programming Language&quot;--I have no
 &gt; experience writing production Lisp).

That's another way of expressing what I wrote:

 &gt; &gt; This is especially true of Lisp, where pretty much every large
 &gt; &gt; program is written in a language which shares the very basic &quot;an
 &gt; &gt; expression is a list starting with a function and followed by
 &gt; &gt; expressions&quot; syntax, but most expressions are functions with very
 &gt; &gt; specific requirements on the arguments, thus looking a lot like
 &gt; &gt; syntax.

However, the basic syntax of Lisp aka &quot;Lots of Irritating Single
Parentheses&quot; is detested by many.  Python takes the same approach:
using classes and methods it's possible to give objects many kinds of
behavior, but you mostly have to invoke them as function calls.
Whether you're willing to call that a DSL or not is a matter of taste,
I suppose.  Graham and I do.  Lots of people who program in Python
don't, so python-ideas gets a lot of proposals inspired by Ruby
features like &quot;instance_eval&quot;.

 &gt; &gt; Adding methods to instances seems philosophically pointless.
 &gt; 
 &gt; It is quite useful for unit testing, when you don't add methods but
 &gt; modify them. :)

Modifying methods can be done by subclassing.  However, Python's
approach is to decorate them:

# func must be nullary.  func with args is easy to handle but requires
# Python-specific syntax so I omit it.  Python 3: print is function.
def trace(func):
    if debug:
        def wrapped():
            print(&quot;Entering %s&quot; % func.__name)
            result = func()
            print(&quot;Leaving %s&quot; % func.__name)
            return result
        return wrapped
    else:
        return func

# This simple facility cannot be toggled at runtime.
# Rewriting trace can allow that at some cost in runtime efficiency.
debug = True
class Bruce(object):
    @trace
    def bruce(self):
        pass

The &quot;@trace followed by def idiom&quot; is equivalent to

    def bruce(self):
        pass
    self.bruce = trace(self.bruce)

(This is like Scheme, where a function identifier is one whose binding
is a function object, and the same identifier can't be used as a value
identifier without destroying the function binding, and unlike Lisp,
where identifiers have separate value and function bindings.)

BTW, since Ruby apparently allows you to omit parentheses, how do you
distinguish between returning the value of a function call and the function
itself, eg, in the argument to the trace invocation above?

 &gt; &gt; If you want to provide an operation on an instance, it seems to me
 &gt; &gt; that you either want to systematically create more similar instances,
 &gt; &gt; in which case you should subclass (or monkey-patch the class), or
 &gt; &gt; you don't, in which case use an ordinary function.
 &gt; 
 &gt; Or a lambda. :)

Explicit lambdas are something I've come to be less appreciative of
the longer I use Lisp.  The canonical example in Emacs is

(add-hook 'text-mode-hook (lambda () (auto-fill-mode 1)))

It turns out that it's much more convenient in the long run to do

(add-hook 'text-mode-hook (defun auto-fill-mode-on () (auto-fill-mode 1)))

because the latter call is idempotent (add-hook does nothing if the
value is already present, where &quot;the value&quot; means the same object; but
in the lambda version, the lambda expr is a new list each time the
add-hook expr is read, while the value of the defun is the function
symbol, and symbols are unique in the same Emacs process).

That means that you can reload the whole file containing the add-hook
without worrying about cluttering up your text-mode-hook.  (In this
case (auto-fill-mode 1) is itself idempotent, so no harm is done
except for clutter.  But you can imagine cases where non-idempotency
of a configuration action could lead to disaster, I'm sure.)

Of course, defun itself is just a macro that (among other things) does
the equivalent of

(put 'auto-fill-mode-on 'function-definition (lambda () (auto-fill-mode 1))

so there will always be *implicit* lambdas in Lisp.  Lisp also
provides flet (local function binding) and macrolet (local macro
binding), so you can avoid polluting the global or package namespace
if your intent is simply to refactor a single function.

 &gt; def test_crappy_class
 &gt;   crap = CrappyClass.new
 &gt;   assert_equal 0, crap.instance_eval{@example.com
 &gt;   crap.increment
 &gt;   assert_equal 1, crap.instance_eval{@example.com
 &gt; end

But, IIUC, in Python the member `value' is not hidden, so you just write

def test_crappy_class
    crap = CrappyClass.new
    assert_equal(0, crap.value)
    crap.increment()
    assert_equal(1, crap.value)

 &gt; class_eval does the same thing, but on a class object. Rails uses
 &gt; class_eval to provide accessors for model objects automatically based
 &gt; on a database table layout, in some way that is roughly equivalent to
 &gt; this:
 &gt; 
 &gt; tables.each do |table|
 &gt;   columns = columns_for table
 &gt;   columns.each do |column|
 &gt;     table.to_class.class_eval &quot;def #{column}; @#{column} end; def
 &gt; #{column}=(val); @#{column} = val end&quot;
 &gt;     end
 &gt;   end
 &gt; end

That end&quot; end end end looks like gdb. ;-)

I don't know how this is done in Python frameworks offhand, but
it is done somehow.

I see the attraction of the Ruby features for quick hacking, but I
also see the attraction of two-year-olds to swimming pools not
surrounded by fences.  The latter is a disaster; I hope you never
regret succumbing to the temptation of monkey-patching-supported-by-
syntax. ;-)

 &gt; Right, Firefox is basically an application platform now. Except for
 &gt; the C core, most of it is XUL and Javascript.

Thanks for the confirmation.

 &gt; &gt; It's not really obvious to me that any of the programs that Adamson
 &gt; &gt; mentions are actually written in C, anyway.  They're written in &quot;Xt&quot; or
 &gt; &gt; &quot;GTK+&quot; or &quot;wxWidgets&quot; or whatever.
 &gt; 
 &gt; That is an interesting view. I can't say that I disagree, which may
 &gt; actually be a strength of C.  One wouldn't be able--IMO--to say the
 &gt; same about a program written in Java, regardless of which widget
 &gt; framework you were developing on. The Java-ness is just so
 &gt; pervasive... *shudder* ;)

Well, the C-ness of an Xt program is pretty pervasive, too.  But C
does give nearly complete access to the instruction set, and a lot of
freedom in organizing your program.  So you don't feel as confined
when you write C as you do when you write Java.


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00118" href="msg00118.html">Re: [tlug] Alternatives to sed + awk</a></strong>
<ul><li><em>From:</em> Josh Glover</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00017" href="msg00017.html">[tlug] Alternatives to sed + awk</a></strong>
<ul><li><em>From:</em> Nguyen Vu Hung</li></ul></li>
<li><strong><a name="00037" href="msg00037.html">Re: [tlug] Alternatives to sed + awk</a></strong>
<ul><li><em>From:</em> Alexander Danilov</li></ul></li>
<li><strong><a name="00047" href="msg00047.html">Re: [tlug] Alternatives to sed + awk</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
<li><strong><a name="00072" href="msg00072.html">Re: [tlug] Alternatives to sed + awk</a></strong>
<ul><li><em>From:</em> Alexander Danilov</li></ul></li>
<li><strong><a name="00081" href="msg00081.html">Re: [tlug] Alternatives to sed + awk</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
<li><strong><a name="00083" href="msg00083.html">Re: [tlug] Alternatives to sed + awk</a></strong>
<ul><li><em>From:</em> Josh Glover</li></ul></li>
<li><strong><a name="00108" href="msg00108.html">Re: [tlug] Alternatives to sed + awk</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
<li><strong><a name="00109" href="msg00109.html">Re: [tlug] Alternatives to sed + awk</a></strong>
<ul><li><em>From:</em> Josh Glover</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00113.html">Re: [tlug] Assembly Language v C and Embedded Development</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00115.html">Re: [tlug] Assembly Language v C and Embedded Development</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00109.html">Re: [tlug] Alternatives to sed + awk</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00118.html">Re: [tlug] Alternatives to sed + awk</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00114"><strong>Date</strong></a></li>
<li><a href="threads.html#00114"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
