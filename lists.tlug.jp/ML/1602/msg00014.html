<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [tlug] Tokyo ISP Throttling? Why does my internet speed increase so much by setting up a proxy? -->
<!--X-From-R13: Fvz Afohea <gvzNbfohea.pbz> -->
<!--X-Date: Mon, 22 Feb 2016 12:11:46 +0900 -->
<!--X-Message-Id: alpine.LRH.2.20.1602221011460.8798@fuji.osburn.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CAAcd6GqhTNOq=vmX7Yr4uEZM5Ef1zxqRdh&#45;kOe612vis3j&#45;D6A@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00013.html">Date Prev</a>][<a href="msg00015.html">Date Next</a>][<a href="msg00012.html">Thread Prev</a>][<a href="msg00015.html">Thread Next</a>][<a href="maillist.html#00014">Date Index</a>][<a href="threads.html#00014">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] Tokyo ISP Throttling? Why does my internet speed increase so much by setting up a proxy?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Mon, 22 Feb 2016 12:06:16 +0900 (JST)</li>
<li><strong>From</strong>: <strong>Tim Osburn &lt;<a href="mailto:tim@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Tokyo%20ISP%20Throttling%3F%20Why%20does%20my%20internet%20speed%20increase%20so%20much%20by%20setting%20up%20a%20proxy%3F">tim@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] Tokyo ISP Throttling? Why does my internet speed increase so much by setting up a proxy?</strong></li>
<li>References: &lt;CAAcd6GqhTNOq=vmX7Yr4uEZM5Ef1zxqRdh-kOe612vis3j-D6A@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">
On Sun, 21 Feb 2016, Jawaad Mahmood wrote:

</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
I'm very confused about this.
I am running NTT Flez Hikari to my mansion; it's slow as molasses.

</pre><tt>However, today I setup a Squid3 proxy server on a cloud server I own. When I 
</tt><tt>connected to that (and connected my wife), all of a sudden all sorts of slow / 
</tt><tt>dropped connection problems went away.
</tt></blockquote><pre style="margin: 0em;">

Jawaad,
	Sorry for the long reply, this Email sorta grew and got out of hand. :)

</pre><tt>	You mentioned NTT Flez Hikari, which I believe NTT only provides the 
</tt><tt>line/pipe between your home modem and the provider/ISP (NTT is basically like a 
</tt><tt>layer 2 provider in a sense). Then you also have the provider/ISP which you 
</tt><tt>didn't mention which provides the internet over that pipe (layer 3 and up). If 
</tt><tt>it's not consistent I would probably rule out NTT as the issue and look at your 
</tt><tt>ISP. But that may not always be the case.
</tt><pre style="margin: 0em;">

	Who is your ISP
	Is your traffic to your squid proxy encrypted?

1) Are you using WIFI at home when there is slowness? There could be RF
   interference from neighbors Access Points or cordless phones if that's the
   case causing poor performance and packet loss. If so try plugging in a cable
   and not using wifi.

2) Perhaps your route to the destination has changed. It's possible your
   provider/ISP has poor internet peering to their providers and the route to
   where you are going is sub optimal or the peering point is congested,
   dropping packets or taking on errors. You might also provide a 100 iterations
   for the destinations through a program called MTR (Matt's TraceRoute). It
   might help show you points along the path that may be congested or suspect of
   poor quality.

	Unix
	<a  rel="nofollow" href="https://www.bitwizard.nl/mtr/">https://www.bitwizard.nl/mtr/</a>
	<a  rel="nofollow" href="https://github.com/traviscross/mtr">https://github.com/traviscross/mtr</a>

	Windows
	<a  rel="nofollow" href="http://winmtr.net/download-winmtr/">http://winmtr.net/download-winmtr/</a>
	<a  rel="nofollow" href="https://sourceforge.net/projects/winmtr/files/Latest/">https://sourceforge.net/projects/winmtr/files/Latest/</a>

3) Your provider/ISP may be traffic shaping, throttling or doing some sort of
   bandwidth management/deprioritization on specific traffic that is effecting
   your through put when not using your proxy. Then when you use your proxy they
   don't see that traffic or touch it since it's either on a unknown WEB port or
   because it's encrypted and they have no idea what it is. A large mobile
   provider in the US did this or may be still doing this on mobile phones. They
   also at one pointed added in additional identifiable headers to web requests
   that were not encrypted when you browsed to sites.  Something like the below
   can allow you to detect that.

	Example:
		<a  rel="nofollow" href="http://www.osburn.com/info/">http://www.osburn.com/info/</a>
		<a  rel="nofollow" href="https://www.osburn.com/info/">https://www.osburn.com/info/</a>

</pre><tt>	Is it also possible your proxy is compressing your data which in turn 
</tt><tt>results if typically what looks like faster connectivity?
</tt><pre style="margin: 0em;">

4) It's possible they are doing packet inspection so when you tunnel to your
   device using TLS/SSL they can not see into that so they just pass it without
   inspecting or adding latency to that.

5) Have you eliminated the possibility of something &quot;local&quot; between your PC and
   your NTT Modem that might be effecting your traffic? In line or software
   based? Try rebooting your router and/or modem. Disable your firewall/anti
   virus software as quick test. Does it only effect your computer? Also it's
   very important to also check your MTU settings on your device that connects
   to your provider if that they are doing any sort of encapsulation between you
   and them. Not having that right will result in dropped packets and what might
   seem as slow connectivity. Your provider should be able to tell you what your
   MTU should be, if PPPoE then you might try a MTU setting of 1454 instead of
   the tyical default ~1490.

6) Like others have mentioned it is also possible others in your building could
   be consuming lots of internet as well. If your mansion is anything like ours
   where there are lots of people in it, it's likely NTT has several fibers into
   your building. On each fiber (for example our building) they typically will
   put up to 16 customers on a single 1GigE fiber. Customers in our building
   have several speeds to choose from which max out at 100mbps up/down over. It
   could be if you complain and they have multiple fibers into the building,
   they might be able to move you over to another fiber that might not be as
   congested as the one you are on. Of course that's only if that's really is
   the case. It also may take several calls and complaints to motivate them to
   do that also as they will need to send someone out to your building to
   physically move your connection over to another node. Also in our building
   NTT is not the only &quot;line&quot; fiber/teleco. At our building there 2 other
   telecos that have fiber into our building. Then also each of those telecos
   have a list of providers/ISPs you can then choose from. Lots of choices and
   sometimes hard to know which to pick. So maybe you might have more options
   then you know, talking to your building manager might help you discover if
   you have additional choices other then NTT as a line telco. Switching
   providers may also be what you need to do if it turns out to be the provider
   and not the line carrier.

Just to clarify the terms:
LINE = The circuit between your outlet on the wall to your ISP Provider
ISP/PROVIDER = the ISP that is proving you IP access to the internet (layer 3)

</pre><tt>	I've been told that in Japan, these are typically not the same 
</tt><tt>companies. Where as in the US they typically are the same company.
</tt><pre style="margin: 0em;">

6) You just might give your provider/ISP a call and tell them whats happening,
   they may have something miss-configured or know about a sub optimal routing
   issue that is effecting their customers.

7) Do you have a encrypted VPN service you can also test, how does it compare
   when using that? Try MTR with and without a full on encrypted VPN and see how
   your times look using that as that will force you to take a different path.

Tim Osburn
<a  rel="nofollow" href="http://www.m2os.com">http://www.m2os.com</a>
W7RSZ / JG1MBR

<a  rel="nofollow" href="https://instagram.com/tim.osburn/">https://instagram.com/tim.osburn/</a>

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00015" href="msg00015.html">Re: [tlug] Tokyo ISP Throttling? Why does my internet speed increase so much by setting up a proxy?</a></strong>
<ul><li><em>From:</em> Tim Osburn</li></ul></li>
<li><strong><a name="00017" href="msg00017.html">Re: [tlug] Tokyo ISP Throttling? Why does my internet speed increase so much by setting up a proxy?</a></strong>
<ul><li><em>From:</em> Stephen Lee</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00009" href="msg00009.html">[tlug] Tokyo ISP Throttling? Why does my internet speed increase so much by setting up a proxy?</a></strong>
<ul><li><em>From:</em> Jawaad Mahmood</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00013.html">Re: [tlug] Tokyo ISP Throttling? Why does my internet speed increase so much by setting up a proxy?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00015.html">Re: [tlug] Tokyo ISP Throttling? Why does my internet speed increase so much by setting up a proxy?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00012.html">Re: [tlug] Tokyo ISP Throttling? Why does my internet speed increase so much by setting up a proxy?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00015.html">Re: [tlug] Tokyo ISP Throttling? Why does my internet speed increase so much by setting up a proxy?</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00014"><strong>Date</strong></a></li>
<li><a href="threads.html#00014"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
