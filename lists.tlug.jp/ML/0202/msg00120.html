<!-- MHonArc v2.5.2 -->
<!--X-Subject: Re: [tlug] Problem displaying Japanese chars on Linux -->
<!--X-From-R13: Oagbal Egnpr <f45652001Nlnubb.pbz> -->
<!--X-Date: Wed, 13 Feb 2002 08:07:08 +0900 (JST) -->
<!--X-Message-Id: 20020213080357.04f65982.s45652001@example.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: DAV74mO030Ws6Wxm5LE000051e3@example.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="TLUG webmaster">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<!--X-Body-Begin-->
<!--X-User-Header-->
<P>
<font color="blue">
Support open source code!
</font>
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00119.html">Date Prev</a>][<a href="msg00121.html">Date Next</a>][<a href="msg00118.html">Thread Prev</a>][<a href="msg00145.html">Thread Next</a>][<a href="maillist.html#00120">Date Index</a>][<a href="threads.html#00120">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] Problem displaying Japanese chars on Linux</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li><strong>To</strong>: <strong><A HREF="mailto:tlug@DOMAIN.HIDDEN">tlug@example.com</A></strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] Problem displaying Japanese chars on Linux</strong></li>
<li><strong>From</strong>: <strong>Antony Stace &lt;<A HREF="mailto:s45652001@DOMAIN.HIDDEN">s45652001@example.com</A>&gt;</strong></li>
<li>Date: Wed, 13 Feb 2002 08:03:57 +0900</li>
<li>Content-transfer-encoding: 7bit</li>
<li>Content-type: text/plain; charset=US-ASCII</li>
<li>In-reply-to: &lt;<a href="msg00118.html">DAV74mO030Ws6Wxm5LE000051e3@example.com</a>&gt;</li>
<li>References: &lt;<a href="msg00118.html">DAV74mO030Ws6Wxm5LE000051e3@example.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Maarten

Is the environment settings the same when you run the program in  /etc/rc5.d/ and from the command line?
Also..there is a Tokyo java mailing list, it might be a good idea to post it on that list.  For details

www.ninjava.org

Cheers

Tony




On Tue, 12 Feb 2002 16:19:52 -0000
&quot;Maarten Janson&quot; &lt;maartenjanson@example.com&gt; wrote:

&gt; Hi,
&gt; 
&gt; I'm involved in localizing an application that uses servlets to send data to client browsers.
&gt; The Application is an Agent that runs as a deamon on Linux(Turbo and RH). The Agent in written in java and works like this:
&gt; 
&gt; from a Windows client you point a web browser to the Agent on the Japanese Linux machine and the Agent determines the locale of the client and uses this info to return the correct strings by using resource bundles. 
&gt; 
&gt; The problem is that when the Agent is started during boot of the Japanese Linux machine and you point the browser on a Japanese windows machine to it you see questionmarks. If I then stop the Agent on the Linux machine and restart then the client displays proper Japanese characters. I did some debugging and wrote a small java program (test_resource.java) to display this behaviour, I have listed test_resource.java below, together with the 2 properties files. 
&gt; 
&gt; If you run test_resource during boot (create S99Test in /etc/rc5.d and have S99Test to run test_resource and redirect output to a file) then you will see that the correct properties file is loaded and that the english chars in the resource string appear fine but the japanese chars appear as ????? If you then run test_resource from an xterm window the the japanese chars display fine as well.
&gt; 
&gt; In test_resource I set the default Locale in order to make sure it is set correctly (see bug ID4127375)
&gt; 
&gt; Does anyone have an idea what happens here? Is there a reason for the fact that if the agent gets started during boot that it can not display japanese chars and if started from a console it can?
&gt; 
&gt; Thanks
&gt; 
&gt; Maarten
&gt; 
&gt; ---- test_resource.java ----
&gt; import java.text.*;
&gt; import java.util.*;
&gt; 
&gt; public class test_resource
&gt; {
&gt; public static void main(String args[])
&gt; {
&gt; String theResourceFile = &quot;test_prop&quot;;
&gt; String kName = &quot;name&quot;;
&gt; 
&gt; String[] theResourceKeys =
&gt; {
&gt; kName
&gt; };
&gt; System.out.println(&quot;Locale.getDefault = &quot; + Locale.getDefault().toString());
&gt; Locale theLocale = new Locale(&quot;ja&quot;,&quot;JP&quot;);
&gt; 
&gt; Locale.setDefault(theLocale);
&gt; System.out.println(&quot;Locale.getDefault after setDefault = &quot; + Locale.getDefault().toString()); 
&gt; 
&gt; 
&gt; ResourceBundle bundle = ResourceBundle.getBundle(theResourceFile, theLocale);
&gt; System.out.println(&quot;bundle = ResourceBundle.getBundle(test_prop, Locale(ja,JP))&quot;);
&gt; String Name = bundle.getString(kName);
&gt; System.out.println(&quot;String Name = bundle.getString(kName);&quot;);
&gt; System.out.println(&quot;Name = &quot; + Name);
&gt; 
&gt; 
&gt; 
&gt; } 
&gt; 
&gt; 
&gt; }
&gt; 
&gt; ---- test_prop_ja.properties
&gt; name=begin \uff95\uff70\uff7b\uff9e\u540d end
&gt; 
&gt; --- test_prop.properties
&gt; name=name
&gt; 
&gt; 
&gt; 
&gt; 


_________________________________________________________
Do You Yahoo!?
Get your free @example.com address at <A  HREF="http://mail.yahoo.com">http://mail.yahoo.com</A>

</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00118" href="msg00118.html">[tlug] Problem displaying Japanese chars on Linux</a></strong>
<ul><li><em>From:</em> Maarten Janson</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00119.html">Re: [tlug] Making new boot image for RH cd...</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00121.html">Re: TLUG ML prob Q (was Re: [tlug] writing to USB storage device ...)</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00118.html">[tlug] Problem displaying Japanese chars on Linux</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00145.html">Re: [tlug] Problem displaying Japanese chars on Linux</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00120"><strong>Date</strong></a></li>
<li><a href="threads.html#00120"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
