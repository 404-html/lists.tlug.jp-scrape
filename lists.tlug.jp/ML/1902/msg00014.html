<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [tlug] Unzipping archives with japanese filenames in an unknown encoding in a smarter way? -->
<!--X-From-R13: yvfgfN2vba.qr -->
<!--X-Date: Fri, 08 Feb 2019 18:26:57 +0900 -->
<!--X-Message-Id: 20190208092112.GA30604@wismut -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: CACX149=m4MviLjqcMeo26UB8aCqmTm2=7ND_81atF8T=oABK4Q@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00013.html">Date Prev</a>][<a href="msg00015.html">Date Next</a>][<a href="msg00012.html">Thread Prev</a>][<a href="msg00015.html">Thread Next</a>][<a href="maillist.html#00014">Date Index</a>][<a href="threads.html#00014">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] Unzipping archives with japanese filenames in an unknown encoding in a smarter way?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Fri, 8 Feb 2019 10:21:12 +0100</li>
<li><strong>From</strong>: <strong><a href="mailto:lists@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Unzipping%20archives%20with%20japanese%20filenames%20in%20an%20unknown%20encoding%20in%20a%20smarter%20way%3F">lists@example.com</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] Unzipping archives with japanese filenames in an unknown encoding in a smarter way?</strong></li>
<li>References: &lt;CACX149=m4MviLjqcMeo26UB8aCqmTm2=7ND_81atF8T=oABK4Q@mail.gmail.com&gt;</li>
<li>User-agent: Mutt/1.11.3 (2019-02-01)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Fri, Feb 08, 2019 at 04:37:12PM +0900, Claus Aranha wrote:
&gt; Hello!
&gt; 
&gt; What is the best way to unzip a file that may have filenames in
&gt; Japanese in an arbitrary encoding and avoid getting mojibake?
&gt; 
&gt; I can use -O on unzip to tell what encoding I want (UTF-8, EUC,
&gt; Shift_JIS, Windows_31J (???)) but trying the different encodings until
&gt; finding one that works just seems inefficient.
&gt; 
&gt; Is there a better way?

As far as I understand, the -O switch does only specify which encoding
the file names inside the ZIP file are read as; the output file name
encoding will always be the one your system uses. So it's a conversion
from an unknown encoding and the tool should guess the source file name
encoding automatically.

(The -O switch is an Ubuntu patch BTW. Original versions of unzip don't
have it.)

Guessing the text encoding of an unknown byte sequence is guesswork and
can only rely on heuristics, like the chardet algorithm in libuchardet
(if the source encoding deviates from a standard).

I don't know specifically if any ZIP program supports sniffing source
file name encodings; unzip likely doesn't. If you find a program that
does that'd be great. Otherwise, I could imagine a wrapper written in
e.g. Python that opens the ZIP file, goes over all file names in it and
applies an encoding detection routine to each (may yield different
results across multiple files) and then calls unzip with the correct
encoding, or extracts files one by one.

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00012" href="msg00012.html">[tlug] Unzipping archives with japanese filenames in an unknown encoding in a smarter way?</a></strong>
<ul><li><em>From:</em> Claus Aranha</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00013.html">Re: [tlug] Why change a linux server's locale?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00015.html">Re: [tlug] Unzipping archives with japanese filenames in an unknown encoding in a smarter way?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00012.html">[tlug] Unzipping archives with japanese filenames in an unknown encoding in a smarter way?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00015.html">Re: [tlug] Unzipping archives with japanese filenames in an unknown encoding in a smarter way?</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00014"><strong>Date</strong></a></li>
<li><a href="threads.html#00014"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
