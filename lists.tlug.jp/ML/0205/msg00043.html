<!-- MHonArc v2.5.2 -->
<!--X-Subject: [tlug] logrotate with bzip2 -->
<!--X-From-R13: PAFv <9915104gNlxh.xbor&#45;h.np.wc> -->
<!--X-Date: Sun, 12 May 2002 23:58:05 +0900 (JST) -->
<!--X-Message-Id: 3CDE8324.7D508CB7@example.com&#45;u.ac.jp -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00042.html">Date Prev</a>][<a href="msg00044.html">Date Next</a>][<a href="msg00040.html">Thread Prev</a>][<a href="msg00044.html">Thread Next</a>][<a href="maillist.html#00043">Date Index</a>][<a href="threads.html#00043">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[tlug] logrotate with bzip2</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Sun, 12 May 2002 23:58:44 +0900</li>
<li><strong>From</strong>: <strong>BOTi &lt;<A HREF="mailto:9915104t@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20logrotate%20with%20bzip2">9915104t@example.com</A>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>[tlug] logrotate with bzip2</strong></li>
<li>Organization: Kobe University, Japan</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Evening,

I changed logrotate to compress old logfiles as bzip2. Added the
following options to /etc/logrotate.conf
compress
compresscmd /usr/bin/bzip2
uncompresscmd /usr/bin/bunzip2
compressoptions "-9"
compressext "bz2"

The problem is that logrotate doesn't recognize bz2 compressed logfiles
like daemon.log.1.bz2 and doesn't rename it to daemon.log.2.bz2.
So when it comes to rotation it moves daemon.log to daemon.log.1 and
tries to compress it, but bzip2 fails.
I get an error from bzip2:
bzip2: Output file /var/log/daemon.log.1.bz2 already exists.
failed to compress log /var/log/daemon.log.1

The option 'compressext ".bz2"' didn't work either.

tia
--
B0Ti.
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00044" href="msg00044.html">Re: [tlug] logrotate with bzip2</a></strong>
<ul><li><em>From:</em> BOTi</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00042.html">Re: [tlug] LPI test on Linux World</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00044.html">Re: [tlug] logrotate with bzip2</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00040.html">[tlug] u/mount problems</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00044.html">Re: [tlug] logrotate with bzip2</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00043"><strong>Date</strong></a></li>
<li><a href="threads.html#00043"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
