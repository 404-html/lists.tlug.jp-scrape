<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [tlug] multibyte tr (or i18n coreutils) -->
<!--X-From-R13: Xha&#45;Rnv Pngrf&#45;Ybonfuvtnjn <wq.yvfgfNxhehggn.arg> -->
<!--X-Date: Mon, 19 Apr 2010 05:53:00 +0900 -->
<!--X-Message-Id: r2w12ae855b1004181352i770f9546qe5cbaa5da9a568e6@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: 20100418175123.GA8181@wasi.karlov.mff.cuni.cz -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00078.html">Date Prev</a>][<a href="msg00080.html">Date Next</a>][<a href="msg00081.html">Thread Prev</a>][<a href="msg00080.html">Thread Next</a>][<a href="maillist.html#00079">Date Index</a>][<a href="threads.html#00079">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] multibyte tr (or i18n coreutils)</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Sun, 18 Apr 2010 16:52:57 -0400</li>
<li><strong>From</strong>: <strong>Jun-Dai Bates-Kobashigawa &lt;<a href="mailto:jd.lists@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20multibyte%20tr%20%28or%20i18n%20coreutils%29">jd.lists@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] multibyte tr (or i18n coreutils)</strong></li>
<li>References: &lt;<a href="mailto:20100418175123.GA8181@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20multibyte%20tr%20%28or%20i18n%20coreutils%29">20100418175123.GA8181@example.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div>It&#39;s an interesting problem, Michal.  So the Linux boxes I have at hand (CentOS 5.3 and Debian 4.0) only show version 5.9.7:</div><div><br></div><div><div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace">$ tr --version</font></div>
<div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace">tr (GNU coreutils) 5.97</font></div><div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace">Copyright (C) 2006 Free Software Foundation, Inc.</font></div>
<div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace">This is free software.  You may redistribute copies of it under the terms of</font></div><div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace">the GNU General Public License &lt;<a rel="nofollow" href="http://www.gnu.org/licenses/gpl.html">http://www.gnu.org/licenses/gpl.html</a>&gt;.</font></div>
<div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace">There is NO WARRANTY, to the extent permitted by law.</font></div><div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace"><br>
</font></div><div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace">Written by Jim Meyering.</font></div></div><div><br></div><div>Clearly it&#39;s not handling the multibyte chars:</div><div><div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace">$ LC_ALL=cs_CZ.UTF-8 echo &#39;ššš&#39; | tr &#39;š&#39; &#39;123&#39;</font></div>
<div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace">121212</font></div></div><div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace"><div>$ echo &#39;僕はサチだ&#39; | tr &#39;サチ&#39; &#39;純苔&#39;</div>
<div>動蔯贔苔蔠</div><div><div>$ echo &#39;僕はサチだ&#39; | sed s/サチ/純苔/</div><div>僕は純苔だ</div></div><div><br></div><div><span class="Apple-style-span" style="font-family: arial; ">I&#39;m a bit of a Linux novice, but sed should work as well, yes?  Much more laborious than using tr, but depending on what you&#39;re doing, the POSIX equivalence classes might help:</span></div>
<div><span class="Apple-style-span" style="font-family: arial; "><div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace"><div>$ echo &quot;sššsqwerty&quot; | sed s/[[=s=]]/1/g</div><div>1111qwerty</div>
<div><br></div><div><span class="Apple-style-span" style="font-family: arial; ">Or with a bit more typing than your tr command:</span></div><div><div>$ export REPLACEMENTS=&quot;s/[abcč]/2/g s/[dďeěf]/3/g s/[ghií]/4/g s/[jkl]/5/g s/[mnňoó]/6/g s/[pqrřsš]/7/g s/[tťuúůvwxyýzž]/8/g&quot;</div>
<div>$ export STRING=&#39;ššššabe&#39;</div><div>$ echo $STRING</div><div>ššššabe</div><div>$ for arg in $REPLACEMENTS; do export STRING=`echo $STRING | sed $arg`; done</div><div>$ echo $STRING</div><div>7777223</div></div>
<div><br></div></font></div></span></div><div><font class="Apple-style-span" face="arial"><font class="Apple-style-span" face="&#39;courier new&#39;, monospace">* * * * *</font></font></div></font></div><div><br></div><div>
Interestingly, on OSX it works fine:</div><div><div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace">$ echo &quot;ššš&quot; | tr &#39;š&#39; &#39;12&#39;</font></div><div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace">111</font></div>
</div><div><div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace">$ LC_ALL=cs_CZ.UTF-8 echo &quot;ššš&quot; | tr &#39;[a,b,c,č,d,ď,e,ě,f,g,h,i,í,j,k,l,m,n,ň,o,ó,p,q,r,ř,s,š,t,ť,u,ú,ů,v,w,x,y,ý,z,ž]&#39; &#39;[2,2,2,2,3,3,3,3,3,4,4,4,4,5,5,5,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9]&#39;</font></div>
<div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace">777</font></div></div><div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace"><div>$ echo &#39;僕はサチだ&#39; | tr &#39;サチ&#39; &#39;純苔&#39;</div>
<div>僕は純苔だ</div><div><br></div></font></div><div><font class="Apple-style-span" face="&#39;courier new&#39;, monospace"><br></font></div><div>(There&#39;s no --version option in the OSX one)</div><div>
<br></div><div>Incidentally, the man page on my Linux box makes no mention of supporting LC_ALL, but the OSX one does.  Also, I&#39;m not sure which version this refers to, but I did find this:</div><div>&quot;<span class="Apple-style-span" style="font-family: Times; font-size: medium; ">Currently </span><span class="Apple-style-span" style="font-family: Times; font-size: medium; "><samp><span class="command">tr</span></samp></span><span class="Apple-style-span" style="font-family: Times; font-size: medium; "> fully supports only single-byte characters. Eventually it will support multibyte characters; when it does, the </span><span class="Apple-style-span" style="font-family: Times; font-size: medium; "><samp><span class="option">-C</span></samp></span><span class="Apple-style-span" style="font-family: Times; font-size: medium; "> option will cause it to complement the set of characters, whereas </span><span class="Apple-style-span" style="font-family: Times; font-size: medium; "><samp><span class="option">-c</span></samp></span><span class="Apple-style-span" style="font-family: Times; font-size: medium; "> will cause it to complement the set of values. This distinction will matter only when some values are not characters, and this is possible only in locales using multibyte encodings when the input contains encoding errors.&quot;</span></div>
<div><span class="Apple-style-span" style="font-family: Times; font-size: medium; "><br></span></div><div><a rel="nofollow" href="http://www.gnu.org/software/coreutils/manual/html_node/tr-invocation.html">http://www.gnu.org/software/coreutils/manual/html_node/tr-invocation.html</a></div>
<div><br></div><div>So I guess maybe the answer is that the Gnu version doesn&#39;t, but the BSD (and I&#39;m guessing Solaris) version does?</div><div><br></div><div>  Jun-Dai</div><div><br></div><br><br><div class="gmail_quote">
2010/4/18 Michal Hajek <span dir="ltr">&lt;<a rel="nofollow" href="mailto:hajek1@example.com">hajek1@example.com</a>&gt;</span><br><blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex;">
Hello,<br>
<br>
I need something like:<br>
tr \<br>
&#39;[a,b,c,č,d,ď,e,ě,f,g,h,i,í,j,k,l,m,n,ň,o,ó,p,q,r,ř,s,š,t,ť,u,ú,ů,v,w,x,y,ý,z,ž]&#39;\<br>
&#39;[2,2,2,2,3,3,3,3,3,4,4,4,4,5,5,5,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9]&#39;<br>
<br>
but tr[1] does not seem to understand multibyte characters.<br>
For example:<br>
LC_ALL=cs_CZ.UTF-8 echo &quot;ššš&quot; |tr \<br>
&#39;[a,b,c,č,d,ď,e,ě,f,g,h,i,í,j,k,l,m,n,ň,o,ó,p,q,r,ř,s,š,t,ť,u,ú,ů,v,w,x,y,ý,z,ž]&#39;\<br>
&#39;[2,2,2,2,3,3,3,3,3,4,4,4,4,5,5,5,6,6,6,6,6,7,7,7,7,7,7,8,8,8,8,8,8,9,9,9,9,9,9]&#39;<br>
<br>
gives:<br>
]8]8]8<br>
<br>
Is there another simple way of doing the above substitution?<br>
<br>
Or is there a way to persuade &quot;tr&quot; to work with utf8 ?<br>
<br>
Thanks in advance<br>
<br>
Michal<br>
<br>
[1]<br>
$ tr --version<br>
tr (GNU coreutils) 8.4<br>
Packaged by Gentoo (8.4 (p1))<br>
Copyright (C) 2010 Free Software Foundation, Inc.<br>
License GPLv3+: GNU GPL version 3 or later<br>
&lt;<a rel="nofollow" href="http://gnu.org/licenses/gpl.html" target="_blank">http://gnu.org/licenses/gpl.html</a>&gt;.<br>
This is free software: you are free to change and redistribute it.<br>
There is NO WARRANTY, to the extent permitted by law.<br>
<br>
Written by Jim Meyering.<br>
<font color="#888888"><br>
<br>
--<br>
To unsubscribe from this mailing list,<br>
please see the instructions at <a rel="nofollow" href="http://lists.tlug.jp/list.html" target="_blank">http://lists.tlug.jp/list.html</a><br>
<br>
The TLUG mailing list is hosted by the award-winning Internet provider<br>
ASAHI Net.<br>
Visit ASAHI Net&#39;s English-language Web page: <a rel="nofollow" href="http://asahi-net.jp/en/" target="_blank">http://asahi-net.jp/en/</a><br>
</font></blockquote></div><br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00080" href="msg00080.html">Re: [tlug] multibyte tr (or i18n coreutils)</a></strong>
<ul><li><em>From:</em> Kalin KOZHUHAROV</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00077" href="msg00077.html">[tlug] multibyte tr (or i18n coreutils)</a></strong>
<ul><li><em>From:</em> Michal Hajek</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00078.html">Re: [tlug] multibyte tr (or i18n coreutils)</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00080.html">Re: [tlug] multibyte tr (or i18n coreutils)</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00081.html">Re: [tlug] multibyte tr (or i18n coreutils)</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00080.html">Re: [tlug] multibyte tr (or i18n coreutils)</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00079"><strong>Date</strong></a></li>
<li><a href="threads.html#00079"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
