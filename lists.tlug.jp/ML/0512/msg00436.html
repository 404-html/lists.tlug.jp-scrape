<!-- MHonArc v2.5.2 -->
<!--X-Subject: Re: [tlug] timing for geeks II. -->
<!--X-From-R13: [vpuny Vnwrx <unwrx1Nxneybi.zss.phav.pm> -->
<!--X-Date: Mon, 19 Dec 2005 08:04:57 +0100 -->
<!--X-Message-Id: 20051219070457.GF4525@example.com&#45;61.karlov.mff.cuni.cz -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20051202154627.GB4348@example.com&#45;61.karlov.mff.cuni.cz -->
<!--X-Reference: 20051202152527.302e2f6f.jep200404@example.com -->
<!--X-Reference: 20051203122655.GG4348@example.com&#45;61.karlov.mff.cuni.cz -->
<!--X-Reference: 20051203092314.3118db01.jep200404@example.com -->
<!--X-Reference: 20051204100726.GH4348@example.com&#45;61.karlov.mff.cuni.cz -->
<!--X-Reference: 30ce84360512040313l351f16c4r1872cb4f6f34679e@example.com -->
<!--X-Reference: 20051206082734.GB4319@example.com&#45;61.karlov.mff.cuni.cz -->
<!--X-Reference: 20051218162310.GD4525@example.com&#45;61.karlov.mff.cuni.cz -->
<!--X-Reference: 20051218113431.4bc2cf29.jep200404@example.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00435.html">Date Prev</a>][<a href="msg00437.html">Date Next</a>][<a href="msg00655.html">Thread Prev</a>][<a href="msg00443.html">Thread Next</a>][<a href="maillist.html#00436">Date Index</a>][<a href="threads.html#00436">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] timing for geeks II.</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Mon, 19 Dec 2005 08:04:57 +0100</li>
<li><strong>From</strong>: <strong>Michal Hajek &lt;<A HREF="mailto:hajek1@DOMAIN.HIDDEN?SUBJECT=Re%3A%20%5Btlug%5D%20timing%20for%20geeks%20II.">hajek1@example.com</A>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] timing for geeks II.</strong></li>
<li>References: &lt;<a href="msg00016.html">20051202154627.GB4348@example.com</a>&gt; &lt;<a href="msg00018.html">20051202152527.302e2f6f.jep200404@example.com</a>&gt; &lt;<a href="msg00025.html">20051203122655.GG4348@example.com</a>&gt; &lt;<a href="msg00031.html">20051203092314.3118db01.jep200404@example.com</a>&gt; &lt;<a href="msg00042.html">20051204100726.GH4348@example.com</a>&gt; &lt;<a href="msg00043.html">30ce84360512040313l351f16c4r1872cb4f6f34679e@example.com</a>&gt; &lt;<a href="msg00070.html">20051206082734.GB4319@example.com</a>&gt; &lt;<a href="msg00423.html">20051218162310.GD4525@example.com</a>&gt; &lt;<a href="msg00424.html">20051218113431.4bc2cf29.jep200404@example.com</a>&gt;</li>
<li>User-agent: Mutt/1.5.11</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
Hello :)

* Jim (jep200404@example.com) [051218 17:34]:
&gt; What problem are you actually trying to solve (or understand)? 

Exceptionally good question actually :)
I apologise, I should have cleared this one right from the beginning of
the thread....

The story is somewhat more complex, but I will try to put it as simple
as possible, since what I am doing is merely an exercise and learning
&quot;how this particular stuff works&quot; more than anything else.

I am trying to figure how precisely can I measure time with pc running
linux. 

So I would like to know, if I just install debian 3.1 on i386 with
latest distro kernel and no special hw, run my application measuring
some physical quantity (eg. sample voltage, temperature... etc.), what
is the uncertainty which I get _exclusively_ from time measurement.

Closely following is the question, whether I can improve it with some
quite easy &quot;tuning&quot;. 

In my code I was originally using ftime(), which was quickly replaced by
gettimeofday(). Ok, let me see if there is something even better...
hmmm, I see some clock_gettime()... does it perform any better?  Well,
experiments show that not really, although it perhaps could be a better
option on some circumstances (though I do not know yet exactly what
these are). 

What other options do I have? Ok, I might patch kernel and try some more
real-time oriented stuff. Or maybe I can buy a cheap crystal (say 10$)
and use it as a better clock somehow, or ... ? :) 
This link seems to be quite attractive for me:
<A  HREF="http://source.mvista.com/~ganzinger/hrt/home_page.html">http://source.mvista.com/~ganzinger/hrt/home_page.html</A>

The links for embedded RT-linux (Montavista) suggested by Steve seems to me
on the first glimpse to be more work. But I did not explore it well yet. 
The solaris (mentioned by Josh) might be an option as well. But I do not
have any experience with solaris on i386. So this basically seems to be
more work than, say, installing new patched kernel. 

Or maybe I can synchronise clock using ntpdate before every single data
acquisition? Now the topics get more complex, since I shall figure
precise timing of my experiment - how long does it take to switch relay,
how long does it take to nanovoltmeter to measure voltage, how long does
it take to determine temperature, how long does it take to transfer
results, how long does it take ... and is it possible to measure these
delays with pc (gettimeofday) ? Or how should I measure it anyway? :) 

Another idea is to give higher priority to my measurement program. Since
you say that the biggest delay is from OS (only once in a relatively
long time, but still...), this could be one example of cheap tuning :)

Well, right now I have a program which marks absolute time of the
measurement with gettimeofday() and it serves quite well to the purpose.
And the plan is to make these measurements (means voltage, temp..) time
to time for next few decades, so I have some time to think about
improvements in the meantime :)) Oh, I shall perhaps mention that single
measurement run takes about two days. 

Hmm, if I read my post from the top to the bottom, I am not sure if I
answered the original question. But I hope I have offered clearer view
on my line of reasoning. 

After all, &quot;having work done&quot; and &quot;having no questions&quot; are two completely
different things, aren't they? :)) 

Best regards
Michal

</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00443" href="msg00443.html">Re: [tlug] timing for geeks II.</a></strong>
<ul><li><em>From:</em> Ian Wells</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00016" href="msg00016.html">[tlug] timing for geeks :)</a></strong>
<ul><li><em>From:</em> Michal Hajek</li></ul></li>
<li><strong><a name="00018" href="msg00018.html">Re: [tlug] timing for geeks</a></strong>
<ul><li><em>From:</em> Jim</li></ul></li>
<li><strong><a name="00025" href="msg00025.html">Re: [tlug] timing for geeks</a></strong>
<ul><li><em>From:</em> Michal Hajek</li></ul></li>
<li><strong><a name="00031" href="msg00031.html">Re: [tlug] A Rich Experiment Indeed</a></strong>
<ul><li><em>From:</em> Jim</li></ul></li>
<li><strong><a name="00042" href="msg00042.html">Re: [tlug] A Rich Experiment Indeed</a></strong>
<ul><li><em>From:</em> Michal Hajek</li></ul></li>
<li><strong><a name="00043" href="msg00043.html">Re: [tlug] A Rich Experiment Indeed</a></strong>
<ul><li><em>From:</em> Ian Wells</li></ul></li>
<li><strong><a name="00070" href="msg00070.html">Re: [tlug] timing for geeks II.</a></strong>
<ul><li><em>From:</em> Michal Hajek</li></ul></li>
<li><strong><a name="00423" href="msg00423.html">Re: [tlug] timing for geeks II.</a></strong>
<ul><li><em>From:</em> Michal Hajek</li></ul></li>
<li><strong><a name="00424" href="msg00424.html">Re: [tlug] timing for geeks II.</a></strong>
<ul><li><em>From:</em> Jim</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00435.html">Re: [tlug] Bank Securely from a Windows PC with spyware</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00437.html">[tlug] timeconv.pl</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00655.html">Re: [tlug] timing for geeks II.</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00443.html">Re: [tlug] timing for geeks II.</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00436"><strong>Date</strong></a></li>
<li><a href="threads.html#00436"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
