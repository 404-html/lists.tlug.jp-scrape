<!-- MHonArc v2.6.16 -->
<!--X-Subject: [tlug] migrating Japanese filenames from old to new samba server -->
<!--X-From-R13: [vpurny Qbbcre <pbbcre.zrNtznvy.pbz> -->
<!--X-Date: Fri, 21 Aug 2009 18:10:11 +0900 -->
<!--X-Message-Id: f91aa3d0908210202u697bfd2fm50495984882d49b@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00344.html">Date Prev</a>][<a href="msg00346.html">Date Next</a>][<a href="msg00343.html">Thread Prev</a>][<a href="msg00348.html">Thread Next</a>][<a href="maillist.html#00345">Date Index</a>][<a href="threads.html#00345">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[tlug] migrating Japanese filenames from old to new samba server</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Fri, 21 Aug 2009 18:02:39 +0900</li>
<li><strong>From</strong>: <strong>Micheal Cooper &lt;<a href="mailto:cooper.me@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20migrating%20Japanese%20filenames%20from%20old%20to%20new%20samba%20server">cooper.me@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>[tlug] migrating Japanese filenames from old to new samba server</strong></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
I apologize that I have contributed little to TLUG, in spite of benefiting so much. Thank you for the community and the knowledge.<br><br>I just got samba running on a new RHEL5 file server, so I connected through WinXP (JA version), saved an Excel file with a JA filename to the share, and then checked through Gnome and then the terminal on my Mac. I also tried mounting the share on MacOSX. To my delight, not only can I read the filename, I can specify the file and use chown. Nirvana!<br>
<br>However, the Rsnapshot backup server is also RHEL5, and the files backed up from the old file server (RHEL3) are still unreadable and unchangeable, so I assume that the files on the old file server will have to be converted to UTF8 before sharing them on the new file server.<br>
<br>The old RHEL3 file server specifies <br>dos charset = CP932<br>unix charset = CP932<br>in smb.conf, but the new RHEL5 default charset seems to be CP850:<br>[root@example.com ~]# testparm -v | grep &quot;dos charset&quot;<br>...<br>
        dos charset = CP850<br><br>- 1 - I am sure someone has experience with this situation. What would be the best way to bring the old file server files over to the new machine so that I can manipulate the Japanese-named files through the command line? My initial plan was to rsync them over with ownership, groups, etc. intact. I have already prepared lists of usernames and directories to get it done.<br>
- 2 - Should I change the &#39;dos charset&#39; and/or the &#39;unix charset&#39; in the smb.conf of the new RHEL5 file server? CP850 is western characters only, and even Microsoft claims to not support it any longer. On the other hand, it is working really well, so obviously I don&#39;t understand well enough. If the &#39;dos charset&#39; is CP850, shouldn&#39;t the server be spitting out garbled filenames to the MacOSX and the WinXPJA clients? The filesystem is Unicode, right? And Samba 3 can speak Unicode, so shouldn&#39;t I have to set the &#39;dos charset&#39; to utf-8, too?<br>
<br>I am sure this must have come up before, but a search for &quot;Japanese
samba&quot; in the TLUG archives returned 0 records, and the chapter on
Japanese charsets in the official Samba HowTo is pretty difficult and
not very easy for someone of my level to find a conclusion:<br>
<a rel="nofollow" href="http://us3.samba.org/samba/docs/man/Samba-HOWTO-Collection/unicode.html#id2670220">http://us3.samba.org/samba/docs/man/Samba-HOWTO-Collection/unicode.html#id2670220</a><br>
<br>
The Samba HowTo mentions software for converting entire directories to
a different charset, but the software&#39;s site lists many caveats:<br>
<a rel="nofollow" href="http://j3e.de/linux/convmv/man/">http://j3e.de/linux/convmv/man/</a><br><br>I tried to find the answer by Googling, but if I have missed the solution or the appropriate resource, please point me in the right direction.<br>
<br>Yoroshiku onegaishimasu.<br clear="all"><br>-- <br>Micheal Cooper<br>Miyazaki, Japan (GMT+9, no DST)<br>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00348" href="msg00348.html">Re: [tlug] migrating Japanese filenames from old to new samba server</a></strong>
<ul><li><em>From:</em> Edmund Edgar</li></ul></li>
<li><strong><a name="00350" href="msg00350.html">Re: [tlug] migrating Japanese filenames from old to new samba server</a></strong>
<ul><li><em>From:</em> Micheal Cooper</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00344.html">Re: [tlug] Unix's 40th Birthday</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00346.html">Re: [tlug] Unix's 40th Birthday</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00343.html">Re: [tlug] Open-source repository question - perl on git</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00348.html">Re: [tlug] migrating Japanese filenames from old to new samba server</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00345"><strong>Date</strong></a></li>
<li><a href="threads.html#00345"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
