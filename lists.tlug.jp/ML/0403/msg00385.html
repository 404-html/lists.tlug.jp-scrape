<!-- MHonArc v2.5.2 -->
<!--X-Subject: RE: [tlug] ResiserFS + sudden poweroff = problem -->
<!--X-From-R13: cngevpx.avrffraNtreyvat.pb.wc -->
<!--X-Date: Tue, 30 Mar 2004 05:58:01 +0200 -->
<!--X-Message-Id: 87514FF5916BD511A0E60008C709457CF717@example.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00384.html">Date Prev</a>][<a href="msg00386.html">Date Next</a>][<a href="msg00384.html">Thread Prev</a>][<a href="msg00386.html">Thread Next</a>][<a href="maillist.html#00385">Date Index</a>][<a href="threads.html#00385">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>RE: [tlug] ResiserFS + sudden poweroff = problem</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Tue, 30 Mar 2004 05:58:01 +0200</li>
<li><strong>From</strong>: <strong><A HREF="mailto:patrick.niessen@DOMAIN.HIDDEN?SUBJECT=RE%3A%20%5Btlug%5D%20ResiserFS%20%2B%20sudden%20poweroff%20%3D%20problem">patrick.niessen@example.com</A></strong></li>
<li><strong>Subject</strong>: <strong>RE: [tlug] ResiserFS + sudden poweroff = problem</strong></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
&gt; -----Original Message-----
&gt; From: Stephen J. Turnbull [<A  HREF="mailto:stephen@example.com">mailto:stephen@example.com</A>] 
&gt; Sent: Tuesday, March 30, 2004 12:19 PM
&gt; To: tlug@example.com
&gt; Cc: tlug@example.com
&gt; Subject: Re: [tlug] ResiserFS + sudden poweroff = problem
&gt; 


&gt; Think about what you're saying.  You have a system in known 
&gt; abnormal state, and you want it to boot and conduct a 
&gt; dangerous operation (any fsck that changes disk state is 
&gt; dangerous, even if it's just replaying the journal, which 
&gt; could itself be corrupted) without operator intervention?  

Fair enough.  But is not the point of the journaling filesystem that it can
cope with this kind of situation without breaking?  Sure enough there will
always be some kind of data that is cached, and not yet synced.  The
question is of how important is this cached data.  In this case it was a
proxy server so the data on it is not important.  Davids solution seems to
prevent the problem from reoccuring as /usr/local will probably never be
written to in normal operation.  The problem here was that fsck seems to be
on the partition with an abnormal state, no? If  /usr/local/ is on a
seperate partition it would not have been affected by incomplete writes.  I
guess mounting it read only would improve the situation even more.


&gt; Not to mention that the kind of breakage you describe can 
&gt; only occur with the operator present (I'm assuming you have a 
&gt; UPS, of course)?

There is of course a UPS connected, but the power has to go from UPS to the
server somehow. An UPS will also not protect you if the UPS itself fails or
the AC adaptor of the server ...


&gt;     patrick&gt; Any way to ensure a clean restart without manual
&gt;     patrick&gt; intervention?
&gt; 
&gt; No.  There never is when you have a system with a single 
&gt; point of failure.  Some things aren't worth doing; this is 
&gt; one of them.

Seems David suggested a way ...


Patrick

</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00386" href="msg00386.html">Re: [tlug] ResiserFS + sudden poweroff = problem</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00384.html">Re: [tlug] ResiserFS + sudden poweroff = problem</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00386.html">Re: [tlug] ResiserFS + sudden poweroff = problem</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00384.html">Re: [tlug] ResiserFS + sudden poweroff = problem</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00386.html">Re: [tlug] ResiserFS + sudden poweroff = problem</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00385"><strong>Date</strong></a></li>
<li><a href="threads.html#00385"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
