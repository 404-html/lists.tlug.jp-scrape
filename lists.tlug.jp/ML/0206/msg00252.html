<!-- MHonArc v2.5.2 -->
<!--X-Subject: [tlug] Re: UTF&#45;8 under Linux -->
<!--X-From-R13: [vxr Tnovna <zsnovnaNfhfr.qr> -->
<!--X-Date: Thu, 13 Jun 2002 00:23:41 +0900 (JST) -->
<!--X-Message-Id: s3tvg8o5xl8.fsf@example.com -->
<!--X-Content-Type: multipart/mixed -->
<!--X-Reference: m17HvxI&#45;005zzCC@example.com -->
<!--X-Reference: s3tptyw97ks.fsf@example.com -->
<!--X-Reference: 87k7p4olso.fsf@example.com -->
<!--X-Derived: bin00000.bin -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00251.html">Date Prev</a>][<a href="msg00253.html">Date Next</a>][<a href="msg00243.html">Thread Prev</a>][<a href="msg00278.html">Thread Next</a>][<a href="maillist.html#00252">Date Index</a>][<a href="threads.html#00252">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[tlug] Re: UTF-8 under Linux</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Wed, 12 Jun 2002 17:24:35 +0200</li>
<li><strong>From</strong>: <strong>Mike Fabian &lt;<A HREF="mailto:mfabian@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Re%3A%20UTF-8%20under%20Linux">mfabian@example.com</A>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>[tlug] Re: UTF-8 under Linux</strong></li>
<li>References: &lt;<a href="msg00232.html">m17HvxI-005zzCC@example.com</a>&gt;&lt;<a href="msg00241.html">s3tptyw97ks.fsf@example.com</a>&gt;&lt;<a href="msg00243.html">87k7p4olso.fsf@example.com</a>&gt;</li>
<li>User-agent: Gnus/5.090004 (Oort Gnus v0.04) XEmacs/21.4 (Honest Recruiter,i386-suse-linux)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>"Stephen J. Turnbull" &lt;stephen@example.com&gt; writes:

l&gt;&gt;&gt;&gt;&gt;&gt; "Mike" == Mike Fabian &lt;mfabian@example.com&gt; writes:
&gt;
&gt;     Mike&gt; GNU Emacs 21.1.1 with Mule-UCS-0.84 can edit and display all
&gt;     Mike&gt; of them.
&gt;
&gt;     Mike&gt; XEmacs 21.4.8 with Mule-UCS-0.84 can edit and display all of
&gt;     Mike&gt; them *except* U+2BB.
&gt;
&gt; That's right, it doesn't exist in our tables (mule-ucs/lisp/reldata).
&gt; Doesn't exist anywhere except in Unicode, far as I can tell, none of
&gt; the mapping tables I have (offhand, I haven'T gone dredging the web)
&gt; have it.
&gt;
&gt; Where do you get the Mule-UCS?

For GNU Emacs I build a SuSE package from what I get here:

   <A HREF="ftp://ftp.m17n.org/pub/mule/Mule-UCS/Mule-UCS-0.84.tar.gz">ftp://ftp.m17n.org/pub/mule/Mule-UCS/Mule-UCS-0.84.tar.gz</A>

&gt; Is it the same, or are you use XEmacs package for one and the
&gt; upstream for the other?

Since XEmacs has included Mule-UCS in the packages now, I have dropped
the extra mule-ucs-xemacs.rpm I used to build for SuSE
Linux. Currently I use what I get when I checkout the XEmacs packages
from CVS using the following tag

    cvs update -r xemacs-sumo-2002-05-22

Just for testing I have removed
/usr/share/xemacs/mule-packages/lisp/mule-ucs/ again and reinstalled
my old mule-ucs-xemacs.rpm build from the above upstream sources of
Mule-UCS-0.84.tar.gz. The result is the same, U+2BB doesn't work.

&gt; It's quite possible that either GNU or
&gt; Miyashita-san has updated the character tables.

I can't find U+2BB in Miyashita-san's upstream sources of Mule-UCS either:

    mfabian@example.com:~/suse-packages/Mule-UCS/Mule-UCS-0.84$ grep -i -r 0x.*2bb *
    lisp/reldata/uethiopic.el:       (?"~ . "0x12BB") ;; ETHIOPIC SYLLABLE KXAA
    lisp/reldata/ubig5.el:       (?.5 . "0x52BB") ;; &lt;CJK&gt;
    lisp/reldata/ubig5.el:       (?9q . "0x82BB") ;; &lt;CJK&gt;
    lisp/reldata/ubig5.el:       (?QY . "0x92BB") ;; &lt;CJK&gt;
    lisp/reldata/ubig5.el:       (?&amp;} . "0x62BB") ;; &lt;CJK&gt;
    lisp/reldata/ujisx0208.el:       (?Y; . "0x62BB")  ;; &lt;CJK&gt;
    lisp/reldata/ujisx0208.el:       (?gm . "0x82BB")  ;; &lt;CJK&gt;
    lisp/reldata/ujisx0212.el:       (?3c . "0x52BB") ;; &lt;CJK&gt;
    lisp/reldata/ujisx0212.el:       (?d. . "0x92BB") ;; &lt;CJK&gt;
    lisp/reldata/uksc5601.el:       (?uV . "0x82BB") ; &lt;CJK&gt;
    lisp/reldata/u-cns-1.el:       (?L4 . "0x52BB") ; &lt;CJK&gt;
    lisp/reldata/u-cns-1.el:       (?Wp . "0x82BB") ; &lt;CJK&gt;
    lisp/reldata/u-cns-1.el:       (?oY . "0x92BB") ; &lt;CJK&gt;
    lisp/reldata/u-cns-2.el:       (?&amp;| . "0x62BB") ; &lt;CJK&gt;
    lisp/reldata/u-cns-3.el:       (?&amp;f . "0x72BB") ; &lt;CJK&gt;
    lisp/reldata/ugb2312.el:       (?^S . "0x62BB") ;; &lt;CJK&gt;
    mfabian@example.com:~/suse-packages/Mule-UCS/Mule-UCS-0.84$

The Mule-UCS from the XEmacs packages CVS has the same version number
as Miyashita-san's latest upstream version:

    mfabian@example.com:~/suse-packages/Mule-UCS/Mule-UCS-0.84/lisp$ lgrep -Ij -Ou8 "defconst.*mucs-version" *
    mucs.el:(defconst mucs-version "0.84 (KOUGETSUDAI:向月台)")
    mfabian@example.com:~/suse-packages/Mule-UCS/Mule-UCS-0.84/lisp$

    mfabian@example.com:/usr/share/xemacs/mule-packages/lisp/mule-ucs$ lgrep -Ij -Ou8 "defconst.*mucs-version" *
    mucs.el:(defconst mucs-version "0.84 (KOUGETSUDAI:向月台)")
    mfabian@example.com:/usr/share/xemacs/mule-packages/lisp/mule-ucs$

Nevertheless there are a few differences in the reldata files:

    mfabian@example.com:~/suse-packages/Mule-UCS/Mule-UCS-0.84/lisp/reldata$ diff -q /usr/share/xemacs/mule-packages/etc/mule-ucs/reldata/ .
    Files /usr/share/xemacs/mule-packages/etc/mule-ucs/reldata/u-cns-1.el and ./u-cns-1.el differ
    Files /usr/share/xemacs/mule-packages/etc/mule-ucs/reldata/u-cns-2.el and ./u-cns-2.el differ
    Files /usr/share/xemacs/mule-packages/etc/mule-ucs/reldata/u-cns-3.el and ./u-cns-3.el differ
    Files /usr/share/xemacs/mule-packages/etc/mule-ucs/reldata/u-cns-4.el and ./u-cns-4.el differ
    Files /usr/share/xemacs/mule-packages/etc/mule-ucs/reldata/u-cns-5.el and ./u-cns-5.el differ
    Files /usr/share/xemacs/mule-packages/etc/mule-ucs/reldata/u-cns-6.el and ./u-cns-6.el differ
    Files /usr/share/xemacs/mule-packages/etc/mule-ucs/reldata/u-cns-7.el and ./u-cns-7.el differ
    mfabian@example.com:~/suse-packages/Mule-UCS/Mule-UCS-0.84/lisp/reldata$

but only in CNS related files, therefore I think they are unrelated to U+2BB.

&gt; What does C-u C-x = tell you about that character under GNU Emacs?

  character: ? (01211133, 332379, 0x5125b)
    charset: mule-unicode-0100-24ff (Unicode characters of the range U+0100..U+24FF.)
 code point: 36 91
     syntax: word
   category: u:Mule unicode characters  
buffer code: 0x9C 0xF4 0xA4 0xDB
  file code: 0xCA 0xBB (encoded by coding system utf-8)
       font: -Misc-Fixed-Medium-R-Normal--15-140-75-75-C-90-ISO10646-1

(Question mark behind 'character:' in my Mail because XEmacs can't
handle this character, but it displays fine in Emacs)

&gt; Also, what font are you using to display?  Does GNU Emacs support
&gt; unicode fonts, or do they do the same hack we do (translating to the
&gt; usual set of X registries)?

They do the same as XEmacs.

This may look ugly if you edit Chinese in UTF-8 because some Chinese
characters are taken from a Japanese font and some from a Chinese
font, for example:

    <A HREF="http://www.suse.de/~mfabian/screenshots/emacs-friedrich-dimmling-fontset-16.png">http://www.suse.de/~mfabian/screenshots/emacs-friedrich-dimmling-fontset-16.png</A>

A customer had this problem and I tried to make this less ugly for him
by defining additional fontsets which use mainly Unicode fonts in
/usr/share/emacs/site-lisp/suse-start-Mule-UCS.el, which I attach to
this mail.

suse-start-Mule-UCS.el is automatically loaded on SuSE Linux when GNU
Emacs is started and Mule-UCS.rpm is installed. Using one of these
"Unicode fontsets", Chinese text in UTF-8 looks nicer because a
uniform style is used, for example:

    <A HREF="http://www.suse.de/~mfabian/screenshots/emacs-friedrich-dimmling-fontset-16_efont_unicode.png">http://www.suse.de/~mfabian/screenshots/emacs-friedrich-dimmling-fontset-16_efont_unicode.png</A>

suse-start-Mule-UCS.el uses some functions which exist only in Emacs
and therefore it doesn't work like that for XEmacs. Probably something
similar can be done for XEmacs and it might be useful for some people
but I didn't yet have time to investigate that.

Anyway, I can also display U+2BB using the "Unicode fontsets" I defined in
suse-start-Mule-UCS.el.  'C-u C-x =' then tells me for example:

      character: ? (01211133, 332379, 0x5125b)
        charset: mule-unicode-0100-24ff (Unicode characters of the range U+0100..U+24FF.)
     code point: 36 91
         syntax: word
       category: u:Mule unicode characters  
    buffer code: 0x9C 0xF4 0xA4 0xDB
      file code: 0xCA 0xBB (encoded by coding system utf-8)
           font: -Misc-Fixed-Medium-R-Normal--18-120-100-100-C-90-ISO10646-1

or

      character: ? (01211133, 332379, 0x5125b)
        charset: mule-unicode-0100-24ff (Unicode characters of the range U+0100..U+24FF.)
     code point: 36 91
         syntax: word
       category: u:Mule unicode characters  
    buffer code: 0x9C 0xF4 0xA4 0xDB
      file code: 0xCA 0xBB (encoded by coding system utf-8)
           font: -gnu-unifont-medium-r-normal--16-160-75-75-c-80-iso10646-1

or something similar for the other "Unicode fontsets".

&gt; Either an URL for the source of the Mule-UCS you use for GNU Emacs or
&gt; a diff between that tree and the XEmacs package sources would be どう
&gt; もありがたい (like, literally "hard to get" ;-).

A complete diff between the upstream Mule-UCS source which I use for
GNU Emacs and the one from the XEmacs packages sources is here (as
soon as our web server syncs):

    <A HREF="http://www.suse.de/~mfabian/misc/xemacs-packages-mule-ucs-upstream.diff.bz2">http://www.suse.de/~mfabian/misc/xemacs-packages-mule-ucs-upstream.diff.bz2</A>

Because the problem in XEmacs remains when I use Mule-UCS from the
unchanged upstream source, I guess the problem is somewhere else
though.
</pre><p><strong>Attachment:
<a href="bin00000.bin" ><tt>suse-start-Mule-UCS.el</tt></a></strong><br>
<em>Description:</em> application/emacs-lisp</p>
<pre>
-- 
Mike Fabian   &lt;mfabian@example.com&gt;   <A HREF="http://www.suse.de/~mfabian">http://www.suse.de/~mfabian</A>
睡眠不足はいい仕事の敵だ。
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00278" href="msg00278.html">[tlug] Re: UTF-8 under Linux</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00232" href="msg00232.html">[tlug] UTF-8 under Linux</a></strong>
<ul><li><em>From:</em> bhoward</li></ul></li>
<li><strong><a name="00241" href="msg00241.html">[tlug] Re: UTF-8 under Linux</a></strong>
<ul><li><em>From:</em> Mike Fabian</li></ul></li>
<li><strong><a name="00243" href="msg00243.html">Re: [tlug] Re: UTF-8 under Linux</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00251.html">[tlug] Japanese character input for KDE</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00253.html">Re: [tlug] maybe a repetitive question about distros</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00243.html">Re: [tlug] Re: UTF-8 under Linux</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00278.html">[tlug] Re: UTF-8 under Linux</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00252"><strong>Date</strong></a></li>
<li><a href="threads.html#00252"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
