<!-- MHonArc v2.5.2 -->
<!--X-Subject: [tlug] unable to create local copy utf8 encoded Japanese MySQL data -->
<!--X-From-R13: Rnir Uhggrevqtr <qnirNgbxlbpbzrql.pbz> -->
<!--X-Date: Tue, 14 Feb 2006 12:42:24 +0900 -->
<!--X-Message-Id: 43F1519E.4010403@example.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00258.html">Date Prev</a>][<a href="msg00260.html">Date Next</a>][<a href="msg00255.html">Thread Prev</a>][<a href="msg00260.html">Thread Next</a>][<a href="maillist.html#00259">Date Index</a>][<a href="threads.html#00259">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[tlug] unable to create local copy utf8 encoded Japanese MySQL data</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Tue, 14 Feb 2006 12:42:22 +0900</li>
<li><strong>From</strong>: <strong>Dave Gutteridge &lt;<A HREF="mailto:dave@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20unable%20to%20create%20local%20copy%20utf8%20encoded%20Japanese%20MySQL%20data">dave@example.com</A>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>[tlug] unable to create local copy utf8 encoded Japanese MySQL data</strong></li>
<li>User-agent: Mozilla Thunderbird 1.0.7 (X11/20051013)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
TLUG,

    This question is more MySQL than specifically Linux, although I'm 
running MySQL exclusively on Linux. The thing is that I posted this 
question to the MySQL mailing list, but I'm seeing no action there 
because there doesn't seem to be many people familiar with encoding 
issues. So I'm turning to you guys in hopes that Japanese and utf-8 
encoding is something you can help with.

    I have a MySQL database that I am trying to copy from my hosting 
service, where it was created, to my home machine, where I now run 
Ubuntu Linux and I want to create a full testing and development 
environment. The database is in utf8 encoding, and has a mix of English 
and Japanese.

    It might be relevant that the data has been around for a few years, 
and when it was created, the hosting service was running MySQL 3.2 (not 
exactly sure, but somewhere in the 3 series), which did not have utf-8 
support. So there is a mix of how the Japanese is stored in the 
database, as described below.

    Currently, both the hosting service and my home computer are running 
MySQL 4.2, which has decent utf-8 support.

   So, to the specific problem. I've exported an .sql file from my 
hosting service, with structure and data, and copied it to my home machine.

   I can take the .sql file, open it in OpenOffice Write as a text 
encoded file, and verify that it is encoded in utf-8. Most of the 
Japanese text shows up readable. Some of it, however, shows up as coded 
numbers (I'm not sure what the term is when utf displays this way): 
&amp;#12513;&amp;#12540;&amp;#12531;&amp;#12539; I think this might be &quot;legacy&quot; data, 
held over from the days when MySQL did not have utf8 support.

  When I import the .sql file into MySQL, I can look at it in phpMyAdmin 
and see that the text that displayed correctly as Japanese in OpenOffice 
still displays correctly as Japanese. The text that was in number form 
is also still in number form when viewed through phpMyAdmin. In short, 
phpMyAdmin sees it after import the same way that OpenOffice did before 
import.

  But, then when I view a PHP file in FireFox, and it accesses the 
database, the situation changes. The text that is encoded as numbers 
displays as correct Japanese. The text that displays as actual Japanese 
text in OpenOffice and phpMyAdmin now displays as question marks.

  Again, just to be clear, all Japanese characters, regardless of how 
they look in phpMyAdmin, display correctly when viewed from the hosting 
service.

    The ideal scenario is for the text that displays as proper Japanese 
characters in OpenOffice and phpMyAdmin to display as proper Japanese 
characters when viewed via PHP/Browser. I am willing to go through the 
database with a fine tooth comb and replace the numbered utf8 characters 
with the correct Japanese. But I'm not willing to do the reverse, and 
make the database completely non-human readable when viewed through 
phpMyAdmin.

   I hope someone can shed some light on this.

   Thank you.

--
Dave M G

</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00260" href="msg00260.html">Re: [tlug] unable to create local copy utf8 encoded Japanese MySQLdata</a></strong>
<ul><li><em>From:</em> Josh Glover</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00258.html">Re: [tlug] unicode and Perl- how to pass command line unicodearguments</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00260.html">Re: [tlug] unable to create local copy utf8 encoded Japanese MySQLdata</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00255.html">[tlug] KuroBox and Xterm problem SOLVED (but problems with shutdown)</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00260.html">Re: [tlug] unable to create local copy utf8 encoded Japanese MySQLdata</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00259"><strong>Date</strong></a></li>
<li><a href="threads.html#00259"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
