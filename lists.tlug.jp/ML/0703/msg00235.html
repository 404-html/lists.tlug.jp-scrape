<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [tlug] get free local port for script? -->
<!--X-From-R13: "Egrcura X. Fheaohyy" <fgrcuraNkrznpf.bet> -->
<!--X-Date: Sun, 18 Mar 2007 01:10:23 +0900 -->
<!--X-Message-Id: 17916.5445.304941.346377@example.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20070317120851.GL13829@example.com -->
<!--X-Reference: 17915.62317.493373.158055@example.com -->
<!--X-Reference: 20070317142910.GN13829@example.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00234.html">Date Prev</a>][<a href="msg00236.html">Date Next</a>][<a href="msg00233.html">Thread Prev</a>][<a href="msg00240.html">Thread Next</a>][<a href="maillist.html#00235">Date Index</a>][<a href="threads.html#00235">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] get free local port for script?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Sun, 18 Mar 2007 01:20:21 +0900</li>
<li><strong>From</strong>: <strong>&quot;Stephen J. Turnbull&quot; &lt;<a href="mailto:stephen@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20get%20free%20local%20port%20for%20script%3F">stephen@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] get free local port for script?</strong></li>
<li>References: &lt;<a href="msg00228.html">20070317120851.GL13829@example.com</a>&gt;	&lt;<a href="msg00232.html">17915.62317.493373.158055@example.com</a>&gt;	&lt;<a href="msg00233.html">20070317142910.GN13829@example.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Edward Wright writes:

 &gt; My understanding is that when you make a (in this case) tcp connection
 &gt; to a remote host, a port is assigned on the local host in some sequence
 &gt; order.... therefore, I would think that at any given time, any given
 &gt; port could be in use. Am I missing something?

No, I was.  :-)  I thought that the connection portspace is separate
from the listener portspace by construction.  It's not, as a careful
reading of ip(7) reveals.  Fortunately, it turns out my suggestion
will Work For You, although for a different reason.

&gt;From section SYSCTLS of ip(7):

   ip_local_port_range
      Contains two integers that define the default local  port  range
      allocated  to  sockets.  Allocation starts with the first number
      and ends with the second number.  Note  that  these  should  not
      conflict  with the ports used by masquerading (although the case
      is handled).  Also arbitrary choices  may  cause  problems  with
      some  firewall  packet  filters  that make assumptions about the
      local ports in use.  First number should be at least &gt;1024, bet-
      ter &gt;4096 to avoid clashes with well known ports and to minimize
      firewall problems.

and the default setting (Gentoo, Linux 2.6.20) is

$ cat /proc/sys/net/ipv4/ip_local_port_range
32768	61000
$ 

We be golden, methinks.


</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00240" href="msg00240.html">Re: [tlug] get free local port for script?</a></strong>
<ul><li><em>From:</em> Edward Wright</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00228" href="msg00228.html">[tlug] get free local port for script?</a></strong>
<ul><li><em>From:</em> Edward Wright</li></ul></li>
<li><strong><a name="00232" href="msg00232.html">[tlug] get free local port for script?</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
<li><strong><a name="00233" href="msg00233.html">Re: [tlug] get free local port for script?</a></strong>
<ul><li><em>From:</em> Edward Wright</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00234.html">Re: [tlug] Adding text to the beginning of a file</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00236.html">Re: [tlug] Adding text to the beginning of a file</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00233.html">Re: [tlug] get free local port for script?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00240.html">Re: [tlug] get free local port for script?</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00235"><strong>Date</strong></a></li>
<li><a href="threads.html#00235"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
