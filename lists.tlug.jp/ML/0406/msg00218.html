<!-- MHonArc v2.5.2 -->
<!--X-Subject: Re: [tlug] Re: routing question -->
<!--X-From-R13: Pbgbaq Pbglnafmxv <gyhtNfvyvpbavhz.arg> -->
<!--X-Date: Sun, 27 Jun 2004 17:16:41 +0900 -->
<!--X-Message-Id: 20040627171641.4454be4a.tlug@example.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20040626195119.5450ddc0.tlug@example.com -->
<!--X-Reference: 20040626110829.GA30783@example.com -->
<!--X-Reference: 20040626205150.7e11be74.tlug@example.com -->
<!--X-Reference: 20040626120306.GB30950@example.com -->
<!--X-Reference: 20040626214921.5ad8fb7f.tlug@example.com -->
<!--X-Reference: 20040626200700.GD13647@example.com&#45;a&#45;geek.org -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00217.html">Date Prev</a>][<a href="msg00219.html">Date Next</a>][<a href="msg00214.html">Thread Prev</a>][<a href="msg00219.html">Thread Next</a>][<a href="maillist.html#00218">Date Index</a>][<a href="threads.html#00218">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] Re: routing question</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Sun, 27 Jun 2004 17:16:41 +0900</li>
<li><strong>From</strong>: <strong>Botond Botyanszki &lt;<A HREF="mailto:tlug@DOMAIN.HIDDEN?SUBJECT=Re%3A%20%5Btlug%5D%20Re%3A%20routing%20question">tlug@example.com</A>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] Re: routing question</strong></li>
<li>References: &lt;<a href="msg00201.html">20040626195119.5450ddc0.tlug@example.com</a>&gt;&lt;<a href="msg00202.html">20040626110829.GA30783@example.com</a>&gt;&lt;<a href="msg00203.html">20040626205150.7e11be74.tlug@example.com</a>&gt;&lt;<a href="msg00204.html">20040626120306.GB30950@example.com</a>&gt;&lt;<a href="msg00205.html">20040626214921.5ad8fb7f.tlug@example.com</a>&gt;&lt;<a href="msg00214.html">20040626200700.GD13647@example.com</a>&gt;</li>
<li>Organization: </li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
On Sat, 26 Jun 2004 22:07:03 +0200
Tobias Diedrich &lt;ranma@example.com&gt; wrote:

&gt; &gt;    +-------------------------------------&gt;
&gt; &gt;    |                   &lt;----------------------------------+
&gt; &gt;  firewall         laptop eth0      laptop usb0        zaurus usbd0
&gt; &gt; 192.168.1.1 &lt;--&gt; 192.168.2.12 &lt;--&gt; 192.168.129.1 &lt;--&gt; 192.168.129.201
&gt; &gt; 

&gt; The machine with IP 192.168.2.1 or its default gw needs to know that it
&gt; has to route packets destined to 192.168.129.201 over your notebook.
I did set that route. It seems to me (from tcpdump output) that packages
are not beeing routed between the eth0 and usb0 interfaces on the
laptop for some reason.
Am I missing something from the kernel?

Now I changed the laptop to 192.168.1.12 to avoid further confusion and
problems but that was not related I think.

&gt; You can avoid fiddling with the other routing tables by masquerading the
&gt; packets from your zaurus on your notebook.
Tried this, didn't help.

&gt; A packet sniffer like ethereal or tcpdump is a good tool to check where
&gt; the packets get stuck.
Pinging the usb0 interface on the laptop and doing a &quot;tcpdump
-i eth0&quot; shows that ping is OK.
siliconium &gt; 192.168.129.1: icmp: echo request (DF) (ttl 64, id 1, len 84)
192.168.129.1 &gt; siliconium: icmp: echo reply (ttl 64, id 44801, len 84)

Pinging the usbd0 interface on the zaurus and doing a&quot;tcpdump-i eth0&quot;
on the laptop shows  only the requests but no reply:
siliconium &gt; zaurus: icmp: echo request (DF) (ttl 64, id 2, len 84)
siliconium &gt; zaurus: icmp: echo request (DF)(ttl 64, id 3, len 84)

if I ping the laptop's eth0(!) interface from the zaurus, the ping is OK.
# tcpdump -i usb0
192.168.129.201 &gt; 192.168.1.12: icmp: echo request (DF) 
192.168.1.12 &gt; 192.168.129.201: icmp: echo reply
# ifconfig
eth0      Link encap:Ethernet  HWaddr 08:00:46:05:63:69
          inet addr:192.168.1.12  Bcast:192.168.2.255  Mask:255.255.255.0

&quot;tcpdump  -i eth0&quot; gives no output. Why?

Just to try something else, I set up PPP over irda between the zaurus and
the laptop. Ditto the same. Communication between to two machines over
the irda connection is fine but no luck reaching other hosts.
PPP via modem works on this laptop with a dialin ISP.

I'll just pull the ethernet cable and hang myself with it...

&gt;  Sometimes enabling logging of martians and
&gt; disabling the reverse path filter can also help debugging complicated
&gt; setups (/proc/sys/net/ipv4/conf/*/(rp_filter|log_martians)).
Thanks, I'll look at this.

</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00219" href="msg00219.html">Re: [tlug] Re: routing question</a></strong>
<ul><li><em>From:</em> uvacoder</li></ul></li>
<li><strong><a name="00226" href="msg00226.html">[tlug] Re: routing question</a></strong>
<ul><li><em>From:</em> Tobias Diedrich</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00201" href="msg00201.html">[tlug] routing question</a></strong>
<ul><li><em>From:</em> Botond Botyanszki</li></ul></li>
<li><strong><a name="00202" href="msg00202.html">Re: [tlug] routing question</a></strong>
<ul><li><em>From:</em> uvacoder</li></ul></li>
<li><strong><a name="00203" href="msg00203.html">Re: [tlug] routing question</a></strong>
<ul><li><em>From:</em> Botond Botyanszki</li></ul></li>
<li><strong><a name="00204" href="msg00204.html">Re: [tlug] routing question</a></strong>
<ul><li><em>From:</em> uvacoder</li></ul></li>
<li><strong><a name="00205" href="msg00205.html">Re: [tlug] routing question</a></strong>
<ul><li><em>From:</em> Botond Botyanszki</li></ul></li>
<li><strong><a name="00214" href="msg00214.html">[tlug] Re: routing question</a></strong>
<ul><li><em>From:</em> Tobias Diedrich</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00217.html">Re: [tlug] routing question</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00219.html">Re: [tlug] Re: routing question</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00214.html">[tlug] Re: routing question</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00219.html">Re: [tlug] Re: routing question</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00218"><strong>Date</strong></a></li>
<li><a href="threads.html#00218"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
