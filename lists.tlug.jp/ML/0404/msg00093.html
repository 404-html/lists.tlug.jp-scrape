<!-- MHonArc v2.5.2 -->
<!--X-Subject: Re: [tlug] Restarting a dead DNS lookup -->
<!--X-From-R13: Xvz Perra <Xvz.PerraNvasbgrpu.zbanfu.rqh.nh> -->
<!--X-Date: Sat, 17 Apr 2004 10:19:51 +1000 (EST) -->
<!--X-Message-Id: 200404170019.i3H0JpG0023918@example.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00092.html">Date Prev</a>][<a href="msg00094.html">Date Next</a>][<a href="msg00075.html">Thread Prev</a>][<a href="msg00124.html">Thread Next</a>][<a href="maillist.html#00093">Date Index</a>][<a href="threads.html#00093">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] Restarting a dead DNS lookup</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Sat, 17 Apr 2004 10:19:51 +1000 (EST)</li>
<li><strong>From</strong>: <strong>Jim Breen &lt;<A HREF="mailto:Jim.Breen@DOMAIN.HIDDEN?SUBJECT=Re%3A%20%5Btlug%5D%20Restarting%20a%20dead%20DNS%20lookup">Jim.Breen@example.com</A>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] Restarting a dead DNS lookup</strong></li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Sam Tilders &lt;sam@example.com&gt; wrote:
&gt;&gt; On Thu, 15 Apr 2004 21:48, Jim Breen wrote:
&gt;&gt; &gt; (a) every so often (maybe once every 3 weeks on average) the DNS
&gt;&gt; &gt; support on my RH7.3 system quietly dies. The ISP's DNS servers are
&gt;&gt; &gt; still there, I can still get packets out to hosts I address by IP
&gt;&gt; &gt; address,  /etc/resolv.conf is OK, but I can't resolve any addresses.
&gt;&gt; 
&gt;&gt; Does your /etc/resolv.conf refer to the localhost, a dialup or broadband 
&gt;&gt; router or the isp's dns servers?

The ISP's DNS servers.

&gt;&gt; /etc/rc.d/init.d/named status might also say something. 

&gt;&gt; If resolv.conf refers to the isp's servers I'm not sure how what you're 
&gt;&gt; describing could happen.

Me neither.

Brett Robson &lt;b-robson@example.com&gt; wrote:
&gt;&gt; Jim Breen wrote:
&gt;&gt; &gt;Greetings from warm old Melbourne, where we are having record
&gt;&gt; &gt;hot days and nights for autumnal April. Maybe Tokyo can ship us
&gt;&gt; &gt;some coolth.
&gt;&gt; 
&gt;&gt; but you get the rain as well....

We do? Try telling my garden that. At my weekender our YTD rainfall
has been about 50mm.

&gt;&gt; &gt;(a) every so often (maybe once every 3 weeks on average) the DNS
&gt;&gt; &gt;support on my RH7.3 system quietly dies. The ISP's DNS servers are
&gt;&gt; &gt;still there, I can still get packets out to hosts I address by IP
&gt;&gt; &gt;address,  /etc/resolv.conf is OK, but I can't resolve any addresses.
&gt;&gt; 
&gt;&gt; There was a version of bind 8 that had a memory leak and part of it
&gt;&gt; died, what version are you running?

Not running bind AFAIK.

Josh Glover &lt;tlug@example.com&gt; wrote:
&gt;&gt; &gt; Brett Robson wrote:
&gt;&gt; &gt; &gt;There was a version of bind 8 that had a memory leak and part of it
&gt;&gt; &gt; &gt;died, what version are you running?
&gt;&gt; &gt;
&gt;&gt; &gt; The short term solution is to stop and restart bind.
&gt;&gt; 
&gt;&gt; The resolver is part of the standard C library. Bind is a DNS server.
&gt;&gt; One should have nothing to do with the other, in fact I doubt that Jim
&gt;&gt; would even be running Bind on a workstation. If he is, it is hopefully
&gt;&gt; in caching-only mode.

Correct. I'm running a workstation, and I guess the clam-up is in the 
resolver library. I wondered about executing a res_init() since it
says it reads the configuration files, etc.

"Stephen J. Turnbull" &lt;stephen@example.com&gt; wrote:
&gt;&gt;     Jim&gt; (a) every so often (maybe once every 3 weeks on average) the
&gt;&gt;     Jim&gt; DNS support on my RH7.3 system quietly dies. The ISP's DNS
&gt;&gt;     Jim&gt; servers are still there, I can still get packets out to hosts
&gt;&gt;     Jim&gt; I address by IP address, /etc/resolv.conf is OK, but I can't
&gt;&gt;     Jim&gt; resolve any addresses.
&gt;&gt; 
&gt;&gt; Red Hat sux[tm].
&gt;&gt; 
&gt;&gt; I'm not sure which versions of Red Hat were affected but in some
&gt;&gt; versions the "best glibc available" (by Red Hat's own modest appraisal
&gt;&gt; -- anybody here remember Adrian Havill?  

Me! Me!

&gt;&gt; Uli Drepper just chuckled)
&gt;&gt; had a nasty bug in the nscd (not "Network Service CD ripper", name
&gt;&gt; service cache daemon).  Try restarting it.  There's more info on the
&gt;&gt; Coda (distributed file system) ML at www.coda.cs.cmu.edu, I don't
&gt;&gt; recall whether they had a decent search facility, if not I'll grep my
&gt;&gt; archive for you later.

Sound like we're getting somewhere. However I can't see that I actually
have nscd running. ps doesn't pick it up, and there is no sign of it 
on the messages at boot time where it reports xinetd, crond, etc. being
started.

The comment at the front of /etc/rc.d/init.d/nscd implies it doesn't
start by default:

# description:  This is a daemon which handles passwd and group lookups \
#               for running programs and cache the results for the next \
#               query.  You should start this daemon if you use \
#               slow naming services like NIS, NIS+, LDAP, or hesiod.

Cheers

Jim

-- 
Jim Breen                                <A HREF="http://www.csse.monash.edu.au/~jwb/">http://www.csse.monash.edu.au/~jwb/</A>
Computer Science &amp; Software Engineering,                Tel: +61 3 9905 9554
Monash University, VIC 3800, Australia                  Fax: +61 3 9905 5146
(Monash Provider No. 00008C)                ジム・ブリーン@モナシュ大学
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00124" href="msg00124.html">Re: [tlug] Restarting a dead DNS lookup</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00092.html">Re: [tlug] shell question</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00094.html">[tlug] KuickShow</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00075.html">Re: [tlug] Restarting a dead DNS lookup</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00124.html">Re: [tlug] Restarting a dead DNS lookup</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00093"><strong>Date</strong></a></li>
<li><a href="threads.html#00093"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
