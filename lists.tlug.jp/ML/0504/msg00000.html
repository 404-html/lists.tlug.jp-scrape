<!-- MHonArc v2.5.2 -->
<!--X-Subject: Re: [tlug] Redhat Enterprise and PHPs MBSTRING -->
<!--X-From-R13: Rnivq Szrel <qnirNfxvqqylqrr.pbz> -->
<!--X-Date: Fri, 01 Apr 2005 03:17:45 +0900 (JST) -->
<!--X-Message-Id: 20050401.031745.524893293.dave@?om -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20050331.184847.670289635.dave@?om -->
<!--X-Reference: 424BCC89.9030604@example.com -->
<!--X-Reference: 20050331.232312.660286410.dave@?om -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[Date Prev][<a href="msg00001.html">Date Next</a>][Thread Prev][<a href="msg00003.html">Thread Next</a>][<a href="maillist.html#00000">Date Index</a>][<a href="threads.html#00000">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] Redhat Enterprise and PHPs MBSTRING</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Fri, 01 Apr 2005 03:17:45 +0900 (JST)</li>
<li><strong>From</strong>: <strong>David E &lt;<A HREF="mailto:dave@DOMAIN.HIDDEN?SUBJECT=Re%3A%20%5Btlug%5D%20Redhat%20Enterprise%20and%20PHPs%20MBSTRING">dave@???</A>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] Redhat Enterprise and PHPs MBSTRING</strong></li>
<li>References: &lt;20050331.184847.670289635.dave@?om&gt;&lt;424BCC89.9030604@example.com&gt;&lt;20050331.232312.660286410.dave@example.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>

Replying to my own previous message...

From: David E &lt;dave@?om&gt;
&gt; From: Robert Fisher &lt;robert@example.com&gt;
&gt; Subject: Re: [tlug] Redhat Enterprise and PHPs MBSTRING
&gt; Date: Thu, 31 Mar 2005 19:10:17 +0900
&gt; 
&gt; &gt; David E wrote:
&gt; &gt; &gt;From: Robert Fisher &lt;robert@example.com&gt;
&gt; &gt; &gt;&gt;David E wrote:
&gt; &gt; &gt;&gt;&gt;From: Robert Fisher &lt;robert@example.com&gt;
&gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt;&gt;&gt;&gt;I am installing a system and for some reason we are having a problem 
&gt; &gt; &gt;&gt;&gt;&gt;with encoding of japanese text to be sent out in emails.  The emails 
&gt; &gt; &gt;&gt;&gt;&gt;either come in &quot;mojibake&quot; or cutoff.  
&gt; &gt; &gt;&gt;&gt;Have you checked the mb-related settings in the two php.ini files, and/or
&gt; &gt; &gt;&gt;&gt;compared the output of phpinfo() on the 2 systems?
&gt; &gt; &gt;&gt;&gt;
&gt; &gt; &gt;&gt;Thanks for your response, yeah was the very first thing we did.  
&gt; &gt; &gt;&gt;
&gt; &gt; &gt;&gt;Would the Locale of the server have any effect?  on both servers the 
&gt; &gt; &gt;&gt;locale is english utf8.
&gt; &gt; &gt;&gt;    
&gt; &gt; &gt;I'd still be inclined to look for some difference between the two
&gt; &gt; &gt;systems in one of: the php code, php installation settings, php.ini settings.
&gt; &gt; &gt;
&gt; &gt; &gt;As in Alessandro's example, is mb_language set to &quot;ja&quot; in both? Are
&gt; &gt; &gt;both using mb_send_mail rather than send_mail? That sort of thing. 
&gt; &gt; &gt;
&gt; &gt; 
&gt; &gt; mb_language is set to &quot;ja&quot; on both servers. and both servers are using 
&gt; &gt; mb_send_mail.
&gt; &gt; 
&gt; &gt; I am actually trying to figure out why it is so different between the 
&gt; &gt; two servers.  We did however come up with a solution.  On the red hat 9 
&gt; &gt; server, we converted the body of the email to ISO-2022-JP  and the 
&gt; &gt; subject line was in EUC format before passing it through mb_send_mail.  
&gt; &gt; On the enterprise server, the solutions was to send the subject and body 
&gt; &gt; into mb_send_mail as EUC formatted.  I understand that mb_send_mail will 
&gt; &gt; convert the text to ISO-2022-JP format. 
&gt; &gt; 
&gt; 
&gt; I'd guess that passing in the subject and body in different encodings
&gt; could cause problems with the conversion. When mb tries to detect the
&gt; input encoding, it may just go with the first one it detects (either
&gt; the subject or the body) and then convert everything based on
&gt; that. 
&gt; 
&gt; Since you know what encoding you're starting with, why not expressly
&gt; convert both the body and subject to ISO-2022-JP before passing them
&gt; to mb_send_mail and avoid the risk that mb's auto-detect might get it
&gt; wrong?

Actually, that last bit I wrote is probably wrong. mb_send_mail
probably expects the strings passed to it to be in whatever encoding
is set as the script/internal encoding (this might be clarified in the
docs or somewhere in the PHP i18n mailing list archives), and that's
why passing both in EUC works. As to why passing the body as JIS and
subject in EUC seems to work on the other system, uhhh Idunno, but I'd
try changing it (to EUC, EUC) on that system too, to see if it works
consinstently.

-dave

</pre>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00003" href="msg00003.html">Re: [tlug] Redhat Enterprise and PHPs MBSTRING</a></strong>
<ul><li><em>From:</em> Robert Fisher</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Next by Date:
<strong><a href="msg00001.html">[tlug] Toolbar button problem (uim-toolbar-gtk-systray, icewm)</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00003.html">Re: [tlug] Redhat Enterprise and PHPs MBSTRING</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00000"><strong>Date</strong></a></li>
<li><a href="threads.html#00000"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
