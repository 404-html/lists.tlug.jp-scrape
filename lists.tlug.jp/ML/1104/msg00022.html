<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [tlug] Monkey vs Apache!!! Fight! -->
<!--X-From-R13: Dnlzbaq Ina <ejna.xlbgbNtznvy.pbz> -->
<!--X-Date: Wed, 06 Apr 2011 14:42:59 +0900 -->
<!--X-Message-Id: 4D9BF6E3.5050906@gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: BANLkTimjpTEESJrzDcVNDmXQH1CEqKA11Q@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00021.html">Date Prev</a>][<a href="msg00023.html">Date Next</a>][<a href="msg00026.html">Thread Prev</a>][<a href="msg00024.html">Thread Next</a>][<a href="maillist.html#00022">Date Index</a>][<a href="threads.html#00022">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] Monkey vs Apache!!! Fight!</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Wed, 06 Apr 2011 14:15:15 +0900</li>
<li><strong>From</strong>: <strong>Raymond Wan &lt;<a href="mailto:rwan.kyoto@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Monkey%20vs%20Apache%21%21%21%20Fight%21">rwan.kyoto@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] Monkey vs Apache!!! Fight!</strong></li>
<li>References: &lt;<a href="mailto:BANLkTimjpTEESJrzDcVNDmXQH1CEqKA11Q@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Monkey%20vs%20Apache%21%21%21%20Fight%21">BANLkTimjpTEESJrzDcVNDmXQH1CEqKA11Q@example.com</a>&gt;</li>
<li>User-agent: Mozilla/5.0 (X11; U; Linux x86_64; en-US;	rv:1.9.1.16) Gecko/20110307 Icedove/3.0.11</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre style="margin: 0em;">

Hi Sach,


On 06/04/11 13:07, Sach Jobb wrote:
</pre><blockquote style="border-left: #5555EE solid 0.2em; margin: 0em; padding-left: 0.85em"><pre style="margin: 0em;">
Speaking with him on the phone, I learned that he has a regular OCN
connection, somewhere in Tokyo, and some 10 client machines or so that
share through a cheap firewall. Most of them are macs. As far as I can
tell he wasn't doing any kind of behavior that would possibly take
apache, or any other service down. He's just a normal user. So, that
just left me with more questions... is there some sort of virus on one
of his machines? Is the cheap fw getting confused and rapid fire
sending the same request uri over and over? Is apache just buggered?

So, my questions are:
1) Has anyone else experienced this sort of behavior before, and
2) What to you do to protect apache against somebody that just
suddenly goes nuts with the connections, intentionally or not?
</pre></blockquote><pre style="margin: 0em;">


</pre><tt>I don't have much experience with this...but I would think 
</tt><tt>that it can't be Apache's fault.  If a client sent a single 
</tt><tt>request and Apache did something crazy like spawning 
</tt><tt>processes uncontrollably, then maybe Apache or one of its 
</tt><tt>modules is at fault (or your server code, depending on what 
</tt><tt>it does).  But your logs indicate that there were distinct 
</tt><tt>accesses from a client; I don't know how you could protect 
</tt><tt>yourself from that.
</tt><pre style="margin: 0em;">

</pre><tt>It is probably hard to get more information from this 
</tt><tt>person, but what was he doing at the time?  With all these 
</tt><tt>accesses, did he notice that his network light was flashing 
</tt><tt>even though he wasn't doing anything (that happens to me 
</tt><tt>sometimes, so I can't blame him if he didn't think anything 
</tt><tt>of it...).  When you blocked his IP address, did he realize 
</tt><tt>something was wrong?  Sounds like Firefox was doing 
</tt><tt>something behind his back?
</tt><pre style="margin: 0em;">

</pre><tt>I've worked on a web server before, but it probably can't 
</tt><tt>protect itself from a DNS attack (or the unintentional 
</tt><tt>equivalent).  Some sites I go to restrict concurrent 
</tt><tt>accesses and if they exist, they lock the IP address 
</tt><tt>automatically for a few days with a message to ask you to 
</tt><tt>&quot;fix your system&quot; :-) -- doesn't help if you have a few 
</tt><tt>people going through a single gateway, but they don't seem 
</tt><tt>to care...
</tt><pre style="margin: 0em;">

</pre><tt>I guess you could monitor IP addresses and the web server's 
</tt><tt>load and use some heuristic and an automated e-mail to the 
</tt><tt>root user...
</tt><pre style="margin: 0em;">

Looking forward to any replies from others...

Ray



</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00024" href="msg00024.html">Re: [tlug] Monkey vs Apache!!! Fight!</a></strong>
<ul><li><em>From:</em> Sach Jobb</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00020" href="msg00020.html">[tlug] Monkey vs Apache!!! Fight!</a></strong>
<ul><li><em>From:</em> Sach Jobb</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00021.html">[tlug]  Monkey vs Apache!!! Fight!</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00023.html">Re: [tlug] Monkey vs Apache!!! Fight!</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00026.html">Re: [tlug] Monkey vs Apache!!! Fight!</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00024.html">Re: [tlug] Monkey vs Apache!!! Fight!</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00022"><strong>Date</strong></a></li>
<li><a href="threads.html#00022"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
