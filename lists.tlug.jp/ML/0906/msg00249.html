<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [tlug] Rsync exclusion question -->
<!--X-From-R13: Rbht [pZrna <qzpyrna635Ntznvy.pbz> -->
<!--X-Date: Thu, 11 Jun 2009 19:22:10 +0900 -->
<!--X-Message-Id: 956ae5a90906110321k54545d53rb3cbae6f7044aaa0@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 956ae5a90906100208k6ec1aeebnebb17f7534b8183a@mail.gmail.com -->
<!--X-Reference: 11380cb60906100242w7a13b869j5b4d3315a4125f53@mail.gmail.com -->
<!--X-Reference: 956ae5a90906100308l215adc81m1dcfbb54dc826472@mail.gmail.com -->
<!--X-Reference: d8fcc0800906100527p59d4d548v42999d96e7ad066c@mail.gmail.com -->
<!--X-Reference: 956ae5a90906100547i2e610cct42b8b075c50b6d6@mail.gmail.com -->
<!--X-Reference: d8fcc0800906100614s4c909d0fj8091e3bfe9926c18@mail.gmail.com -->
<!--X-Reference: 4A30D148.1090004@fremlin.org -->
<!--X-Reference: d8fcc0800906110258y553b9712hcb55c5a3ed4b6d69@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00248.html">Date Prev</a>][<a href="msg00250.html">Date Next</a>][<a href="msg00247.html">Thread Prev</a>][<a href="msg00251.html">Thread Next</a>][<a href="maillist.html#00249">Date Index</a>][<a href="threads.html#00249">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] Rsync exclusion question</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Thu, 11 Jun 2009 11:21:38 +0100</li>
<li><strong>From</strong>: <strong>Doug McLean &lt;<a href="mailto:dmclean635@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Rsync%20exclusion%20question">dmclean635@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] Rsync exclusion question</strong></li>
<li>References: &lt;<a href="mailto:956ae5a90906100208k6ec1aeebnebb17f7534b8183a@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Rsync%20exclusion%20question">956ae5a90906100208k6ec1aeebnebb17f7534b8183a@example.com</a>&gt;	&lt;<a href="mailto:11380cb60906100242w7a13b869j5b4d3315a4125f53@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Rsync%20exclusion%20question">11380cb60906100242w7a13b869j5b4d3315a4125f53@example.com</a>&gt;	&lt;<a href="mailto:956ae5a90906100308l215adc81m1dcfbb54dc826472@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Rsync%20exclusion%20question">956ae5a90906100308l215adc81m1dcfbb54dc826472@example.com</a>&gt;	&lt;<a href="mailto:d8fcc0800906100527p59d4d548v42999d96e7ad066c@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Rsync%20exclusion%20question">d8fcc0800906100527p59d4d548v42999d96e7ad066c@example.com</a>&gt;	&lt;<a href="mailto:956ae5a90906100547i2e610cct42b8b075c50b6d6@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Rsync%20exclusion%20question">956ae5a90906100547i2e610cct42b8b075c50b6d6@example.com</a>&gt;	&lt;<a href="mailto:d8fcc0800906100614s4c909d0fj8091e3bfe9926c18@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Rsync%20exclusion%20question">d8fcc0800906100614s4c909d0fj8091e3bfe9926c18@example.com</a>&gt;	&lt;<a href="mailto:4A30D148.1090004@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Rsync%20exclusion%20question">4A30D148.1090004@example.com</a>&gt;	&lt;<a href="mailto:d8fcc0800906110258y553b9712hcb55c5a3ed4b6d69@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Rsync%20exclusion%20question">d8fcc0800906110258y553b9712hcb55c5a3ed4b6d69@example.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Thu, Jun 11, 2009 at 10:58 AM, Josh Glover&lt;jmglov@example.com&gt; wrote:
&gt; 2009/6/11 John Fremlin &lt;john@example.com&gt;:
&gt;
&gt;&gt; Which shell expands &quot;*.leases&quot; in double quotes!?
&gt;
&gt; Well, from my tests, not Bash.
&gt;
&gt; Odd, I always thought you had to protect * and ?, but it looks like
&gt; I'm mistaken.
&gt;
&gt; Dunno what is going on with Doug's rsync commands, then.
&gt;
&gt; --
&gt; Cheers,
&gt; Josh

Well, as an update, use of single-quotes instead of double-quotes
seems to have helped.  No over-night sync-errors due to missing .lease
files, so I am pretty satisfied with the outcome.  Still, I am
enjoying this discussion of behavior on the shell with regard to
interpolation.

I think what happened is that the script (written in summary here) did
the following:

#!/bin/bash

rsync -a --exclude &quot;*.lease&quot; host:/path local_path/

If the script was run by, say, a system-user called 'sysuser' (not the
real name), then based on the script above, I think what it did was
interpolate &quot;*.lease&quot; to look for any .lease files in sysuser's home
dir, or wherever it tried to run the script.  And only after that, did
it then run the rsync command.  Since the document repository was
elsewhere on the system, it would naturally find no .lease files and
fail to exclude them.

By using single-quotes, the shell would defer interpolation of the
file-exclusion to the rsync command itself.  In other words, defer and
let rsync sort things out, which is as it should be.

Hopefully I am right.

-- 
Doug McLean

Blog: <a  rel="nofollow" href="http://nihonshukyo.wordpress.com/">http://nihonshukyo.wordpress.com/</a>

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00251" href="msg00251.html">Re: [tlug] Rsync exclusion question</a></strong>
<ul><li><em>From:</em> Josh Glover</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00190" href="msg00190.html">[tlug] [TLUG] Rsync exclusion question</a></strong>
<ul><li><em>From:</em> Doug McLean</li></ul></li>
<li><strong><a name="00197" href="msg00197.html">Re: [tlug] [TLUG] Rsync exclusion question</a></strong>
<ul><li><em>From:</em> Clemens Schwaighofer</li></ul></li>
<li><strong><a name="00200" href="msg00200.html">Re: [tlug] [TLUG] Rsync exclusion question</a></strong>
<ul><li><em>From:</em> Doug McLean</li></ul></li>
<li><strong><a name="00218" href="msg00218.html">Re: [tlug] [TLUG] Rsync exclusion question</a></strong>
<ul><li><em>From:</em> Josh Glover</li></ul></li>
<li><strong><a name="00219" href="msg00219.html">Re: [tlug] [TLUG] Rsync exclusion question</a></strong>
<ul><li><em>From:</em> Doug McLean</li></ul></li>
<li><strong><a name="00221" href="msg00221.html">Re: [tlug] [TLUG] Rsync exclusion question</a></strong>
<ul><li><em>From:</em> Josh Glover</li></ul></li>
<li><strong><a name="00246" href="msg00246.html">Re: [tlug] Rsync exclusion question</a></strong>
<ul><li><em>From:</em> John Fremlin</li></ul></li>
<li><strong><a name="00247" href="msg00247.html">Re: [tlug] Rsync exclusion question</a></strong>
<ul><li><em>From:</em> Josh Glover</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00248.html">Re: [tlug] (OT) The enigma of Japan</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00250.html">Re: [tlug] (OT) The enigma of Japan</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00247.html">Re: [tlug] Rsync exclusion question</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00251.html">Re: [tlug] Rsync exclusion question</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00249"><strong>Date</strong></a></li>
<li><a href="threads.html#00249"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
