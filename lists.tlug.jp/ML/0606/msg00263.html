<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [tlug] Something is eating my disk space -->
<!--X-From-R13: oehab enbhyg <oehabNenbhyg.pbz> -->
<!--X-Date: Thu, 29 Jun 2006 00:33:37 +0900 -->
<!--X-Message-Id: 44A2A149.6030908@example.com -->
<!--X-Content-Type: multipart/signed -->
<!--X-Reference: 44A0D38C.8020109@example.com -->
<!--X-Reference: 44A0E3E4.7080302@example.com&#45;e.co.jp -->
<!--X-Reference: 20060627095847.41b7232a.jep200404@example.com -->
<!--X-Reference: 87wtb23qjr.fsf@example.com -->
<!--X-Derived: pgpCxSXOHtEz3.pgp -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00262.html">Date Prev</a>][<a href="msg00264.html">Date Next</a>][<a href="msg00261.html">Thread Prev</a>][<a href="msg00265.html">Thread Next</a>][<a href="maillist.html#00263">Date Index</a>][<a href="threads.html#00263">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] Something is eating my disk space</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Thu, 29 Jun 2006 00:33:29 +0900</li>
<li><strong>From</strong>: <strong>bruno raoult &lt;<a href="mailto:bruno@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Something%20is%20eating%20my%20disk%20space">bruno@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] Something is eating my disk space</strong></li>
<li>References: &lt;<a href="mailto:44A0D38C.8020109@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Something%20is%20eating%20my%20disk%20space">44A0D38C.8020109@example.com</a>&gt;	&lt;<a href="mailto:44A0E3E4.7080302@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Something%20is%20eating%20my%20disk%20space">44A0E3E4.7080302@example.com</a>&gt;	&lt;<a href="mailto:20060627095847.41b7232a.jep200404@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Something%20is%20eating%20my%20disk%20space">20060627095847.41b7232a.jep200404@example.com</a>&gt;	&lt;<a href="mailto:87wtb23qjr.fsf@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Something%20is%20eating%20my%20disk%20space">87wtb23qjr.fsf@example.com</a>&gt;</li>
<li>User-agent: Thunderbird 1.5 (X11/20051201)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>Stephen J. Turnbull wrote:
&gt; &quot;find&quot; is the wrong tool for the job, anyway.  The problem is disk
&gt; usage, so you want &quot;du&quot;, as Josh suggested.  Once you've isolated the
&gt; subtree that's filling up, a direct &quot;ls -la&quot; will show any problem
&gt; files.  (You want the -a mostly in case you've been hacked.  Sane
&gt; programs don't write megabytes to dot-files.  Did I say &quot;sane&quot;?  Oops,
&gt; OK, if you've got spamassassin, Mozilla, or any GNOME program
&gt; installed, you might as well be hacked from this point of view....)
&gt; 
&gt; du doesn't count inodes, which can be a problem, as somebody
&gt; mentioned, but that will generate a different message (yes, I have the
&gt; Serder Argic T-shirt).  IIRC on most Unix filesystems inodes do not
&gt; come out of &quot;user space&quot;, anyway; they're accounted for by the
&gt; (usually) huge overestimate of space reserved for root.

Sometimes these tools (find, du, etc...) are not enough, if someone was
silly enough to clean a file with &quot;rm&quot; without wondering if the file was
opened or not by an application.
If already opened, the &quot;rm&quot; will have no effect on the remaining disk
space until the using process is killed.
I saw this so many times from some &quot;admins&quot; that it is worth noticing it
I guess...

The plan to clean these files without killing the writing apps is often
a &quot;cat /dev/null &gt; the-big-file&quot; (good for logfiles as they are opened
in append mode). You will immediately see your file being as big as
before, but your disk got fresh air (as the new writings will still be
done at the current end of the opened file -which gives the size as
given by ls- without allocating the previous blocks -which accounts for
your disk space-).

br.

PS. To play with this feature you can try this small program.
#include &lt;fcntl.h&gt;
#include &lt;unistd.h&gt;
main(ac, av)
        char **av;
{
        int f;

        if ((f=open(*(av+1), O_RDWR|O_CREAT))&gt;=0) {
                lseek(f, 1000000L, SEEK_SET);
                write(f,&quot;1&quot;,1);
                close(f);
        } else {
                perror(&quot;cannot open file&quot;);
        }
}
If you run it, ls will show you a big file, du will show you a 1 block
file (and available disk space will have seen a 1 block decrease too in
the process).

-- 
GPG Key: 653514E5 (<a  rel="nofollow" href="http://www.raoult.com/gpg">http://www.raoult.com/gpg</a>)
--
Real Men do not use signatures.

</pre><p><strong>Attachment:
<a href="pgpCxSXOHtEz3.pgp" ><tt>signature.asc</tt></a></strong><br>
<em>Description:</em> OpenPGP digital signature</p>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00265" href="msg00265.html">Re: [tlug] Something is eating my disk space</a></strong>
<ul><li><em>From:</em> Dave M G</li></ul></li>
<li><strong><a name="00267" href="msg00267.html">Re: [tlug] Something is eating my disk space</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00252" href="msg00252.html">[tlug] Something is eating my disk space</a></strong>
<ul><li><em>From:</em> Dave M G</li></ul></li>
<li><strong><a name="00255" href="msg00255.html">Re: [tlug] Something is eating my disk space</a></strong>
<ul><li><em>From:</em> Keith Bawden</li></ul></li>
<li><strong><a name="00260" href="msg00260.html">Re: [tlug] Something is eating my disk space</a></strong>
<ul><li><em>From:</em> Jim</li></ul></li>
<li><strong><a name="00261" href="msg00261.html">Re: [tlug] Something is eating my disk space</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00262.html">[tlug] linux and zarus?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00264.html">Re: [tlug] linux and zarus?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00261.html">Re: [tlug] Something is eating my disk space</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00265.html">Re: [tlug] Something is eating my disk space</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00263"><strong>Date</strong></a></li>
<li><a href="threads.html#00263"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
