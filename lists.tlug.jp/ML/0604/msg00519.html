<!-- MHonArc v2.6.12 -->
<!--X-Subject: Re: [tlug] Linux Filesystems Comparison Article -->
<!--X-From-R13: Oynva Vbnat <ubnatnNznp.pbz> -->
<!--X-Date: Fri, 28 Apr 2006 15:16:55 +0900 -->
<!--X-Message-Id: 3535630.1146204807351.JavaMail.hoanga@example.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 444F5E39.1000108@example.com -->
<!--X-Reference: 2d4c9c600604261752s8e3ef5fo701a643acda1113e@example.com -->
<!--X-Reference: 1146108972.4496.14.camel@example.com&#45;165.rosenet.ne.jp -->
<!--X-Reference: 20060427105939.e37f0136.godwin.stewart@example.com -->
<!--X-Reference: 445090D0.1060803@example.com&#45;sys.co.jp -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-type" content="text/html">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00518.html">Date Prev</a>][<a href="msg00520.html">Date Next</a>][<a href="msg00513.html">Thread Prev</a>][<a href="msg00533.html">Thread Next</a>][<a href="maillist.html#00519">Date Index</a>][<a href="threads.html#00519">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] Linux Filesystems Comparison Article</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Thu, 27 Apr 2006 23:13:27 -0700</li>
<li><strong>From</strong>: <strong>Alain Hoang &lt;<a href="mailto:hoanga@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Linux%20Filesystems%20Comparison%20Article">hoanga@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] Linux Filesystems Comparison Article</strong></li>
<li>References: &lt;<a href="msg00497.html">444F5E39.1000108@example.com</a>&gt;	&lt;<a href="msg00501.html">2d4c9c600604261752s8e3ef5fo701a643acda1113e@example.com</a>&gt;	&lt;<a href="msg00509.html">1146108972.4496.14.camel@example.com</a>&gt;	&lt;<a href="msg00511.html">20060427105939.e37f0136.godwin.stewart@example.com</a>&gt;	&lt;<a href="msg00513.html">445090D0.1060803@example.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre> 
On Thursday, April 27, 2006, at 03:39AM, Edward Middleton &lt;edward@example.com&gt; wrote:

&gt;Godwin Stewart wrote:
&gt;&gt;
&gt;&gt; Depending on exactly what's being written when the power goes down, it can
&gt;&gt; hose an entire filesystem.
&gt;&gt;
&gt;&gt; Filesystem performance isn't too much of an issue here, so I use ext3
&gt;&gt; everywhere.
&gt;
&gt;If you not on a UPS the only really advantage of a journaling filesystem
&gt;is that your fsck will be quicker after a power failure.  There is no
&gt;guarantee your file data will be in a consistent state whether you use
&gt;ext3 with full data journaling or another filesystem with only metadata
&gt;journaling.
&gt;

Speaking of file data being inconsistent.  Due to a misjudgement on my part of upgrading certain packages on my Gentoo system.  I think I was trying to update the nvidia-glx driver (this part is fuzzy) and it might have updated the libc library along with it while X11 was still running I managed to slag my Gentoo install just recently.  The problem came after merging the packages into my system.  I tried to exit out of X (perhaps running X when updating an X11 binary driver isn't such a great idea) and it just hung for a long while so I ended up shutting the machine off with the power switch.  When I tried to reboot, the kernel paniced after initialy mounting the filesystem reporting init wasn't around which I haven't seen for awhile.

Last evening I tried booting a Gentoo install CD to troubleshoot and I ran the typical fsck checks against the filesystems.  Note, I'm running on top of JFS.  It was bad enough I had to run fsck.jfs against the filesystem to 'bring it to a consistent' state however it seems even after a bunch of disk churning and 'putting things right' I still can't boot my system since libc and one of the other system libs now thinks it is an MPEG-2 file according to file rather than the system library it is.  

Moral of the story:  Well, the journaled file system didn't save me from user stupidity but it did certainly felt like it was helping.


=== Some troubleshooting that I've tried for the curious ===

I've tried:
1. Just trying to chroot from the Gentoo install CD without doing anything after the file system checks
2. Copying the install CD libc and appropriate libraries from a Gentoo install CD and updating the libc symlinks to point to them and chrooting into the base system
3. Pointing the symlinks that most of the programs expect to a previous libc/system libs lying on the hard drive the symlinks and chrooting into the base system

The above methods didn't work (Segmentation faults if I try to enter a chroot on my system) which I guess is to be expected since ldd shows that the expected memory locations that my Gentoo 'world' expects is in another location than the ones that the Gentoo install CD export.

I'm currently wondering if there's a way to recover my system without having to reinstall but considering world is linked against the libc version that I had, I don't see any easy way to fix this.   Any pointers from more hard-core Linux gurus?  (Besides backups).  Since this is my personal desktop machine, I'm not very worried if I have to redo everything although I'm now curious if there is a way to recover from such a dilemna.

Some options I'm thinking of
1. Copy all important data I care about, take inventory of installed pacakges, and reinstall from scratch)
2. Untar a stage 3 over the current dead system and try to rebuild things in place (sounds utterly risky and jumping into an inconsistent state)
3. See if I can rebuild the relevant system libraries somehow and merge them into the system and see if that gets me limping along just enough to emerge world
4. Do nothing for awhile and wait for some really bright (or bad) idea to hit me on how to fix it

Alain

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00533" href="msg00533.html">Re: [tlug] Linux Filesystems Comparison Article</a></strong>
<ul><li><em>From:</em> Stuart Luppescu</li></ul></li>
<li><strong><a name="00535" href="msg00535.html">Re: [tlug] Linux Filesystems Comparison Article</a></strong>
<ul><li><em>From:</em> Edward Middleton</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00497" href="msg00497.html">[tlug] Linux Filesystems Comparison Article</a></strong>
<ul><li><em>From:</em> Alain Hoang</li></ul></li>
<li><strong><a name="00501" href="msg00501.html">Re: [tlug] Linux Filesystems Comparison Article</a></strong>
<ul><li><em>From:</em> Patrick Niessen</li></ul></li>
<li><strong><a name="00509" href="msg00509.html">Re: [tlug] Linux Filesystems Comparison Article</a></strong>
<ul><li><em>From:</em> Shawn</li></ul></li>
<li><strong><a name="00511" href="msg00511.html">Re: [tlug] Linux Filesystems Comparison Article</a></strong>
<ul><li><em>From:</em> Godwin Stewart</li></ul></li>
<li><strong><a name="00513" href="msg00513.html">Re: [tlug] Linux Filesystems Comparison Article</a></strong>
<ul><li><em>From:</em> Edward Middleton</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00518.html">Re: [tlug] 2.6 Kernel vs 2.4 Kernel: &quot;internal s/w&quot;</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00520.html">Re: [tlug] Linux Filesystems Comparison Article</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00513.html">Re: [tlug] Linux Filesystems Comparison Article</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00533.html">Re: [tlug] Linux Filesystems Comparison Article</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00519"><strong>Date</strong></a></li>
<li><a href="threads.html#00519"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
