<!-- MHonArc v2.6.10 -->
<!--X-Subject: Re: [tlug] Fast HTTP Talk, Httperf and Libevent,	Pre&#45;talk Hacking Session -->
<!--X-From-R13: "@thlra Hh Vhat" <ihuhat16cyhfNtznvy.pbz> -->
<!--X-Date: Wed, 05 Nov 2008 15:41:32 +0900 -->
<!--X-Message-Id: 78d7dd350811042241r44f71e24y40702702dd3462a0@mail.gmail.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 87fxm9tfx7.fsf&#45;genuine&#45;vii@john.fremlin.org -->
<!--X-Reference: 20081103093743.GB14296@lucky.cynic.net -->
<!--X-Reference: 87zlkhrreb.fsf&#45;genuine&#45;vii@john.fremlin.org -->
<!--X-Reference: 20081103141806.GA12339@smtp.office.cynic.net -->
<!--X-Reference: 490FFE94.6030301@bebear.net -->
<!--X-Reference: 20081104111251.GB27318@smtp.office.cynic.net -->
<!--X-Reference: 491049E6.9070201@bebear.net -->
<!--X-Reference: 20081105000104.GC9096@pragmatic.cynic.net -->
<!--X-Reference: 78d7dd350811042000u50e99f81l7bee1a130a05f66d@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00070.html">Date Prev</a>][<a href="msg00072.html">Date Next</a>][<a href="msg00067.html">Thread Prev</a>][<a href="msg00078.html">Thread Next</a>][<a href="maillist.html#00071">Date Index</a>][<a href="threads.html#00071">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] Fast HTTP Talk, Httperf and Libevent,	Pre-talk Hacking Session</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Wed, 5 Nov 2008 15:41:29 +0900</li>
<li><strong>From</strong>: <strong>&quot;Nguyen Vu Hung&quot; &lt;<a href="mailto:vuhung16plus@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Fast%20HTTP%20Talk%2C%20Httperf%20and%20Libevent%2C%9Pre-talk%20Hacking%20Session">vuhung16plus@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] Fast HTTP Talk, Httperf and Libevent,	Pre-talk Hacking Session</strong></li>
<li>References: &lt;<a href="msg00029.html">87fxm9tfx7.fsf-genuine-vii@john.fremlin.org</a>&gt;	&lt;<a href="msg00033.html">20081103093743.GB14296@lucky.cynic.net</a>&gt;	&lt;<a href="msg00034.html">87zlkhrreb.fsf-genuine-vii@john.fremlin.org</a>&gt;	&lt;<a href="msg00037.html">20081103141806.GA12339@smtp.office.cynic.net</a>&gt;	&lt;<a href="msg00054.html">490FFE94.6030301@bebear.net</a>&gt;	&lt;<a href="msg00057.html">20081104111251.GB27318@smtp.office.cynic.net</a>&gt;	&lt;<a href="msg00058.html">491049E6.9070201@bebear.net</a>&gt;	&lt;<a href="msg00063.html">20081105000104.GC9096@pragmatic.cynic.net</a>&gt;	&lt;<a href="msg00067.html">78d7dd350811042000u50e99f81l7bee1a130a05f66d@mail.gmail.com</a>&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Wed, Nov 5, 2008 at 1:00 PM, Nguyen Vu Hung &lt;vuhung16plus@example.com&gt; wrote:
&gt; On Wed, Nov 5, 2008 at 9:01 AM, Curt Sampson &lt;cjs@example.com&gt; wrote:
&gt;&gt; On 2008-11-04 22:11 +0900 (Tue), Edward Middleton wrote:
&gt;&gt;
&gt;&gt;&gt;&gt;&gt; It looks like httperf 0.9.1[1]. will be libevent based.
&gt;&gt;&gt;&gt; ...
&gt;&gt;&gt; <a  href="http://www.comlore.com/2008/07/httperf-and-libevent-and-future-of.html">http://www.comlore.com/2008/07/httperf-and-libevent-and-future-of.html</a>
&gt;&gt;&gt; <a  href="http://www.hpl.hp.com/hosted/linux/mail-archives/httperf/2008-July/000492.html">http://www.hpl.hp.com/hosted/linux/mail-archives/httperf/2008-July/000492.html</a>
&gt;&gt;
&gt;&gt; Now that's great news!
&gt;
&gt; Someone has used libevent's evhttp_handle_request to create a python
&gt; based( which uses swig and pyevent)
&gt; web server.
&gt;
&gt; Unfortunately, lighttpd still beats it in team of performance.
&gt; <a  href="http://william-os4y.livejournal.com/3169.html">http://william-os4y.livejournal.com/3169.html</a>
&gt;
&gt; Just FYI.
I've tried libevent:

web server( a simple skeleton):
<a  href="http://aoclife.ddo.jp:8080/dIIgS0n6">http://aoclife.ddo.jp:8080/dIIgS0n6</a>
source code:
<a  href="http://aoclife.ddo.jp/~vuhung/foss/libevent_http.c">http://aoclife.ddo.jp/~vuhung/foss/libevent_http.c</a>

ab benchmark against libevent_http: 197 req/sec
ab benchmark against httpd 2.2.3: 157 req/sec

I have not tested libev but it sounds better than libevent:
<a  href="http://www.zenebo.com/word/asynchronous-programming/lighttz-a-simple-and-fast-web-server/">http://www.zenebo.com/word/asynchronous-programming/lighttz-a-simple-and-fast-web-server/</a>
<a  href="http://libev.schmorp.de/bench.html">http://libev.schmorp.de/bench.html</a>

[vuhung@ bin]$ ./ab  -n 10000 -c 1000  <a  href="http://aoclife.ddo.jp:8080/dIIgS0n6">http://aoclife.ddo.jp:8080/dIIgS0n6</a>
This is ApacheBench, Version 1.3d &lt;$Revision: 1.73 $&gt; apache-1.3
Copyright (c) 1996 Adam Twiss, Zeus Technology Ltd, <a  href="http://www.zeustech.net/">http://www.zeustech.net/</a>
Copyright (c) 2006 The Apache Software Foundation, <a  href="http://www.apache.org/">http://www.apache.org/</a>

Benchmarking aoclife.ddo.jp (be patient)
Completed 1000 requests
Completed 2000 requests
Completed 3000 requests
Completed 4000 requests
Completed 5000 requests
Completed 6000 requests
Completed 7000 requests
Completed 8000 requests
Completed 9000 requests
Finished 10000 requests
Server Software:
Server Hostname:        aoclife.ddo.jp
Server Port:            8080

Document Path:          /dIIgS0n6
Document Length:        238 bytes

Concurrency Level:      1000
Time taken for tests:   53.805 seconds
Complete requests:      10000
Failed requests:        1
   (Connect: 0, Length: 1, Exceptions: 0)
Broken pipe errors:     0
Total transferred:      3055636 bytes
HTML transferred:       2408084 bytes
Requests per second:    185.86 [#/sec] (mean)
Time per request:       5380.50 [ms] (mean)
Time per request:       5.38 [ms] (mean, across all concurrent requests)
Transfer rate:          56.79 [Kbytes/sec] received

Connnection Times (ms)
              min  mean[+/-sd] median   max
Connect:       12   851 2573.0    150 49650
Processing:    27  1348 4981.9    139 39442
Waiting:       10  1348 4982.0    139 39441
Total:         27  2200 6037.0    315 52844

Percentage of the requests served within a certain time (ms)
  50%    315
  66%    359
  75%    386
  80%    406
  90%   3386
  95%  14617
  98%  30017
  99%  38889
 100%  52844 (last request)

[vuhung@ bin]$ ./ab  -n 10000 -c 1000  <a  href="http://aoclife.ddo.jp/">http://aoclife.ddo.jp/</a>
This is ApacheBench, Version 1.3d &lt;$Revision: 1.73 $&gt; apache-1.3
Copyright (c) 1996 Adam Twiss, Zeus Technology Ltd, <a  href="http://www.zeustech.net/">http://www.zeustech.net/</a>
Copyright (c) 2006 The Apache Software Foundation, <a  href="http://www.apache.org/">http://www.apache.org/</a>

Benchmarking aoclife.ddo.jp (be patient)
Completed 1000 requests
Completed 2000 requests
Completed 3000 requests
Completed 4000 requests
Completed 5000 requests
Completed 6000 requests
Completed 7000 requests
Completed 8000 requests
Completed 9000 requests
Finished 10000 requests
Server Software:        Apache/2.2.3
Server Hostname:        aoclife.ddo.jp
Server Port:            80

Document Path:          /
Document Length:        1462 bytes

Concurrency Level:      1000
Time taken for tests:   63.499 seconds
Complete requests:      10000
Failed requests:        378
   (Connect: 0, Length: 378, Exceptions: 0)
Broken pipe errors:     0
Total transferred:      16917094 bytes
HTML transferred:       14314264 bytes
Requests per second:    157.48 [#/sec] (mean)
Time per request:       6349.90 [ms] (mean)
Time per request:       6.35 [ms] (mean, across all concurrent requests)
Transfer rate:          266.42 [Kbytes/sec] received

Connnection Times (ms)
              min  mean[+/-sd] median   max
Connect:        8  1200 2585.8    123 54690
Processing:    19  1754 4180.5    135 45886
Waiting:       10  1754 4180.5    135 45887
Total:         19  2955 4760.4    278 63017

Percentage of the requests served within a certain time (ms)
  50%    278
  66%    349
  75%   3208
  80%   3302
  90%   9253
  95%  14597
  98%  23827
  99%  36640
 100%  63017 (last request)

-- 
Best Regards,
Nguyen Hung Vu ( Nguyễn Vũ Hưng )
vuhung16plus{remove}@example.com , YIM: vuhung16 , Skype: vuhung16dg
A brief profile: <a  href="http://www.hn.is.uec.ac.jp/~vuhung/Nguyen.Vu.Hung.html">http://www.hn.is.uec.ac.jp/~vuhung/Nguyen.Vu.Hung.html</a>
</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00078" href="msg00078.html">Re: [tlug] Fast HTTP Talk, Httperf and Libevent,	Pre-talk Hacking	Session</a></strong>
<ul><li><em>From:</em> Edward Middleton</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00029" href="msg00029.html">[tlug] [RFC] Outline of the fast HTTP talk</a></strong>
<ul><li><em>From:</em> John Fremlin</li></ul></li>
<li><strong><a name="00033" href="msg00033.html">Re: [tlug] [RFC] Outline of the fast HTTP talk</a></strong>
<ul><li><em>From:</em> Curt Sampson</li></ul></li>
<li><strong><a name="00034" href="msg00034.html">[tlug] Re: [RFC] Outline of the fast HTTP talk</a></strong>
<ul><li><em>From:</em> John Fremlin</li></ul></li>
<li><strong><a name="00037" href="msg00037.html">[tlug] Re: [RFC] Outline of the fast HTTP talk</a></strong>
<ul><li><em>From:</em> Curt Sampson</li></ul></li>
<li><strong><a name="00054" href="msg00054.html">Re: [tlug] Re: [RFC] Outline of the fast HTTP talk</a></strong>
<ul><li><em>From:</em> Edward Middleton</li></ul></li>
<li><strong><a name="00057" href="msg00057.html">Re: [tlug] Re: [RFC] Outline of the fast HTTP talk</a></strong>
<ul><li><em>From:</em> Curt Sampson</li></ul></li>
<li><strong><a name="00058" href="msg00058.html">Re: [tlug] Re: [RFC] Outline of the fast HTTP talk</a></strong>
<ul><li><em>From:</em> Edward Middleton</li></ul></li>
<li><strong><a name="00063" href="msg00063.html">[tlug] Fast HTTP Talk, Httperf and Libevent,	Pre-talk Hacking Session</a></strong>
<ul><li><em>From:</em> Curt Sampson</li></ul></li>
<li><strong><a name="00067" href="msg00067.html">Re: [tlug] Fast HTTP Talk, Httperf and Libevent,	Pre-talk Hacking Session</a></strong>
<ul><li><em>From:</em> Nguyen Vu Hung</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00070.html">Re: [tlug] X11 Session Manager Setup</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00072.html">[tlug] Re: [RFC] Outline of the fast HTTP talk</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00067.html">Re: [tlug] Fast HTTP Talk, Httperf and Libevent,	Pre-talk Hacking Session</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00078.html">Re: [tlug] Fast HTTP Talk, Httperf and Libevent,	Pre-talk Hacking	Session</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00071"><strong>Date</strong></a></li>
<li><a href="threads.html#00071"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="../../list.html"> Mailing List </a></td>
<td align=center><a href="../../linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="../../members.html">TLUG Members</a></td>
<td align=center><a href="../../linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
