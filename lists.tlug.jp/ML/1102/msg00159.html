<!-- MHonArc v2.6.16 -->
<!--X-Subject: [tlug] Do you whitelist or blacklist utf&#45;8? -->
<!--X-From-R13: Rnir [ U <qnirNnegvpynff.bet> -->
<!--X-Date: Tue, 22 Feb 2011 19:57:15 +0900 -->
<!--X-Message-Id: 4D639689.1010302@articlass.org -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00158.html">Date Prev</a>][<a href="msg00160.html">Date Next</a>][<a href="msg00219.html">Thread Prev</a>][<a href="msg00160.html">Thread Next</a>][<a href="maillist.html#00159">Date Index</a>][<a href="threads.html#00159">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>[tlug] Do you whitelist or blacklist utf-8?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Tue, 22 Feb 2011 19:57:13 +0900</li>
<li><strong>From</strong>: <strong>Dave M G &lt;<a href="mailto:dave@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20Do%20you%20whitelist%20or%20blacklist%20utf-8%3F">dave@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>[tlug] Do you whitelist or blacklist utf-8?</strong></li>
<li>User-agent: Mozilla/5.0 (X11; U; Linux i686; en-US;	rv:1.9.2.13) Gecko/20101208 Thunderbird/3.1.7</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>TLUG,

I've been going a little mental today trying to figure out how to filter
out possible malicious characters from POST data going to my site. I
want to block things like &lt;,&gt;, *. etc...

The thing is that I also want to be able to allow CJK characters, and
any other language with non-Latin characters. This is a snap to do if
you just want to allow 0-9a-zA-Z. But once you get into Unicode land, it
seems to be a whole other ballgame.

I've got three stages I want to filter on. First I want to block
characters on the client side with Javascript, so that the user is aware
of what characters are permissible when entering names and whatnot. Then
I want to block any bad characters on the server side in PHP to make
sure no script kiddies have tried to POST anything nasty. And also, just
for good measure, I want to ensure no nastiness is inserted into my MySQL.

I'd like all three steps to be consistent with each other, so I'm trying
to standardize a set of bad characters that I can filter for at each step.

However, where I've broken down is whether or not I should blacklist bad
characters (where I fear I might miss one), whitelist good characters
(seems tough to get a whitelist that's utf-8 compatible), or do
something like make comparisons on HTML entities or with regex or
something using built in functions (PHP and Javascript differ on
specific functions and their results).

Since you guys are the go-to people for handling utf-8 text, I thought
maybe you've encountered this before.

How do you handle filtering malicious code from utf-8 text that contains
CJK and other languages?

And how do you do it in PHP and Javascript?

-- 
Dave M G

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00160" href="msg00160.html">Re: [tlug] Do you whitelist or blacklist utf-8?</a></strong>
<ul><li><em>From:</em> Jean-Christian Imbeault</li></ul></li>
<li><strong><a name="00164" href="msg00164.html">Re: [tlug] Do you whitelist or blacklist utf-8?</a></strong>
<ul><li><em>From:</em> Shmuel Fomberg</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00158.html">Re: [tlug] [announcement] 2011-02-19 Technical meeting.</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00160.html">Re: [tlug] Do you whitelist or blacklist utf-8?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00219.html">Re: [tlug] cacert question</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00160.html">Re: [tlug] Do you whitelist or blacklist utf-8?</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00159"><strong>Date</strong></a></li>
<li><a href="threads.html#00159"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
