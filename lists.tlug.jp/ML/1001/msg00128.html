<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [tlug] how to tune reiser4 for millions of files? -->
<!--X-From-R13: [vpuny Vnwrx <unwrx1Nxneybi.zss.phav.pm> -->
<!--X-Date: Thu, 28 Jan 2010 22:27:37 +0900 -->
<!--X-Message-Id: 20100128132701.GI13095@wasi.karlov.mff.cuni.cz -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 20100128073847.GH13095@wasi.karlov.mff.cuni.cz -->
<!--X-Reference: 20100128095957.GB24344@analytic.cynic.net -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00127.html">Date Prev</a>][<a href="msg00129.html">Date Next</a>][<a href="msg00127.html">Thread Prev</a>][<a href="msg00129.html">Thread Next</a>][<a href="maillist.html#00128">Date Index</a>][<a href="threads.html#00128">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] how to tune reiser4 for millions of files?</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Thu, 28 Jan 2010 14:27:01 +0100</li>
<li><strong>From</strong>: <strong>Michal Hajek &lt;<a href="mailto:hajek1@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20how%20to%20tune%20reiser4%20for%20millions%20of%20files%3F">hajek1@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] how to tune reiser4 for millions of files?</strong></li>
<li>References: &lt;<a href="mailto:20100128073847.GH13095@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20how%20to%20tune%20reiser4%20for%20millions%20of%20files%3F">20100128073847.GH13095@example.com</a>&gt;	&lt;<a href="mailto:20100128095957.GB24344@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20how%20to%20tune%20reiser4%20for%20millions%20of%20files%3F">20100128095957.GB24344@example.com</a>&gt;</li>
<li>User-agent: Mutt/1.5.18 (2008-05-17)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>
thank you for a quick response, I will try to clarify the issue...

* Curt Sampson (cjs@example.com) [100128 11:00]:
&gt; I can provide more ideas if you tell us more about what sort of analysis
&gt; you're trying to do.

the analysis itself is not a problem at the moment. I believe that
by rewriting the program one can compute the whole thing in an hour or
so. Especially I believe one could employ cuda and nvidia card to get
even better result, since the thing is easily paralelizable (? not sure
about the correct English word). 

My attention is more on the hw or system side of the problem. That is, 
can I do something with the system (OS, hw..etc.) to speed things up?

My first idea was to use reiser4, since I have found this info [1]:

&quot;Fast handling of very large directories with hundreds of millions of
files (yes, millions of files in a single directory without affecting
performance).&quot; 

Later I found a tip about using &quot;notail&quot; mount option or maybe a
different hash than the default &quot;r5&quot;. But this I did not try yet. 
Does anyone have an experience?

All maybe a different filesystem altogether?  Or maybe using lvm with
the idea to &quot;spread&quot; the fs onto more hw, or maybe use ssd disk? Or...I
do not know. So maybe somebody comes with an interesting idea :]

The kernel is 2.6.31-gentoo-r6, hw is  dell poweredge 6650 [2]
with two scsi Megaraid PERC 4/dc cards. Right now I perform the analysis
on one array with raid5. The other array is free. 

Surely, the application will get rewritten and if I do not find any good
idea to speed the system, it will be no catastrophe too. But I am very
curios if there is some tip or tweak which would help at least a little
bit...

best regards
Michal

[1] <a  rel="nofollow" href="http://www.ibm.com/developerworks/aix/library/au-unix-reiserFS/">http://www.ibm.com/developerworks/aix/library/au-unix-reiserFS/</a>
[2] <a  rel="nofollow" href="http://www.dell.com/downloads/global/products/pedge/en/66x0_specs.pdf">http://www.dell.com/downloads/global/products/pedge/en/66x0_specs.pdf</a>
    16GB ram, 4x intel 2.4 GHz hyperthreading cpu. 

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00129" href="msg00129.html">Re: [tlug] how to tune reiser4 for millions of files?</a></strong>
<ul><li><em>From:</em> Francois Cartegnie</li></ul></li>
<li><strong><a name="00130" href="msg00130.html">Re: [tlug] how to tune reiser4 for millions of files?</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
<li><strong><a name="00152" href="msg00152.html">Re: [tlug] how to tune reiser4 for millions of files?</a></strong>
<ul><li><em>From:</em> Curt Sampson</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00126" href="msg00126.html">[tlug] how to tune reiser4 for millions of files?</a></strong>
<ul><li><em>From:</em> Michal Hajek</li></ul></li>
<li><strong><a name="00127" href="msg00127.html">Re: [tlug] how to tune reiser4 for millions of files?</a></strong>
<ul><li><em>From:</em> Curt Sampson</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00127.html">Re: [tlug] how to tune reiser4 for millions of files?</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00129.html">Re: [tlug] how to tune reiser4 for millions of files?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00127.html">Re: [tlug] how to tune reiser4 for millions of files?</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00129.html">Re: [tlug] how to tune reiser4 for millions of files?</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00128"><strong>Date</strong></a></li>
<li><a href="threads.html#00128"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
