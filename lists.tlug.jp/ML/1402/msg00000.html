<!-- MHonArc v2.6.18 -->
<!--X-Subject: Re: [tlug] SSD caching of 10x 10GB files on slow NAS -->
<!--X-From-R13: [vyrf Qbyzna <zpbyznaNtznvy.pbz> -->
<!--X-Date: Tue, 04 Feb 2014 08:45:40 +0900 -->
<!--X-Message-Id: CAL=gY81nsQrmK7Knr0KmJT0SDNOttHbna+iMwymvO=ZDLJG+jg@mail.gmail.com -->
<!--X-Content-Type: multipart/alternative -->
<!--X-Reference: CAL=gY80QoGCW9_TnDBF7ix_qyO72iBmaxoWNUKS9LZow9RhYag@mail.gmail.com -->
<!--X-Reference: CAKXLc7fFCCvFp=2Hu889pYu_smjTsj+2CeSc6oTZnFchT18ZeQ@mail.gmail.com -->
<!--X-Reference: CAL=gY82vfHKR0DWxq5RwaTmqbk4Q5Tit1Bq_mN1ok0jqKd4PGQ@mail.gmail.com -->
<!--X-Reference: CAKXLc7eRXSDuhL6bZHwaMFW2X=KyKdrbp+Ybq=DPxjC+RJhyiQ@mail.gmail.com -->
<!--X-Reference: 20121228084528.6a4ab8f5.jep200404@columbus.rr.com -->
<!--X-Reference: CAKXLc7fHeVdYXro7awBUHO_QyT218GUOfGr+o2NtT1j9&#45;yy8Zw@mail.gmail.com -->
<!--X-Reference: 20121228121733.36ca8738.jep200404@columbus.rr.com -->
<!--X-Reference: CAKXLc7dG5T_LF+Awm6SYLMiWoVMH1m8Ym+G07Yg1vWB+SSbYoQ@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[Date Prev][<a href="msg00001.html">Date Next</a>][Thread Prev][<a href="msg00001.html">Thread Next</a>][<a href="maillist.html#00000">Date Index</a>][<a href="threads.html#00000">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] SSD caching of 10x 10GB files on slow NAS</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Mon, 3 Feb 2014 15:21:10 -0800</li>
<li><strong>From</strong>: <strong>Miles Colman &lt;<a href="mailto:mcolman@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20SSD%20caching%20of%2010x%2010GB%20files%20on%20slow%20NAS">mcolman@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] SSD caching of 10x 10GB files on slow NAS</strong></li>
<li>References: &lt;CAL=gY80QoGCW9_TnDBF7ix_qyO72iBmaxoWNUKS9LZow9RhYag@mail.gmail.com&gt;	&lt;CAKXLc7fFCCvFp=2Hu889pYu_smjTsj+2CeSc6oTZnFchT18ZeQ@mail.gmail.com&gt;	&lt;CAL=gY82vfHKR0DWxq5RwaTmqbk4Q5Tit1Bq_mN1ok0jqKd4PGQ@mail.gmail.com&gt;	&lt;CAKXLc7eRXSDuhL6bZHwaMFW2X=KyKdrbp+Ybq=DPxjC+RJhyiQ@mail.gmail.com&gt;	&lt;20121228084528.6a4ab8f5.jep200404@columbus.rr.com&gt;	&lt;CAKXLc7fHeVdYXro7awBUHO_QyT218GUOfGr+o2NtT1j9-yy8Zw@mail.gmail.com&gt;	&lt;20121228121733.36ca8738.jep200404@columbus.rr.com&gt;	&lt;CAKXLc7dG5T_LF+Awm6SYLMiWoVMH1m8Ym+G07Yg1vWB+SSbYoQ@mail.gmail.com&gt;</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<div dir="ltr">Holy Old Thread Batman!<div>Now that SSDs with fast PCI connects are going mass-market, I&#39;m thinking about looking at this again. If you were going to choose between learning memcached  or learning gnu make to copy things to shm similar to this post: <a rel="nofollow" href="http://widgetsandshit.com/teddziuba/2011/02/stupid-unix-tricks-workflow-control-with-gnu-make.html">http://widgetsandshit.com/teddziuba/2011/02/stupid-unix-tricks-workflow-control-with-gnu-make.html</a></div>

<div>which would you do?</div></div><div class="gmail_extra"><br><br><div class="gmail_quote">On Thu, Jan 3, 2013 at 9:55 AM, Kalin KOZHUHAROV <span dir="ltr">&lt;<a rel="nofollow" href="mailto:me.kalin@example.com" target="_blank">me.kalin@example.com</a>&gt;</span> wrote:<br>

<blockquote class="gmail_quote" style="margin:0 0 0 .8ex;border-left:1px #ccc solid;padding-left:1ex"><div class="im">On Sat, Dec 29, 2012 at 2:17 AM,  &lt;<a rel="nofollow" href="mailto:jep200404@example.com">jep200404@example.com</a>&gt; wrote:<br>


&gt; On Fri, 28 Dec 2012 23:43:32 +0900, Kalin KOZHUHAROV &lt;<a rel="nofollow" href="mailto:me.kalin@example.com">me.kalin@example.com</a>&gt; wrote:<br>
&gt;<br>
&gt;&gt; On Fri, Dec 28, 2012 at 10:45 PM,  &lt;<a rel="nofollow" href="mailto:jep200404@example.com">jep200404@example.com</a>&gt; wrote:<br>
&gt;&gt; &gt; On Fri, 28 Dec 2012 12:57:55 +0900, Kalin KOZHUHAROV &lt;<a rel="nofollow" href="mailto:me.kalin@example.com">me.kalin@example.com</a>&gt; wrote:<br>
&gt;&gt; &gt;<br>
&gt;&gt; &gt;&gt; 960GB SSD with 1.5GB/s R/W<br>
&gt;&gt; &gt;<br>
&gt;&gt; &gt; 1.5 Gigabytes/s is smoking! Did you mean 1.5 Gigabits/s?<br>
&gt;<br>
&gt;&gt; Yes, it is smoking:<br>
&gt;&gt; <a rel="nofollow" href="http://www.ocztechnology.com/ocz-revodrive-3-x2-pci-express-ssd.html" target="_blank">http://www.ocztechnology.com/ocz-revodrive-3-x2-pci-express-ssd.html</a><br>
&gt;&gt; 1.5GB/s read, 1.3GB/s write, 230k iops<br>
&gt;&gt;<br>
&gt;&gt; So, 960GB drive is read into /dev/null in about 11 minutes ...<br>
&gt;<br>
&gt; Wow. That is _seriously_ smoking. Awesome!<br>
&gt;<br>
&gt; I can see how it might be hard for the rest of the computer to<br>
&gt; keep up. It&#39;ll be interesting to see the output of the following<br>
&gt; (with sda modified for the correct drive) when you get around to it.<br>
&gt;<br>
&gt; time dd if=/dev/sda of=/dev/null bs=1M<br>
&gt;<br>
</div>$ echo 3 &gt; /proc/sys/vm/drop_caches; sync; /usr/bin/time dd<br>
if=/dev/md127 of=/dev/zero bs=1M count=100000<br>
100000+0 records in<br>
100000+0 records out<br>
104857600000 bytes (105 GB) copied, 127.346 s, 823 MB/s<br>
0.02user 33.36system 2:07.34elapsed 26%CPU (0avgtext+0avgdata 7536maxresident)k<br>
0inputs+0outputs (1major+529minor)pagefaults 0swaps<br>
<br>
$ echo 3 &gt; /proc/sys/vm/drop_caches; sync; /usr/bin/time dd<br>
if=/dev/zero of=/mnt/pictures/100G bs=1M count=100000; /usr/bin/time<br>
sync<br>
100000+0 records in<br>
100000+0 records out<br>
104857600000 bytes (105 GB) copied, 97.4376 s, 1.1 GB/s<br>
0.05user 58.80system 1:37.45elapsed 60%CPU (0avgtext+0avgdata 7536maxresident)k<br>
0inputs+0outputs (3major+527minor)pagefaults 0swaps<br>
0.00user 0.00system 0:05.41elapsed 0%CPU (0avgtext+0avgdata 2464maxresident)k<br>
0inputs+0outputs (1major+203minor)pagefaults 0swaps<br>
$ ls -lsh /mnt/pictures/100G<br>
98G -rw-r--r-- 1 root root 98G Jan  4 02:47 /mnt/pictures/100G<br>
<br>
Well, just half of &quot;advertised&quot;... I&#39;ll see if it can be improved.<br>
Beats me why writing is faster (even with added sync).<br>
<br>
Anyway, that was just a quick test, I&#39;ll report more when I start<br>
using it more and I hope to get it run faster. For now I am happy it<br>
runs at all (there was bug 51881, so linux-3.7.1 was not working,<br>
fixed now).<br>
<br>
Cheers,<br>
Kalin.<br>
<div class="HOEnZb"><div class="h5"><br>
--<br>
To unsubscribe from this mailing list,<br>
please see the instructions at <a rel="nofollow" href="http://lists.tlug.jp/list.html" target="_blank">http://lists.tlug.jp/list.html</a><br>
<br>
The TLUG mailing list is hosted by ASAHI Net, provider of mobile and<br>
fixed broadband Internet services to individuals and corporations.<br>
Visit ASAHI Net&#39;s English-language Web page: <a rel="nofollow" href="http://asahi-net.jp/en/" target="_blank">http://asahi-net.jp/en/</a><br>
</div></div></blockquote></div><br></div>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Next by Date:
<strong><a href="msg00001.html">[tlug] [CFP] Call for presenters - March 8 Technical Meeting</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00001.html">[tlug] [CFP] Call for presenters - March 8 Technical Meeting</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00000"><strong>Date</strong></a></li>
<li><a href="threads.html#00000"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
