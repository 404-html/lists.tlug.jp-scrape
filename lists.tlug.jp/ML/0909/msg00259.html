<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [tlug] comand&#45;line recording... -->
<!--X-From-R13: gyhtNrkgryyvflf.arg -->
<!--X-Date: Sun, 27 Sep 2009 00:30:44 +0900 -->
<!--X-Message-Id: 200909270030.37285.tlug@extellisys.net -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: c0f4e2b00909252309q2f12e36q3ee4e6c5b628e414@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00258.html">Date Prev</a>][<a href="msg00260.html">Date Next</a>][<a href="msg00256.html">Thread Prev</a>][<a href="msg00260.html">Thread Next</a>][<a href="maillist.html#00259">Date Index</a>][<a href="threads.html#00259">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] comand-line recording...</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Sun, 27 Sep 2009 00:30:37 +0900</li>
<li><strong>From</strong>: <strong><a href="mailto:tlug@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20comand-line%20recording...">tlug@example.com</a></strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] comand-line recording...</strong></li>
<li>References: &lt;<a href="mailto:c0f4e2b00909252309q2f12e36q3ee4e6c5b628e414@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20comand-line%20recording...">c0f4e2b00909252309q2f12e36q3ee4e6c5b628e414@example.com</a>&gt;</li>
<li>User-agent: KMail/1.9.10</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On Saturday 26 September 2009 15:09:11 Bruno Raoult wrote:
&gt; I need (from compliance) to get a log of all commands typed by some
&gt; users...
&gt;
&gt; Of course, &quot;script&quot; will do the job, but the output of the commands are
&gt; also there... I just want commands.
&gt; And of course, as I said it is a compliance need, I cannot have write
&gt; access to the log file...

Easy solution: auditd provides exec logging with arguments.

<a  rel="nofollow" href="http://people.redhat.com/sgrubb/audit/">http://people.redhat.com/sgrubb/audit/</a>
<a  rel="nofollow" href="http://linux.die.net/man/8/ausearch">http://linux.die.net/man/8/ausearch</a>

The `ausearch` example on the following page illustrates how the EXECVE log 
captures what you are asking for above.

<a  rel="nofollow" href="http://alchy.org/index.php?entry=entry071219-114150">http://alchy.org/index.php?entry=entry071219-114150</a>

If you want a `history` style report, you could easily write a script to 
format output from `ausearch` as you desire.

Alternate solution: grsecurity also provides exec logging with arguments.

<a  rel="nofollow" href="http://grsecurity.org/">http://grsecurity.org/</a>

I do not recommend the hacks that are being discussed in other branches of 
this thread.  If you consider those, you may as well just ask the developers 
to avoid messing with their history and read the commands from the history 
files, because any user who wants to circumvent the &quot;auditing&quot; could easily 
do so.

Travis

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00241" href="msg00241.html">[tlug] comand-line recording...</a></strong>
<ul><li><em>From:</em> Bruno Raoult</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00258.html">Re: [tlug] comand-line recording...</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00260.html">[tlug] gtk-2 print w/o CUPS?</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00256.html">Re: [tlug] comand-line recording...</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00260.html">[tlug] gtk-2 print w/o CUPS?</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00259"><strong>Date</strong></a></li>
<li><a href="threads.html#00259"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
