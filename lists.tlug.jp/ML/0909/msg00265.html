<!-- MHonArc v2.6.16 -->
<!--X-Subject: Re: [tlug] comand&#45;line recording... -->
<!--X-From-R13: Qheg Enzcfba <pwfNfgneyvat&#45;fbsgjner.pbz> -->
<!--X-Date: Mon, 28 Sep 2009 00:41:34 +0900 -->
<!--X-Message-Id: 20090927154133.GD1381@poetic.cynic.net -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: c0f4e2b00909260523q36a12689rf15202638b19eb66@mail.gmail.com -->
<!--X-Reference: 20090926130503.GB16381@analytic.cynic.net -->
<!--X-Reference: 87fxa9n5lx.fsf@uwakimon.sk.tsukuba.ac.jp -->
<!--X-Reference: c0f4e2b00909252309q2f12e36q3ee4e6c5b628e414@mail.gmail.com -->
<!--X-Reference: 20090926092931.GH5873@analytic.cynic.net -->
<!--X-Reference: c0f4e2b00909260305u29f59c4dseeeb60f1d77e5c61@mail.gmail.com -->
<!--X-Reference: 20090926110314.GA16381@analytic.cynic.net -->
<!--X-Reference: c0f4e2b00909260641x1bd35d27h8ebb14a1e14b336f@mail.gmail.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
  <title>TLUG Mailing List</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <meta name="Author" content="Jim Tittsler - listmaster TLUG">
  <meta http-equiv="keywords" content="Tokyo Linux Users Group mailing list archive.">
</head>
 
<body bgcolor="#FFFFFF" text="#000000" BACKGROUND="../back3grnd.gif">
<BLOCKQUOTE>
<CENTER><IMG SRC="../tlug_logo.gif"><BR>Mailing List Archive</CENTER>
<P>
<TABLE BGCOLOR="#FFFF66" BORDER=1 COLS=1 WIDTH="90%" CLASS=navbar>
<TR>
<TD>&nbsp;&nbsp;
<FONT FACE="Verdana, Lucida Sans, Arial, Helvetica, Geneva, sans-serif"><SMALL>
<A HREF="../../index.html" TITLE="Tokyo Linux Users Group Page">
<STRONG>tlug.jp</STRONG></A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../../list.html" TITLE="Mailing List Page">Mailing List</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
<A HREF="../index.html" TITLE="tlug Archive Page">tlug archive</A> 
<IMG SRC="../../images/arrow_yellow.gif" WIDTH=13 HEIGHT=9 ALIGN=bottom ALT="-&gt;">
tlug Mailing List Archive
</SMALL></FONT>
</TD></TR>
</TABLE>
<P>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<hr>
[<a href="msg00264.html">Date Prev</a>][<a href="msg00266.html">Date Next</a>][<a href="msg00264.html">Thread Prev</a>][<a href="msg00271.html">Thread Next</a>][<a href="maillist.html#00265">Date Index</a>][<a href="threads.html#00265">Thread Index</a>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<h1>Re: [tlug] comand-line recording...</h1>
<hr>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<ul>
<li>Date: Mon, 28 Sep 2009 00:41:33 +0900</li>
<li><strong>From</strong>: <strong>Curt Sampson &lt;<a href="mailto:cjs@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20comand-line%20recording...">cjs@example.com</a>&gt;</strong></li>
<li><strong>Subject</strong>: <strong>Re: [tlug] comand-line recording...</strong></li>
<li>References: &lt;<a href="mailto:c0f4e2b00909260523q36a12689rf15202638b19eb66@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20comand-line%20recording...">c0f4e2b00909260523q36a12689rf15202638b19eb66@example.com</a>&gt;	&lt;<a href="mailto:20090926130503.GB16381@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20comand-line%20recording...">20090926130503.GB16381@example.com</a>&gt;	&lt;<a href="mailto:87fxa9n5lx.fsf@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20comand-line%20recording...">87fxa9n5lx.fsf@example.com</a>&gt;	&lt;<a href="mailto:c0f4e2b00909252309q2f12e36q3ee4e6c5b628e414@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20comand-line%20recording...">c0f4e2b00909252309q2f12e36q3ee4e6c5b628e414@example.com</a>&gt;	&lt;<a href="mailto:20090926092931.GH5873@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20comand-line%20recording...">20090926092931.GH5873@example.com</a>&gt;	&lt;<a href="mailto:c0f4e2b00909260305u29f59c4dseeeb60f1d77e5c61@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20comand-line%20recording...">c0f4e2b00909260305u29f59c4dseeeb60f1d77e5c61@example.com</a>&gt;	&lt;<a href="mailto:20090926110314.GA16381@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20comand-line%20recording...">20090926110314.GA16381@example.com</a>&gt;	&lt;<a href="mailto:c0f4e2b00909260523q36a12689rf15202638b19eb66@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20comand-line%20recording...">c0f4e2b00909260523q36a12689rf15202638b19eb66@example.com</a>&gt;	&lt;<a href="mailto:20090926130503.GB16381@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20comand-line%20recording...">20090926130503.GB16381@example.com</a>&gt;	&lt;<a href="mailto:c0f4e2b00909260641x1bd35d27h8ebb14a1e14b336f@DOMAIN.HIDDEN?SUBJECT=Re:%20%5Btlug%5D%20comand-line%20recording...">c0f4e2b00909260641x1bd35d27h8ebb14a1e14b336f@example.com</a>&gt;</li>
<li>User-agent: Mutt/1.5.18 (2008-05-17)</li>
</ul>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<hr>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<pre>On 2009-09-26 22:41 +0900 (Sat), Bruno Raoult wrote:

&gt; Well, if you don't have an answer to my question, please do not answer by
&gt; writing that my question is not good...

Sorry. I was just trying to help find a good solution to whatever
your mysterious problem might really be, by trying to understand what
you really want. If you don't want whatever help and comments people
are willing to offer, especially when you won't tell them what you're
looking for in any but a very vague way, I suggest you not post your
questions.

&gt; If you know a way to log commands, please tell me. If you don't, well,

I know many ways to log &quot;commands,&quot; but which ones work depend on what a
&quot;command&quot; is (more on this below), and all have various advantages and
disadvantages; some also have major security issues that could really
bite someone who's unwary.

On 2009-09-27 00:01 +0900 (Sun), Stephen J. Turnbull wrote:

&gt; <a  rel="nofollow" href="http://catb.org/~esr/faqs/smart-questions.html">http://catb.org/~esr/faqs/smart-questions.html</a>

Let me quote a particularly relevant bit:

    Describe the goal, not the step

    If you are trying to find out how to do something (as opposed to
    reporting a bug), begin by describing the goal. Only then describe
    the particular step towards it that you are blocked on.

    Often, people who need technical help have a high-level goal in mind
    and get stuck on what they think is one particular path towards the
    goal. They come for help with the step, but don't realize that the
    path is wrong. It can take substantial effort to get past this.


On 2009-09-26 23:27 +0900 (Sat), Stephen J. Turnbull wrote:

&gt; &quot;keystroke logger&quot; is what you mean to say, I think.

Yup.

&gt; Er ... doesn't sudo log every command it executes?

It does, and I'd thought of that. However, I can't seem to get enough
information out of Bruno about the problem to see if sudo could be
adapted to his needs, and I wasn't about to waste a lot of time
speculating about what his problem might or might not be, to see if sudo
might fit.

Note that sudo, as with the keylogger solution, also does not record the
same thing that script would.

&gt; Of course, what will happen is people who know they're going to type a
&gt; lot of commands will sudo su thatuser ....

This can be prevented.

On 2009-09-27 00:30 +0900 (Sun), tlug@example.com wrote:

&gt; Easy solution: auditd provides exec logging with arguments.

This is also not logging the same thing as script would be. Keep in
mind that it's not going to log the actual command typed in (because
that's subject to shell processing) and won't log any &quot;command&quot; that's
performed by the shell itself (such as emptying irretrivably an
important data file by typing something like &quot;&gt;/http/server/log&quot;).

&gt; The `ausearch` example on the following page illustrates how the EXECVE log 
&gt; captures what you are asking for above.

It's not capturing at all what he asked for, if he was really asking for
the equivalant of what &quot;script&quot; logs.

&gt; I do not recommend the hacks that are being discussed in other branches of 
&gt; this thread.  If you consider those, you may as well just ask the developers 
&gt; to avoid messing with their history and read the commands from the history 
&gt; files, because any user who wants to circumvent the &quot;auditing&quot; could easily 
&gt; do so.

&gt;From the description we have so far, it's not a problem if users
circumvent the auditing, so long as they don't do it by writing the log
file being created.

cjs
-- 
Curt Sampson       &lt;cjs@example.com&gt;        +81 90 7737 2974
           Functional programming in all senses of the word:
                   <a  rel="nofollow" href="http://www.starling-software.com">http://www.starling-software.com</a>

</pre>
<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<hr>
<ul><li><strong>Follow-Ups</strong>:
<ul>
<li><strong><a name="00271" href="msg00271.html">Re: [tlug] comand-line recording...</a></strong>
<ul><li><em>From:</em> Bruno Raoult</li></ul></li>
</ul></li></ul>
<!--X-Follow-Ups-End-->
<!--X-References-->
<ul><li><strong>References</strong>:
<ul>
<li><strong><a name="00250" href="msg00250.html">Re: [tlug] comand-line recording...</a></strong>
<ul><li><em>From:</em> Bruno Raoult</li></ul></li>
<li><strong><a name="00252" href="msg00252.html">Re: [tlug] comand-line recording...</a></strong>
<ul><li><em>From:</em> Curt Sampson</li></ul></li>
<li><strong><a name="00255" href="msg00255.html">Re: [tlug] comand-line recording...</a></strong>
<ul><li><em>From:</em> Stephen J. Turnbull</li></ul></li>
<li><strong><a name="00241" href="msg00241.html">[tlug] comand-line recording...</a></strong>
<ul><li><em>From:</em> Bruno Raoult</li></ul></li>
<li><strong><a name="00246" href="msg00246.html">Re: [tlug] comand-line recording...</a></strong>
<ul><li><em>From:</em> Curt Sampson</li></ul></li>
<li><strong><a name="00247" href="msg00247.html">Re: [tlug] comand-line recording...</a></strong>
<ul><li><em>From:</em> Bruno Raoult</li></ul></li>
<li><strong><a name="00248" href="msg00248.html">Re: [tlug] comand-line recording...</a></strong>
<ul><li><em>From:</em> Curt Sampson</li></ul></li>
<li><strong><a name="00253" href="msg00253.html">Re: [tlug] comand-line recording...</a></strong>
<ul><li><em>From:</em> Bruno Raoult</li></ul></li>
</ul></li></ul>
<!--X-References-End-->
<!--X-BotPNI-->
<ul>
<li>Prev by Date:
<strong><a href="msg00264.html">Re: [tlug] comand-line recording...</a></strong>
</li>
<li>Next by Date:
<strong><a href="msg00266.html">Re: [tlug] Open-source repository question</a></strong>
</li>
<li>Previous by thread:
<strong><a href="msg00264.html">Re: [tlug] comand-line recording...</a></strong>
</li>
<li>Next by thread:
<strong><a href="msg00271.html">Re: [tlug] comand-line recording...</a></strong>
</li>
<li>Index(es):
<ul>
<li><a href="maillist.html#00265"><strong>Date</strong></a></li>
<li><a href="threads.html#00265"><strong>Thread</strong></a></li>
</ul>
</li>
</ul>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<strong>
<a href="../index.html">Home</a> |
<a href="maillist.html">Main Index</a> |
<a href="threads.html">Thread Index</a>
</strong>
<!--X-User-Footer-End-->
 
<P>
<CENTER>
 <table border=2 width=75%><tr><td align=center>
<a href="../../index.html"> Home Page</a></td>
<td align=center><a href="/list.html"> Mailing List </a></td>
<td align=center><a href="http://tlug.jp/linuxinjapan.html"> Linux and Japan </a></td>
<td align=center><a href="http://tlug.jp/members.html">TLUG Members</a></td>
<td align=center><a href="http://tlug.jp//linuxlinks.html">Links</a></td>
</tr></TABLE>
<P>
</CENTER>
</BLOCKQUOTE>
</body>
</html>
